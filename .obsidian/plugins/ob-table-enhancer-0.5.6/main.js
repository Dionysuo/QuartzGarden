/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => TableEnhancer2
});
module.exports = __toCommonJS(main_exports);
var import_obsidian9 = require("obsidian");

// src/global.ts
var import_obsidian = require("obsidian");
var editingCellClassName = "editing-cell";
var hoveredCellClassName = "hovered-cell";
function getCaretPosition(editableElem) {
  let caretPos = 0, sel, range;
  sel = activeWindow.getSelection();
  if (sel && sel.rangeCount) {
    range = sel.getRangeAt(0);
    if (range.commonAncestorContainer.parentNode == editableElem) {
      caretPos = range.endOffset;
    }
  }
  return caretPos;
}
function setCaretPosition(editableElem, newPos) {
  let caretPos = 0, sel, range = activeDocument.createRange();
  sel = activeWindow.getSelection();
  if (sel && sel.rangeCount) {
    range.setStart(editableElem.childNodes[0], newPos);
    range.collapse(true);
    sel.removeAllRanges();
    sel.addRange(range);
  }
  return caretPos;
}
function getCellText(table, i, j) {
  let result = null;
  try {
    result = table.cells[i][j];
  } catch (err) {
    result = null;
    console.error("Cannot get cell i=", i, ", j=", j, " from table=", table);
  }
  return result;
}
function getCellInfo(cellEl, plugin, tableEl, editorView) {
  if (!tableEl) {
    let parent = cellEl.parentNode;
    while (parent) {
      if (parent instanceof HTMLTableElement)
        break;
      parent = parent.parentNode;
    }
    if (parent)
      tableEl = parent;
  }
  if (!tableEl) {
    console.error("Cannot get table element of cell ", cellEl);
    return;
  }
  if (!editorView) {
    const markdownView = plugin.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    editorView = editor == null ? void 0 : editor.cm;
  }
  const tablePos = editorView.posAtDOM(tableEl);
  const tableLine = editorView.state.doc.lineAt(tablePos).number - 1;
  const trEl = cellEl.closest("tr");
  const i = trEl.rowIndex;
  const j = cellEl.cellIndex;
  return { tableLine, i, j };
}
function getCellEl(tablePos, i, j, plugin) {
  var _a;
  const markdownView = plugin.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
  const editor = markdownView == null ? void 0 : markdownView.editor;
  const editorView = editor == null ? void 0 : editor.cm;
  const { node, offset } = editorView.domAtPos(tablePos);
  const el = node.childNodes[offset];
  if (!(el instanceof HTMLElement))
    return null;
  const tables = el.getElementsByTagName("table");
  if (tables.length > 1) {
    console.error("More than 1 tables were found");
    return null;
  }
  const table = tables[0];
  return (_a = table == null ? void 0 : table.rows[i]) == null ? void 0 : _a.cells[j];
}
function withEditingCell(callback) {
  const cellEl = activeDocument.querySelector("." + editingCellClassName);
  if (!(cellEl instanceof HTMLTableCellElement))
    return null;
  return callback(cellEl);
}

// src/tableEditor.ts
var import_obsidian2 = require("obsidian");

// src/editorUtils.ts
var getLineStartPos = (line) => ({
  line,
  ch: 0
});
var getLineEndPos = (line, editor) => ({
  line,
  ch: editor.getLine(line).length
});
var deleteLines = (editor, from, to) => {
  if (to === editor.lastLine() + 1) {
    return replaceRangeWithoutScroll(editor, "", getLineEndPos(from - 1, editor), getLineEndPos(to, editor));
  } else {
    return replaceRangeWithoutScroll(editor, "", getLineStartPos(from), getLineStartPos(to));
  }
};
var deleteLine = (editor, line) => {
  return deleteLines(editor, line, line + 1);
};
var getLeadingWhitespace = (lineContent) => {
  const indentation = lineContent.match(/^\s+/);
  return indentation ? indentation[0] : "";
};
var insertLineBelow = (editor, line) => {
  const endOfCurrentLine = getLineEndPos(line, editor);
  const indentation = getLeadingWhitespace(editor.getLine(line));
  return replaceRangeWithoutScroll(editor, "\n" + indentation, endOfCurrentLine);
};
var zf = (e, t) => {
  if (t.line < 0)
    return 0;
  const n = t.line + 1;
  if (n > e.lines)
    return e.length;
  const i = e.line(n);
  return isFinite(t.ch) ? t.ch < 0 ? i.from + Math.max(0, i.length + t.ch) : i.from + t.ch : i.to;
};
var replaceRangeWithoutScroll = (editor, replacement, from, to) => {
  const cm = editor.cm;
  const state = cm.state.doc;
  const from2 = zf(state, from);
  const to2 = to ? zf(state, to) : from2;
  return {
    changes: {
      from: from2,
      to: to2,
      insert: replacement
    },
    scrollIntoView: false,
    sequential: false
  };
};
var setLineWithoutScroll = (editor, n, text) => {
  const cm = editor.cm;
  const state = cm.state.doc;
  const from = zf(state, { line: n, ch: 0 });
  const to = zf(state, { line: n, ch: editor.getLine(n).length });
  return {
    changes: {
      from,
      to,
      insert: text
    },
    scrollIntoView: false,
    sequential: false
  };
};
function withoutScrollAndFocus(editorView, callback) {
  const scrollDom = editorView.scrollDOM;
  const x = scrollDom.scrollLeft;
  const y = scrollDom.scrollTop;
  const resetScroll = () => {
    scrollDom.scrollTo(x, y);
  };
  scrollDom.addEventListener("scroll", resetScroll, true);
  editorView.contentDOM.blur();
  callback();
  editorView.contentDOM.blur();
  scrollDom.removeEventListener("scroll", resetScroll, true);
}

// src/tableEditor.ts
var TableEditor = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  getTable(tableLine) {
    const markdownView = this.plugin.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    if (markdownView instanceof import_obsidian2.MarkdownView && markdownView.editor) {
      const editor = markdownView.editor;
      const lineCount = editor.lineCount();
      const cells = [];
      let match;
      let notStandard = false;
      let formatLine = editor.getLine(tableLine + 1);
      const formatRowRegex = /^\s*(\|)?(?:\s*:?\s*?-+\s*:?\s*\|?){2,}/;
      match = formatRowRegex.exec(formatLine);
      if (!match) {
        for (let i2 = 1; ; i2++) {
          const down = tableLine + 1 + i2;
          const up = tableLine + 1 - i2;
          if (up >= lineCount && down < 0)
            break;
          if (down >= 0) {
            match = formatRowRegex.exec(editor.getLine(down));
            if (match) {
              tableLine = down - 1;
              break;
            }
          }
          if (up < lineCount) {
            match = formatRowRegex.exec(editor.getLine(up));
            if (match) {
              tableLine = down - 1;
              break;
            }
          }
        }
        if (!match)
          return null;
      }
      formatLine = editor.getLine(tableLine + 1);
      if (!match[1]) {
        formatLine = `| ${formatLine} |`;
        editor.setLine(tableLine + 1, formatLine);
        notStandard = true;
      }
      const parsedFormatLine = formatLine.split(/(?<!\\)\|/).slice(1, -1);
      let headerLine = editor.getLine(tableLine);
      if (notStandard) {
        headerLine = `| ${headerLine} |`;
        editor.setLine(tableLine, headerLine);
      }
      const parsedHeaderLine = headerLine.split(/(?<!\\)\|/).slice(1, -1);
      cells.push(parsedHeaderLine);
      let i = tableLine + 1;
      const notStandardRegex = /^\s*[^|]*\|/;
      while (++i < lineCount) {
        let bodyLine = editor.getLine(i);
        if (notStandard) {
          if (notStandardRegex.exec(bodyLine)) {
            bodyLine = `| ${bodyLine} |`;
            editor.setLine(i, bodyLine);
            const parsedBodyLine = bodyLine.split(/(?<!\\)\|/).slice(1, -1);
            cells.push(parsedBodyLine);
          } else
            break;
        } else {
          if (bodyLine.trimStart().startsWith("|")) {
            const parsedBodyLine = bodyLine.split(/(?<!\\)\|/).slice(1, -1);
            cells.push(parsedBodyLine);
          } else
            break;
        }
      }
      return {
        fromLine: tableLine,
        toLine: i,
        formatLine: parsedFormatLine,
        cells
      };
    }
    return null;
  }
  static getLineNumber(table, line) {
    return table.fromLine + (line == 0 ? 0 : line + 1);
  }
  async updateCell(table, i, j, newContent) {
    if (!table)
      return;
    const markdownView = this.plugin.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    const editorView = editor == null ? void 0 : editor.cm;
    if (!editor || !editorView) {
      console.error("Cannot get editor");
      return;
    }
    if (newContent == table.cells[i][j])
      newContent += " ";
    table.cells[i][j] = newContent;
    const rowLineNumber = TableEditor.getLineNumber(table, i);
    const newLine = TableEditor.rowCells2rowString(table.cells[i]);
    withoutScrollAndFocus(editorView, () => {
      editorView.dispatch(setLineWithoutScroll(editor, rowLineNumber, newLine));
    });
  }
  async insertColRight(table, colIndex, col) {
    if (!table)
      return;
    const markdownView = this.plugin.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    const editorView = editor == null ? void 0 : editor.cm;
    if (!editor || !editorView) {
      console.error("Cannot get editor");
      return;
    }
    table.formatLine.splice(colIndex + 1, 0, "---");
    table.cells.forEach((row, idx) => {
      const newCell = col ? col[idx] : "   ";
      row.splice(colIndex + 1, 0, newCell);
    });
    const transactionSpecs = [];
    transactionSpecs.push(setLineWithoutScroll(editor, table.fromLine + 1, TableEditor.rowCells2rowString(table.formatLine)));
    for (let i = 0; i < table.cells.length; i++) {
      const lineNumber = TableEditor.getLineNumber(table, i);
      transactionSpecs.push(setLineWithoutScroll(editor, lineNumber, TableEditor.rowCells2rowString(table.cells[i])));
    }
    withoutScrollAndFocus(editorView, () => {
      editorView.dispatch(...transactionSpecs);
    });
  }
  async insertRowBelow(table, rowIndex, row) {
    if (!table)
      return;
    const markdownView = this.plugin.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    const editorView = editor == null ? void 0 : editor.cm;
    if (!editor || !editorView) {
      console.error("Cannot get editor");
      return;
    }
    if (!row) {
      row = [];
      let i = table.formatLine.length;
      while (i--) {
        row.push("  ");
      }
    }
    if (rowIndex == 0) {
      const rowLineNumber = table.fromLine + 1;
      withoutScrollAndFocus(editorView, () => {
        editorView.dispatch(insertLineBelow(editor, rowLineNumber));
        editorView.dispatch(setLineWithoutScroll(editor, rowLineNumber + 1, TableEditor.rowCells2rowString(row)));
      });
    } else {
      const rowLineNumber = TableEditor.getLineNumber(table, rowIndex);
      withoutScrollAndFocus(editorView, () => {
        editorView.dispatch(insertLineBelow(editor, rowLineNumber));
        editorView.dispatch(setLineWithoutScroll(editor, rowLineNumber + 1, TableEditor.rowCells2rowString(row)));
      });
    }
  }
  async setColAligned(table, colIndex, aligned) {
    if (!table)
      return;
    const markdownView = this.plugin.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    const editorView = editor == null ? void 0 : editor.cm;
    if (!editor || !editorView) {
      console.error("Cannot get editor");
      return;
    }
    table.formatLine[colIndex] = aligned == "left" ? ":----" : aligned == "right" ? "----:" : ":---:";
    withoutScrollAndFocus(editorView, () => {
      editorView.dispatch(setLineWithoutScroll(editor, table.fromLine + 1, TableEditor.rowCells2rowString(table.formatLine)));
    });
  }
  async swapCols(table, colIndex1, colIndex2) {
    if (!table)
      return;
    const markdownView = this.plugin.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    const editorView = editor == null ? void 0 : editor.cm;
    if (!editor || !editorView) {
      console.error("Cannot get editor");
      return;
    }
    const colNum = table.cells[0].length;
    if (colIndex1 < 0 || colIndex2 < 0 || colIndex1 >= colNum || colIndex2 >= colNum) {
      console.error("Move out of range");
      return;
    }
    const transactionSpecs = [];
    [table.formatLine[colIndex1], table.formatLine[colIndex2]] = [table.formatLine[colIndex2], table.formatLine[colIndex1]];
    transactionSpecs.push(setLineWithoutScroll(editor, table.fromLine + 1, TableEditor.rowCells2rowString(table.formatLine)));
    for (let i = 0; i < table.cells.length; i++) {
      const lineNumber = TableEditor.getLineNumber(table, i);
      [table.cells[i][colIndex1], table.cells[i][colIndex2]] = [table.cells[i][colIndex2], table.cells[i][colIndex1]];
      transactionSpecs.push(setLineWithoutScroll(editor, lineNumber, TableEditor.rowCells2rowString(table.cells[i])));
    }
    withoutScrollAndFocus(editorView, () => {
      editorView.dispatch(...transactionSpecs);
    });
  }
  async swapRows(table, rowIndex1, rowIndex2) {
    if (!table)
      return;
    const markdownView = this.plugin.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    const editorView = editor == null ? void 0 : editor.cm;
    if (!editor || !editorView) {
      console.error("Cannot get editor");
      return;
    }
    const rowNum = table.cells.length;
    if (rowIndex1 < 1 || rowIndex2 < 1 || rowIndex1 >= rowNum || rowIndex2 >= rowNum) {
      console.error("Move out of range");
      return;
    }
    const transactionSpecs = [];
    [table.cells[rowIndex1], table.cells[rowIndex2]] = [table.cells[rowIndex2], table.cells[rowIndex1]];
    const lineNumber1 = TableEditor.getLineNumber(table, rowIndex1);
    const row1String = TableEditor.rowCells2rowString(table.cells[rowIndex1]);
    transactionSpecs.push(setLineWithoutScroll(editor, lineNumber1, row1String));
    const lineNumber2 = TableEditor.getLineNumber(table, rowIndex2);
    const row2String = TableEditor.rowCells2rowString(table.cells[rowIndex2]);
    transactionSpecs.push(setLineWithoutScroll(editor, lineNumber2, row2String));
    withoutScrollAndFocus(editorView, () => {
      editorView.dispatch(...transactionSpecs);
    });
  }
  async deleteRow(table, rowIndex) {
    if (!table)
      return;
    const markdownView = this.plugin.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    const editorView = editor == null ? void 0 : editor.cm;
    if (!editor || !editorView) {
      console.error("Cannot get editor");
      return;
    }
    if (rowIndex == 0) {
      return;
    }
    const rowLineNumber = TableEditor.getLineNumber(table, rowIndex);
    withoutScrollAndFocus(editorView, () => {
      editorView.dispatch(deleteLine(editor, rowLineNumber));
    });
  }
  async deleteCol(table, colIndex) {
    if (!table)
      return;
    table.formatLine.splice(colIndex, 1);
    for (const row of table.cells)
      row.splice(colIndex, 1);
    const markdownView = this.plugin.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    const editorView = editor == null ? void 0 : editor.cm;
    if (!editor || !editorView) {
      console.error("Cannot get editor");
      return;
    }
    if (table.formatLine.length == 1) {
      editorView.dispatch(deleteLines(editor, table.fromLine, table.toLine));
    } else {
      const transactionSpecs = [];
      transactionSpecs.push(setLineWithoutScroll(editor, table.fromLine + 1, TableEditor.rowCells2rowString(table.formatLine)));
      for (let i = 0; i < table.cells.length; i++) {
        const lineNumber = TableEditor.getLineNumber(table, i);
        transactionSpecs.push(setLineWithoutScroll(editor, lineNumber, TableEditor.rowCells2rowString(table.cells[i])));
      }
      withoutScrollAndFocus(editorView, () => {
        editorView.dispatch(...transactionSpecs);
      });
    }
  }
  async sortByCol(table, colIndex, order) {
    if (!table)
      return;
    const markdownView = this.plugin.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    const editorView = editor == null ? void 0 : editor.cm;
    if (!editor || !editorView) {
      console.error("Cannot get editor");
      return;
    }
    const sortedBody = table.cells.slice(1).sort((row1, row2) => {
      const cell1 = row1[colIndex].toUpperCase();
      const cell2 = row2[colIndex].toUpperCase();
      if (!order || order == "aes")
        return cell1 < cell2 ? -1 : cell1 > cell2 ? 1 : 0;
      else
        return cell1 < cell2 ? 1 : cell1 > cell2 ? -1 : 0;
    });
    const bodyString = sortedBody.map(TableEditor.rowCells2rowString).join("\n");
    editor.replaceRange(bodyString, { line: table.fromLine + 2, ch: 0 }, { line: table.toLine, ch: 0 });
  }
  async createEmptyTable(i, j, fill) {
    if (j < 1 || i < 1) {
      console.error("Cannot create an empty table");
      return;
    }
    const markdownView = this.plugin.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    const editorView = editor == null ? void 0 : editor.cm;
    if (!editor || !editorView) {
      console.error("Cannot get editor");
      return;
    }
    const cursor = editor.getCursor();
    const cursorLine = editor.getLine(cursor.line);
    const bodyString = "|" + "  |".repeat(j);
    const formatString = "|" + ":-:|".repeat(j);
    let tableArr = [
      cursorLine,
      "\n",
      bodyString,
      "\n",
      formatString,
      "\n"
    ];
    while (i--)
      tableArr.push(bodyString, "\n");
    editor.setLine(cursor.line, tableArr.join(""));
  }
  static rowCells2rowString(cells) {
    const result = ["|"];
    try {
      for (const cell of cells) {
        result.push(cell.length == 0 ? "  " : cell);
        result.push("|");
      }
    } catch (err) {
      console.error(err);
      console.error(cells);
      throw err;
    }
    return result.join("");
  }
};

// src/icon.ts
var insertBelowIcon = `
<svg
	t="1661842034318"
	class="icon"
	viewBox="0 0 1024 1024"
	version="1.1"
	xmlns="http://www.w3.org/2000/svg"
	p-id="5688"
	width="16"
	height="16"
>
	<path
		d="M904 768H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8zM878.7 160H145.3c-18.4 0-33.3 14.3-33.3 32v464c0 17.7 14.9 32 33.3 32h733.3c18.4 0 33.3-14.3 33.3-32V192c0.1-17.7-14.8-32-33.2-32zM360 616H184V456h176v160z m0-224H184V232h176v160z m240 224H424V456h176v160z m0-224H424V232h176v160z m240 224H664V456h176v160z m0-224H664V232h176v160z" 
		p-id="5689"
		fill="currentColor"
	    stroke="currentColor"
	></path>
</svg>`;
var deleteIcon = `
<svg
	t="1661781161180"
	class="icon"
	viewBox="0 0 1024 1024"
	version="1.1"
	xmlns="http://www.w3.org/2000/svg"
	p-id="3242"
	width="16"
	height="16"
>
	<path
		d="M512 471.744l207.424-207.36a28.416 28.416 0 1 1 40.256 40.192L552.256 512l207.36 207.424a28.416 28.416 0 1 1-40.192 40.256L512 552.256l-207.424 207.36a28.416 28.416 0 1 1-40.256-40.192L471.744 512l-207.36-207.424a28.416 28.416 0 0 1 40.192-40.256L512 471.744z"
		p-id="3243"
		fill="currentColor"
	    stroke="currentColor"
	>
	</path>
</svg>`;
var insertRightIcon = `
<svg
	t="1661842059940"
	class="icon"
	viewBox="0 0 1024 1024"
	version="1.1"
	xmlns="http://www.w3.org/2000/svg"
	p-id="5924"
	width="16"
	height="16"
>
	<path
		d="M856 112h-80c-4.4 0-8 3.6-8 8v784c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V120c0-4.4-3.6-8-8-8zM656 112H192c-17.7 0-32 14.9-32 33.3v733.3c0 18.4 14.3 33.3 32 33.3h464c17.7 0 32-14.9 32-33.3V145.3c0-18.4-14.3-33.3-32-33.3zM392 840H232V664h160v176z m0-240H232V424h160v176z m0-240H232V184h160v176z m224 480H456V664h160v176z m0-240H456V424h160v176z m0-240H456V184h160v176z" 
		p-id="5925"
		fill="currentColor"
	    stroke="currentColor"
	></path>
</svg>`;
var moveRightIcon = `
<svg
	t="1662187765148"
	class="icon"
	viewBox="0 0 1024 1024"
	version="1.1"
	xmlns="http://www.w3.org/2000/svg"
	p-id="9678"
	width="16"
	height="16"
>
	<path
		d="M593.450667 512.128L360.064 278.613333l45.290667-45.226666 278.613333 278.762666L405.333333 790.613333l-45.226666-45.269333z" 
		p-id="9679"
		fill="currentColor"
    	stroke="currentColor"
	></path>
</svg>`;
var moveLeftIcon = `
<svg
	t="1662188090144"
	class="icon"
	viewBox="0 0 1024 1024"
	version="1.1"
	xmlns="http://www.w3.org/2000/svg"
	p-id="6067"
	width="16"
	height="16"
>
	<path
		d="M641.28 278.613333l-45.226667-45.226666-278.634666 278.762666 278.613333 278.485334 45.248-45.269334-233.365333-233.237333z"
		p-id="6068"
		fill="currentColor"
    	stroke="currentColor"
	></path>
</svg>`;
var cloneIcon = `
<svg t="1671932954709" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4984" width="16" height="16"><path d="M160 160v544h128v-64H224V224h416v64h64V160H160z m160 160v544h544V320H320z m64 64h416v416H384V384z" fill="currentColor"
    	stroke="currentColor" p-id="4985"></path></svg>`;
var upwardIcon = `
<svg t="1671934713104" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2640" width="16" height="16"><path d="M830.24 685.76l11.328-11.312a16 16 0 0 0 0-22.64L530.448 340.688a16 16 0 0 0-22.64 0L196.688 651.808a16 16 0 0 0 0 22.64l11.312 11.312a16 16 0 0 0 22.624 0l288.496-288.512L807.632 685.76a16 16 0 0 0 22.624 0z" fill="currentColor"
	   stroke="currentColor" p-id="2641"></path></svg>`;
var downIcon = `
<svg t="1671934792670" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3163" width="16" height="16"><path d="M830.24 340.688l11.328 11.312a16 16 0 0 1 0 22.624L530.448 685.76a16 16 0 0 1-22.64 0L196.688 374.624a16 16 0 0 1 0-22.624l11.312-11.312a16 16 0 0 1 22.624 0l288.496 288.496 288.512-288.496a16 16 0 0 1 22.624 0z" fill="currentColor"
	   stroke="currentColor" p-id="3164"></path></svg>`;
var insertColRight = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon">
    <path d="M6,5C5.448,5 5,5.448 5,6L5,18C5,18.552 5.448,19 6,19L12,19C12.552,19 13,18.552 13,18L13,6C13,5.448 12.552,5 12,5L6,5Z"/>
    <path d="M19,19L19,5"/>
</svg>`;
var insertRowBelow = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon">
    <path d="M19,6C19,5.448 18.552,5 18,5L6,5C5.448,5 5,5.448 5,6L5,12C5,12.552 5.448,13 6,13L18,13C18.552,13 19,12.552 19,12L19,6Z"/>
    <path d="M5,19L19,19"/>
</svg>`;
var cloneRow = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon">
    <path d="M19,6L5,6"/>
    <path d="M7,19L5,19"/>
    <path d="M13,19L11,19"/>
    <path d="M19,19L17,19"/>
    <path d="M12,14L15,11"/>
    <path d="M12,14L9,11"/>
</svg>`;
var cloneCol = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon">
    <path d="M6,5L6,19"/>
    <path d="M19,17L19,19"/>
    <path d="M19,11L19,13"/>
    <path d="M19,5L19,7"/>
    <path d="M14,12L11,9"/>
    <path d="M14,12L11,15"/>
</svg>`;
var delRow = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon">
    <path d="M17.75,5L4,5"/>
    <path d="M17.75,19L4,19"/>
    <path d="M12,12L4,12"/>
    <path d="M15,14.5L20,9.5"/>
    <path d="M20,14.5L15,9.5"/>
</svg>`;
var delCol = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon">
    <path d="M5,6.25L5,20"/>
    <path d="M19,6.25L19,20"/>
    <path d="M12,12L12,20"/>
    <path d="M14.5,9L9.5,4"/>
    <path d="M14.5,4L9.5,9"/>
</svg>`;

// src/toolBar.ts
var import_obsidian3 = require("obsidian");
var ToolBar = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.rowOpBarEl = createDiv({ cls: "ob-table-enhancer-row-bar" });
    this.colOpBarEl = createDiv({ cls: "ob-table-enhancer-col-bar" });
    this.rowOpBarEl.createDiv({
      cls: "ob-table-enhancer-row-bar-button"
    }, (el) => {
      el.innerHTML = upwardIcon;
      el.onclick = async () => {
        if (this.cell.i == 1) {
          new import_obsidian3.Notice("Current column is already the top row.");
          return;
        }
        const table = await plugin.tableEditor.getTable(this.cell.tableLine);
        if (!table) {
          console.error("Cannot get table.");
          return;
        }
        await this.plugin.tableEditor.swapRows(table, this.cell.i, this.cell.i - 1);
      };
    });
    this.rowOpBarEl.createDiv({
      cls: "ob-table-enhancer-row-bar-button"
    }, (el) => {
      el.innerHTML = downIcon;
      el.onclick = async () => {
        const table = await plugin.tableEditor.getTable(this.cell.tableLine);
        if (!table) {
          console.error("Cannot get table.");
          return;
        }
        const rowNum = table.cells.length;
        if (this.cell.i == rowNum - 1) {
          new import_obsidian3.Notice("Current column is already the bottom row.");
          return;
        }
        await this.plugin.tableEditor.swapRows(table, this.cell.i, this.cell.i + 1);
      };
    });
    this.rowOpBarEl.createDiv({
      cls: "ob-table-enhancer-row-bar-button"
    }, (el) => {
      el.innerHTML = insertBelowIcon;
      el.onclick = async () => {
        const table = await plugin.tableEditor.getTable(this.cell.tableLine);
        if (!table) {
          console.error("Cannot get table.");
          return;
        }
        await this.plugin.tableEditor.insertRowBelow(table, this.cell.i);
      };
    });
    this.colOpBarEl.createDiv({
      cls: "ob-table-enhancer-col-bar-button"
    }, (el) => {
      el.innerHTML = moveLeftIcon;
      el.onclick = async () => {
        if (this.cell.j == 0) {
          new import_obsidian3.Notice("Current column is already the leftmost column.");
          return;
        }
        const table = await plugin.tableEditor.getTable(this.cell.tableLine);
        if (!table) {
          console.error("Cannot get table.");
          return;
        }
        await plugin.tableEditor.swapCols(table, this.cell.j, this.cell.j - 1);
      };
    });
    this.colOpBarEl.createDiv({
      cls: "ob-table-enhancer-col-bar-button"
    }, (el) => {
      el.innerHTML = insertRightIcon;
      el.onclick = async () => {
        const table = await plugin.tableEditor.getTable(this.cell.tableLine);
        if (!table) {
          console.error("Cannot get table.");
          return;
        }
        await this.plugin.tableEditor.insertColRight(table, this.cell.j);
      };
    });
    this.rowOpBarEl.createDiv({
      cls: "ob-table-enhancer-row-bar-button"
    }, (el) => {
      el.innerHTML = deleteIcon;
      el.onclick = async () => {
        if (this.cell.i == 0) {
          new import_obsidian3.Notice("You can't delete the header of a table.");
          return;
        }
        const table = await plugin.tableEditor.getTable(this.cell.tableLine);
        if (!table) {
          console.error("Cannot get table.");
          return;
        }
        await this.plugin.tableEditor.deleteRow(table, this.cell.i);
      };
    });
    this.colOpBarEl.createDiv({
      cls: "ob-table-enhancer-col-bar-button"
    }, (el) => {
      el.innerHTML = deleteIcon;
      el.onclick = async () => {
        const table = await plugin.tableEditor.getTable(this.cell.tableLine);
        if (!table) {
          console.error("Cannot get table.");
          return;
        }
        await this.plugin.tableEditor.deleteCol(table, this.cell.j);
      };
    });
    this.colOpBarEl.createDiv({
      cls: "ob-table-enhancer-col-bar-button"
    }, (el) => {
      el.innerHTML = moveRightIcon;
      el.onclick = async () => {
        const table = await plugin.tableEditor.getTable(this.cell.tableLine);
        if (!table) {
          console.error("Cannot get table.");
          return;
        }
        const colNum = table.formatLine.length;
        if (this.cell.j == colNum - 1) {
          new import_obsidian3.Notice("Current column is already the rightmost column.");
          return;
        }
        await this.plugin.tableEditor.swapCols(table, this.cell.j, this.cell.j + 1);
      };
    });
    this.colOpBarEl.createDiv({
      cls: "ob-table-enhancer-col-bar-button"
    }, (el) => {
      el.innerHTML = cloneIcon;
      el.onclick = async () => {
        const table = await plugin.tableEditor.getTable(this.cell.tableLine);
        if (!table) {
          console.error("Cannot get table.");
          return;
        }
        const col = table.cells.map((row) => row[this.cell.j]);
        await this.plugin.tableEditor.insertColRight(table, this.cell.j, col);
      };
    });
    this.rowOpBarEl.createDiv({
      cls: "ob-table-enhancer-row-bar-button"
    }, (el) => {
      el.innerHTML = cloneIcon;
      el.onclick = async () => {
        const table = await plugin.tableEditor.getTable(this.cell.tableLine);
        if (!table) {
          console.error("Cannot get table.");
          return;
        }
        await this.plugin.tableEditor.insertRowBelow(table, this.cell.i, table.cells[this.cell.i]);
      };
    });
    plugin.registerDomEvent(activeDocument, "scroll", (e) => {
      this.colOpBarEl.style.opacity = "0";
      this.rowOpBarEl.style.opacity = "0";
      this.activeOpBars = [];
    }, true);
    if (activeDocument) {
      activeDocument.body.appendChild(this.rowOpBarEl);
      activeDocument.body.appendChild(this.colOpBarEl);
    }
  }
  tryShowFor(cellEl) {
    if (this.plugin.isInReadingView())
      return;
    if (this.hideTimeout)
      clearTimeout(this.hideTimeout);
    this.cell = getCellInfo(cellEl, this.plugin);
    if (this.cell.j == 0) {
      this.activeOpBars.push(this.rowOpBarEl);
      this.rowOpBarEl.style.opacity = "1";
      this.colOpBarEl.style.zIndex = "99";
      const cellRect = cellEl.getBoundingClientRect();
      const toolBarRect = this.rowOpBarEl.getBoundingClientRect();
      this.rowOpBarEl.style.top = `${cellRect.top}px`;
      this.rowOpBarEl.style.left = `${cellRect.left - toolBarRect.width}px`;
      this.rowOpBarEl.style.height = `${cellRect.height}px`;
    }
    if (this.cell.i == 0) {
      this.activeOpBars.push(this.colOpBarEl);
      this.colOpBarEl.style.opacity = "1";
      this.colOpBarEl.style.zIndex = "99";
      const cellRect = cellEl.getBoundingClientRect();
      const toolBarRect = this.colOpBarEl.getBoundingClientRect();
      this.colOpBarEl.style.top = `${cellRect.top - toolBarRect.height}px`;
      this.colOpBarEl.style.left = `${cellRect.left}px`;
      this.colOpBarEl.style.width = `${cellRect.width}px`;
    }
  }
  tryHide(timeout) {
    this.hideTimeout = setTimeout(() => {
      this.colOpBarEl.style.opacity = "0";
      this.rowOpBarEl.style.opacity = "0";
      this.colOpBarEl.style.zIndex = "-1";
      this.rowOpBarEl.style.zIndex = "-1";
      this.activeOpBars = [];
    }, timeout);
    const stopHideTimeout = (e) => {
      clearTimeout(this.hideTimeout);
      this.activeOpBars.forEach((toolBarEl) => {
        toolBarEl.onmouseout = (e2) => {
          if (e2.relatedTarget instanceof Node && toolBarEl.contains(e2.relatedTarget))
            return;
          this.tryHide(500);
        };
      });
    };
    this.activeOpBars.forEach((toolbar) => {
      toolbar.onmouseenter = stopHideTimeout;
    });
  }
  onUnload() {
    this.colOpBarEl.remove();
    this.rowOpBarEl.remove();
  }
};

// src/buttonPanel.ts
var import_obsidian4 = require("obsidian");
var addButtons = (menu, plugin, { tableLine, i, j }) => {
  const oldOnLoad = menu.onload;
  menu.onload = () => {
    oldOnLoad.call(menu);
    const menuDom = menu.dom;
    const containerEl = createDiv({ cls: ["ob-table-enhancer", "button-menu"] });
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Insert row below").setClass("clickable-icon").onClick(async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying to insert row below ");
        return;
      }
      await plugin.tableEditor.insertRowBelow(table, i);
    }).then((button) => button.buttonEl.innerHTML = insertRowBelow);
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Insert column right").setClass("clickable-icon").onClick(async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying to insert column below ");
        return;
      }
      await plugin.tableEditor.insertColRight(table, j);
    }).then((button) => button.buttonEl.innerHTML = insertColRight);
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Clone row").setClass("clickable-icon").onClick(async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying to copy row below ");
        return;
      }
      await plugin.tableEditor.insertRowBelow(table, i, table.cells[i]);
    }).then((button) => button.buttonEl.innerHTML = cloneRow);
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Clone column").setClass("clickable-icon").onClick(async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying to copy row below ");
        return;
      }
      const col = table.cells.map((row) => row[j]);
      await plugin.tableEditor.insertColRight(table, j, col);
    }).then((button) => button.buttonEl.innerHTML = cloneCol);
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Delete row").setClass("clickable-icon").onClick(async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying to copy row below ");
        return;
      }
      await plugin.tableEditor.deleteRow(table, i);
    }).then((button) => button.buttonEl.innerHTML = delRow);
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Delete column").setClass("clickable-icon").onClick(async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying to copy row below ");
        return;
      }
      await plugin.tableEditor.deleteCol(table, j);
    }).then((button) => button.buttonEl.innerHTML = delCol);
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Move column left").setIcon("chevron-left").setClass("clickable-icon").onClick(async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying to copy row below ");
        return;
      }
      if (j == 0) {
        new import_obsidian4.Notice("Current column is already the leftmost column.");
        return;
      }
      await plugin.tableEditor.swapCols(table, j, j - 1);
    });
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Move column right").setIcon("chevron-right").setClass("clickable-icon").onClick(async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying to copy row below ");
        return;
      }
      const colNum = table.formatLine.length;
      if (j == colNum - 1) {
        new import_obsidian4.Notice("Current column is already the rightmost column.");
        return;
      }
      await plugin.tableEditor.swapCols(table, j, j + 1);
    });
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Move row upward").setIcon("chevron-up").setClass("clickable-icon").onClick(async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying to copy row below ");
        return;
      }
      if (i == 1) {
        new import_obsidian4.Notice("Current column is already the top row.");
        return;
      }
      await plugin.tableEditor.swapRows(table, i, i - 1);
    });
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Move row down").setIcon("chevron-down").setClass("clickable-icon").onClick(async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying to copy row below ");
        return;
      }
      const rowNum = table.cells.length;
      if (i == rowNum - 1) {
        new import_obsidian4.Notice("Current column is already the bottom row.");
        return;
      }
      await plugin.tableEditor.swapRows(table, i, i + 1);
    });
    const setColAlign = (aligned) => async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying to copy row below ");
        return;
      }
      await plugin.tableEditor.setColAligned(table, j, aligned);
    };
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Center align").setIcon("align-center").setClass("clickable-icon").onClick(setColAlign("center"));
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Left align").setIcon("align-left").setClass("clickable-icon").onClick(setColAlign("left"));
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Right align").setIcon("align-right").setClass("clickable-icon").onClick(setColAlign("right"));
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Sort ascending").setIcon("sort-asc").setClass("clickable-icon").onClick(async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying sort table ");
        return;
      }
      await plugin.tableEditor.sortByCol(table, j, "aes");
    });
    new import_obsidian4.ButtonComponent(containerEl).setTooltip("Sort descending").setIcon("sort-desc").setClass("clickable-icon").onClick(async () => {
      await plugin.doneEdit();
      const table = plugin.tableEditor.getTable(tableLine);
      if (!table) {
        console.error("cannot locate table when trying sort table ");
        return;
      }
      await plugin.tableEditor.sortByCol(table, j, "desc");
    });
    const dividerEl = createDiv({ cls: "menu-separator" });
    menuDom.prepend(dividerEl);
    menuDom.prepend(containerEl);
  };
};

// src/tableGenerator.ts
var import_obsidian5 = require("obsidian");
var addTableGenerator = (menu, plugin, editor) => {
  menu.addItem((menuItem) => {
    menuItem.setTitle("Create new table");
    menuItem.setIcon("table");
    menuItem.onClick(async (e) => {
      var _a, _b, _c;
      const cursor = editor.getCursor("from");
      const editor2 = editor;
      let coord;
      if (editor2.coordsAtPos) {
        const offset = editor.posToOffset(cursor);
        coord = (_c = (_b = (_a = editor2.cm).coordsAtPos) == null ? void 0 : _b.call(_a, offset)) != null ? _c : editor2.coordsAtPos(offset);
      } else {
        console.error("Cannot get cursor coordinate");
        return;
      }
      const tableGenerator = new TableGenerator(plugin);
      tableGenerator.showAtPosition({ x: coord.left, y: coord.bottom });
    });
  });
};
var TableGenerator = class extends import_obsidian5.Menu {
  constructor(plugin) {
    super();
    this.plugin = plugin;
    this.addItem((item) => item.setDisabled(true));
  }
  onload() {
    super.onload();
    const menuDom = this.dom;
    const frag = activeDocument.createDocumentFragment();
    const containerEl = frag.createDiv({ cls: "table-generator-container" });
    const counter = frag.createDiv({ cls: ["table-generator-counter", "menu-item"] });
    for (let i = 0; i < 7; i++) {
      for (let j = 0; j < 7; j++) {
        const gridEl = createDiv({ cls: "table-generator-grid" });
        gridEl.setAttr("i", i);
        gridEl.setAttr("j", j);
        gridEl.addEventListener("click", async () => {
          await this.plugin.tableEditor.createEmptyTable(i + 1, j + 1);
        });
        gridEl.addEventListener("mouseenter", async () => {
          containerEl.querySelectorAll(".table-generator-grid").forEach((gridEl2) => {
            const i2 = parseInt(gridEl2.getAttr("i"));
            const j2 = parseInt(gridEl2.getAttr("j"));
            if (i2 > i || j2 > j)
              gridEl2.removeClass("select");
            else
              gridEl2.addClass("select");
          });
          counter.innerText = `${i + 1} rows ${j + 1} columns`;
        });
        containerEl.append(gridEl);
      }
    }
    menuDom.append(frag);
  }
};

// src/settings.ts
var import_obsidian6 = require("obsidian");
var DEFAULT_SETTINGS = {
  enableButtonPanel: true,
  enableTableGenerator: true,
  enableFloatingToolbar: false,
  adjustTableCellHeight: true
};
var TableEnhancer2SettingTab = class extends import_obsidian6.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    this.containerEl.empty();
    this.containerEl.createEl("h2", { text: "Table Enhancer Settings" });
    new import_obsidian6.Setting(this.containerEl).setName("Enable Button Panel").addToggle((c) => c.setValue(this.plugin.settings.enableButtonPanel).onChange(async (val) => {
      this.plugin.settings.enableButtonPanel = val;
      await this.plugin.saveSettings();
    }));
    new import_obsidian6.Setting(this.containerEl).setName("Enable Table Generator").addToggle((c) => c.setValue(this.plugin.settings.enableTableGenerator).onChange(async (val) => {
      this.plugin.settings.enableTableGenerator = val;
      await this.plugin.saveSettings();
    }));
    new import_obsidian6.Setting(this.containerEl).setName("Enable Floating Panel").addToggle((c) => c.setValue(this.plugin.settings.enableFloatingToolbar).onChange(async (val) => {
      this.plugin.settings.enableFloatingToolbar = val;
      await this.plugin.saveSettings();
    }));
    new import_obsidian6.Setting(this.containerEl).setName("Adjust Height of Table Cells").setDesc("The default height of an empty cell is very short. Activate this to increase the cell height and make it easier to click.").addToggle((c) => c.setValue(this.plugin.settings.adjustTableCellHeight).onChange(async (val) => {
      var _a, _b;
      if (val == true)
        (_a = activeDocument == null ? void 0 : activeDocument.body) == null ? void 0 : _a.addClass("table-height-adjust");
      else
        (_b = activeDocument == null ? void 0 : activeDocument.body) == null ? void 0 : _b.removeClass("table-height-adjust");
      this.plugin.settings.adjustTableCellHeight = val;
      await this.plugin.saveSettings();
    }));
  }
};

// src/tableHoverPostProcessor.ts
function getTableHoverPostProcessor(plugin) {
  return (el) => {
    const tables = el.getElementsByTagName("table");
    for (let i = 0; i < tables.length; i++) {
      const table = tables[i];
      for (let i2 = 0; i2 < table.rows.length; i2++) {
        const row = table.rows[i2];
        for (let j = 0; j < row.cells.length; j++) {
          const cell = row.cells[j];
          cell.addEventListener("mouseenter", () => {
            cell.addClass(hoveredCellClassName);
          });
          cell.addEventListener("mouseleave", () => {
            cell.removeClass(hoveredCellClassName);
          });
        }
      }
    }
  };
}

// src/mousedownHandler.ts
var import_obsidian7 = require("obsidian");
function getMousedownHandler(plugin) {
  return async (e) => {
    if (plugin.isInReadingView())
      return;
    const markdownView = plugin.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    const editorView = editor == null ? void 0 : editor.cm;
    const cellEl = e.targetNode;
    if (!(cellEl instanceof HTMLTableCellElement)) {
      const editingCell2 = activeDocument.querySelector("." + editingCellClassName);
      if (editingCell2 instanceof HTMLTableCellElement) {
        await plugin.doneEdit(editingCell2);
        editor == null ? void 0 : editor.focus();
      }
      return;
    }
    e.stopImmediatePropagation();
    e.preventDefault();
    let tableEl = cellEl.parentNode;
    while (tableEl) {
      if (tableEl instanceof HTMLTableElement)
        break;
      tableEl = tableEl.parentNode;
    }
    if (!tableEl) {
      console.error("Cannot get table element of cell ", cellEl);
      return;
    }
    if (tableEl.hasClass("dataview"))
      return;
    const { tableLine, i, j } = getCellInfo(cellEl, plugin, tableEl);
    if (cellEl.isContentEditable) {
      return;
    }
    const tablePos = editorView.posAtDOM(tableEl);
    const editingCell = activeDocument.querySelector("." + editingCellClassName);
    if (editingCell instanceof HTMLTableCellElement) {
      await plugin.doneEdit(editingCell);
    }
    setTimeout(() => {
      const newCellEl = getCellEl(tablePos, i, j, plugin);
      if (!(newCellEl instanceof HTMLTableCellElement)) {
        console.error("Cannot relocate table cell");
        return;
      }
      plugin.setCellEditing(newCellEl, tableLine, i, j);
    }, 50);
  };
}

// src/keydownHandler.ts
var import_obsidian8 = require("obsidian");
function getKeydownHandler(plugin) {
  return async (e) => {
    const markdownView = plugin.app.workspace.getActiveViewOfType(import_obsidian8.MarkdownView);
    if (!markdownView)
      return;
    const editor = markdownView.editor;
    const editorView = editor == null ? void 0 : editor.cm;
    if (!editor.hasFocus()) {
      if (!e.repeat && e.ctrlKey && e.key == "z") {
        e.stopPropagation();
        e.preventDefault();
        editor.undo();
        editor.blur();
        return;
      } else if (!e.repeat && e.ctrlKey && e.key == "Z") {
        e.stopPropagation();
        e.preventDefault();
        editor.redo();
        editor.blur();
        return;
      }
    }
    const cellEl = activeDocument.querySelector("." + editingCellClassName);
    if (!(cellEl instanceof HTMLTableCellElement))
      return;
    if (!e.repeat && e.key == "Enter" && e.shiftKey) {
      e.stopPropagation();
      e.preventDefault();
      const prevCaretPos = getCaretPosition(cellEl);
      const text1 = cellEl.innerText.slice(0, prevCaretPos);
      const text2 = cellEl.innerText.slice(prevCaretPos + 1);
      cellEl.innerText = [text1, " <br> ", text2].join("");
      setCaretPosition(cellEl, prevCaretPos + 6);
      return;
    }
    if (!e.repeat && (e.key == "Enter" || e.key == "Escape")) {
      e.stopPropagation();
      e.preventDefault();
      await plugin.doneEdit(cellEl);
      return;
    }
    let tableEl = cellEl.parentNode;
    while (tableEl) {
      if (tableEl instanceof HTMLTableElement)
        break;
      tableEl = tableEl.parentNode;
    }
    if (!tableEl) {
      console.error("Cannot find table of cell", cellEl);
      return;
    }
    if (e.key == "ArrowLeft") {
      const caretPos = getCaretPosition(cellEl);
      const { tableLine, i, j } = getCellInfo(cellEl, plugin, tableEl);
      if (caretPos == 0) {
        e.preventDefault();
        const tablePos = editorView.posAtDOM(tableEl);
        await plugin.doneEdit(cellEl);
        setTimeout(() => {
          const newCellEl = getCellEl(tablePos, i, j - 1, plugin);
          if (newCellEl instanceof HTMLTableCellElement) {
            plugin.setCellEditing(newCellEl, tableLine, i, j - 1);
          }
        }, 50);
      }
      e.stopPropagation();
      return;
    }
    if (e.key == "ArrowRight") {
      const caretPos = getCaretPosition(cellEl);
      const { tableLine, i, j } = getCellInfo(cellEl, plugin, tableEl);
      if (caretPos >= cellEl.innerText.length) {
        e.preventDefault();
        const tablePos = editorView.posAtDOM(tableEl);
        await plugin.doneEdit(cellEl);
        setTimeout(() => {
          const newCellEl = getCellEl(tablePos, i, j + 1, plugin);
          if (newCellEl instanceof HTMLTableCellElement) {
            plugin.setCellEditing(newCellEl, tableLine, i, j + 1);
          }
        }, 50);
      }
      e.stopPropagation();
      return;
    }
    if (e.key == "ArrowUp") {
      e.stopPropagation();
      e.preventDefault();
      const { tableLine, i, j } = getCellInfo(cellEl, plugin, tableEl);
      const tablePos = editorView.posAtDOM(tableEl);
      await plugin.doneEdit(cellEl);
      setTimeout(() => {
        const newCellEl = getCellEl(tablePos, i - 1, j, plugin);
        if (newCellEl instanceof HTMLTableCellElement) {
          plugin.setCellEditing(newCellEl, tableLine, i - 1, j);
        }
      }, 50);
      return;
    }
    if (e.key == "ArrowDown") {
      e.stopPropagation();
      e.preventDefault();
      const { tableLine, i, j } = getCellInfo(cellEl, plugin, tableEl);
      const tablePos = editorView.posAtDOM(tableEl);
      await plugin.doneEdit(cellEl);
      setTimeout(() => {
        const newCellEl = getCellEl(tablePos, i + 1, j, plugin);
        if (newCellEl instanceof HTMLTableCellElement) {
          plugin.setCellEditing(newCellEl, tableLine, i + 1, j);
        }
      }, 50);
      return;
    }
    if (!e.repeat && e.ctrlKey && e.key == "a") {
      e.stopPropagation();
      e.preventDefault();
      const selection = activeWindow.getSelection();
      const range = activeDocument.createRange();
      range.selectNodeContents(cellEl);
      selection == null ? void 0 : selection.removeAllRanges();
      selection == null ? void 0 : selection.addRange(range);
      return;
    }
    if (e.shiftKey && e.key == "Tab") {
      e.stopPropagation();
      e.preventDefault();
      const { tableLine, i, j } = getCellInfo(cellEl, plugin, tableEl);
      const rowNum = tableEl.rows.length;
      const colNum = tableEl.rows[0].cells.length;
      const tablePos = editorView.posAtDOM(tableEl);
      let nextI, nextJ;
      if (i == 0 && j == 0) {
        nextI = rowNum - 1;
        nextJ = colNum - 1;
      } else if (j == 0) {
        nextI = i - 1;
        nextJ = colNum - 1;
      } else {
        nextI = i;
        nextJ = j - 1;
      }
      await plugin.doneEdit(cellEl);
      setTimeout(() => {
        const newCellEl = getCellEl(tablePos, nextI, nextJ, plugin);
        if (newCellEl instanceof HTMLTableCellElement) {
          plugin.setCellEditing(newCellEl, tableLine, nextI, nextJ);
        }
      }, 50);
      return;
    }
    if (e.key == "Tab") {
      e.stopPropagation();
      e.preventDefault();
      const { tableLine, i, j } = getCellInfo(cellEl, plugin, tableEl);
      const rowNum = tableEl.rows.length;
      const colNum = tableEl.rows[0].cells.length;
      const tablePos = editorView.posAtDOM(tableEl);
      let nextI, nextJ;
      if (i == rowNum - 1 && j == colNum - 1) {
        nextI = 0;
        nextJ = 0;
      } else if (j == colNum - 1) {
        nextI = i + 1;
        nextJ = 0;
      } else {
        nextI = i;
        nextJ = j + 1;
      }
      await plugin.doneEdit(cellEl);
      setTimeout(() => {
        const newCellEl = getCellEl(tablePos, nextI, nextJ, plugin);
        if (newCellEl instanceof HTMLTableCellElement) {
          plugin.setCellEditing(newCellEl, tableLine, nextI, nextJ);
        }
      }, 50);
      return;
    }
  };
}

// node_modules/monkey-around/mjs/index.js
function around(obj, factories) {
  const removers = Object.keys(factories).map((key) => around1(obj, key, factories[key]));
  return removers.length === 1 ? removers[0] : function() {
    removers.forEach((r) => r());
  };
}
function around1(obj, method, createWrapper) {
  const original = obj[method], hadOwn = obj.hasOwnProperty(method);
  let current = createWrapper(original);
  if (original)
    Object.setPrototypeOf(current, original);
  Object.setPrototypeOf(wrapper, current);
  obj[method] = wrapper;
  return remove;
  function wrapper(...args) {
    if (current === original && obj[method] === wrapper)
      remove();
    return current.apply(this, args);
  }
  function remove() {
    if (obj[method] === wrapper) {
      if (hadOwn)
        obj[method] = original;
      else
        delete obj[method];
    }
    if (current === original)
      return;
    current = original;
    Object.setPrototypeOf(wrapper, original || Function);
  }
}

// src/commands.ts
var getCommands = (plugin) => {
  return {
    "editor:toggle-bold": () => withEditingCell((cellEl) => {
      const selection = activeWindow.getSelection();
      if (!selection)
        return;
      let selectionStart, selectionEnd;
      if (selection.anchorOffset < selection.focusOffset) {
        selectionStart = selection.anchorOffset;
        selectionEnd = selection.focusOffset;
      } else {
        selectionStart = selection.focusOffset;
        selectionEnd = selection.anchorOffset;
      }
      const prevText = cellEl.innerText.slice(0, selectionStart);
      const selectText = cellEl.innerText.slice(selectionStart, selectionEnd);
      const succText = cellEl.innerText.slice(selectionEnd);
      cellEl.innerText = [prevText, "**", selectText, "**", succText].join("");
      setCaretPosition(cellEl, selectionEnd + 4);
      return true;
    }),
    "editor:toggle-italics": () => withEditingCell((cellEl) => {
      const selection = activeWindow.getSelection();
      if (!selection)
        return;
      let selectionStart, selectionEnd;
      if (selection.anchorOffset < selection.focusOffset) {
        selectionStart = selection.anchorOffset;
        selectionEnd = selection.focusOffset;
      } else {
        selectionStart = selection.focusOffset;
        selectionEnd = selection.anchorOffset;
      }
      const prevText = cellEl.innerText.slice(0, selectionStart);
      const selectText = cellEl.innerText.slice(selectionStart, selectionEnd);
      const succText = cellEl.innerText.slice(selectionEnd);
      cellEl.innerText = [prevText, "*", selectText, "*", succText].join("");
      setCaretPosition(cellEl, selectionEnd + 2);
      return true;
    }),
    "editor:toggle-blockquote": () => withEditingCell((cellEl) => {
      const selection = activeWindow.getSelection();
      if (!selection)
        return;
      let selectionStart, selectionEnd;
      if (selection.anchorOffset < selection.focusOffset) {
        selectionStart = selection.anchorOffset;
        selectionEnd = selection.focusOffset;
      } else {
        selectionStart = selection.focusOffset;
        selectionEnd = selection.anchorOffset;
      }
      const prevText = cellEl.innerText.slice(0, selectionStart);
      const selectText = cellEl.innerText.slice(selectionStart, selectionEnd);
      const succText = cellEl.innerText.slice(selectionEnd);
      cellEl.innerText = ["> ", prevText, selectText, succText].join("");
      setCaretPosition(cellEl, selectionEnd + 2);
      return true;
    }),
    "editor:toggle-bullet-list": () => withEditingCell((cellEl) => {
      return true;
    }),
    "editor:toggle-checklist-status": () => withEditingCell((cellEl) => {
      return true;
    }),
    "editor:toggle-code": () => withEditingCell((cellEl) => {
      const selection = activeWindow.getSelection();
      if (!selection)
        return;
      let selectionStart, selectionEnd;
      if (selection.anchorOffset < selection.focusOffset) {
        selectionStart = selection.anchorOffset;
        selectionEnd = selection.focusOffset;
      } else {
        selectionStart = selection.focusOffset;
        selectionEnd = selection.anchorOffset;
      }
      const prevText = cellEl.innerText.slice(0, selectionStart);
      const selectText = cellEl.innerText.slice(selectionStart, selectionEnd);
      const succText = cellEl.innerText.slice(selectionEnd);
      cellEl.innerText = [prevText, "`", selectText, "`", succText].join("");
      setCaretPosition(cellEl, selectionEnd + 2);
      return true;
    }),
    "editor:toggle-highlight": () => withEditingCell((cellEl) => {
      const selection = activeWindow.getSelection();
      if (!selection)
        return;
      let selectionStart, selectionEnd;
      if (selection.anchorOffset < selection.focusOffset) {
        selectionStart = selection.anchorOffset;
        selectionEnd = selection.focusOffset;
      } else {
        selectionStart = selection.focusOffset;
        selectionEnd = selection.anchorOffset;
      }
      const prevText = cellEl.innerText.slice(0, selectionStart);
      const selectText = cellEl.innerText.slice(selectionStart, selectionEnd);
      const succText = cellEl.innerText.slice(selectionEnd);
      cellEl.innerText = [prevText, "==", selectText, "==", succText].join("");
      setCaretPosition(cellEl, selectionEnd + 4);
    }),
    "editor:toggle-numbered-list": () => withEditingCell((cellEl) => {
      return null;
    }),
    "editor:toggle-strikethrough": () => withEditingCell((cellEl) => {
      const selection = activeWindow.getSelection();
      if (!selection)
        return;
      let selectionStart, selectionEnd;
      if (selection.anchorOffset < selection.focusOffset) {
        selectionStart = selection.anchorOffset;
        selectionEnd = selection.focusOffset;
      } else {
        selectionStart = selection.focusOffset;
        selectionEnd = selection.anchorOffset;
      }
      const prevText = cellEl.innerText.slice(0, selectionStart);
      const selectText = cellEl.innerText.slice(selectionStart, selectionEnd);
      const succText = cellEl.innerText.slice(selectionEnd);
      cellEl.innerText = [prevText, "~~", selectText, "~~", succText].join("");
      setCaretPosition(cellEl, selectionEnd + 4);
    })
  };
};

// main.ts
var TableEnhancer2 = class extends import_obsidian9.Plugin {
  async onload() {
    this.tableEditor = new TableEditor(this);
    await this.loadSettings();
    this.addSettingTab(new TableEnhancer2SettingTab(this.app, this));
    if (this.settings.enableFloatingToolbar)
      this.toolBar = new ToolBar(this);
    const tableHoverPostProcessor = getTableHoverPostProcessor(this);
    this.registerMarkdownPostProcessor(tableHoverPostProcessor);
    this.app.workspace.onLayoutReady(() => {
      if (this.settings.adjustTableCellHeight)
        activeDocument.body.addClass("table-height-adjust");
      const clickHandler = getMousedownHandler(this);
      this.registerDomEvent(window, "click", clickHandler, true);
      const keydownHandler = getKeydownHandler(this);
      this.registerDomEvent(window, "keydown", keydownHandler, true);
      const commands = getCommands(this);
      this.register(around(this.app.commands, {
        executeCommand(next) {
          return function(command) {
            var _a;
            if (!((_a = commands[command.id]) == null ? void 0 : _a.call()))
              next.call(this, command);
          };
        }
      }));
    });
    this.registerEvent(this.app.workspace.on("editor-menu", (menu, editor) => {
      menu.setUseNativeMenu(false);
      const hoveredCell = activeDocument.querySelector("." + hoveredCellClassName);
      if (!(hoveredCell instanceof HTMLTableCellElement)) {
        if (this.settings.enableTableGenerator)
          addTableGenerator(menu, this, editor);
        return;
      }
      const cellInfo = getCellInfo(hoveredCell, this);
      if (this.settings.enableButtonPanel)
        addButtons(menu, this, cellInfo);
    }));
  }
  setCellEditing(cellEl, tableLine, i, j) {
    const table = this.tableEditor.getTable(tableLine);
    if (!table) {
      console.error("Cannot get table of cell ", cellEl);
      return;
    }
    const text = getCellText(table, i, j);
    if (text == null)
      return;
    cellEl.addClass(editingCellClassName);
    cellEl.focus();
    cellEl.contentEditable = "true";
    if (text == "") {
      cellEl.innerText = " ";
      setCaretPosition(cellEl, 0);
    } else {
      cellEl.innerText = text;
      setCaretPosition(cellEl, text.length);
    }
  }
  async doneEdit(cellEl) {
    if (!cellEl) {
      const el = activeDocument.querySelector("." + editingCellClassName);
      if (el instanceof HTMLTableCellElement)
        cellEl = el;
      else
        return;
    }
    cellEl.setAttr("contenteditable", false);
    cellEl.removeClass(editingCellClassName);
    const { tableLine, i, j } = getCellInfo(cellEl, this);
    const table = this.tableEditor.getTable(tableLine);
    if (!table) {
      console.error("Cannot get table when trying to done edit");
      return;
    }
    await this.tableEditor.updateCell(table, i, j, cellEl.innerText.trim());
  }
  isInReadingView() {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian9.MarkdownView);
    return markdownView instanceof import_obsidian9.MarkdownView && markdownView.getMode() == "preview";
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  onunload() {
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvZ2xvYmFsLnRzIiwgInNyYy90YWJsZUVkaXRvci50cyIsICJzcmMvZWRpdG9yVXRpbHMudHMiLCAic3JjL2ljb24udHMiLCAic3JjL3Rvb2xCYXIudHMiLCAic3JjL2J1dHRvblBhbmVsLnRzIiwgInNyYy90YWJsZUdlbmVyYXRvci50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL3RhYmxlSG92ZXJQb3N0UHJvY2Vzc29yLnRzIiwgInNyYy9tb3VzZWRvd25IYW5kbGVyLnRzIiwgInNyYy9rZXlkb3duSGFuZGxlci50cyIsICJub2RlX21vZHVsZXMvbW9ua2V5LWFyb3VuZC9tanMvaW5kZXguanMiLCAic3JjL2NvbW1hbmRzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge0VkaXRvciwgTWFya2Rvd25WaWV3LCBQbHVnaW59IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7XG5cdGVkaXRpbmdDZWxsQ2xhc3NOYW1lLFxuXHRnZXRDYXJldFBvc2l0aW9uLCBnZXRDZWxsVGV4dCxcblx0aG92ZXJlZENlbGxDbGFzc05hbWUsXG5cdGdldENlbGxJbmZvLFxuXHRzZXRDYXJldFBvc2l0aW9uXG59IGZyb20gXCIuL3NyYy9nbG9iYWxcIjtcbmltcG9ydCB7VGFibGVFZGl0b3J9IGZyb20gXCIuL3NyYy90YWJsZUVkaXRvclwiO1xuaW1wb3J0IHtFZGl0b3JWaWV3fSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xuaW1wb3J0IHtcblx0Z2V0Q2xvbmVDb2xJdGVtLFxuXHRnZXRDbG9uZVJvd0l0ZW0sIGdldENvbEFsaWduSXRlbSwgZ2V0RGVsQ29sSXRlbSxcblx0Z2V0RGVsUm93SXRlbSxcblx0Z2V0SW5zZXJ0Q29sUmlnaHRJdGVtLFxuXHRnZXRJbnNlcnRSb3dCZWxvd0l0ZW0sIGdldE1vdmVDb2xMZWZ0SXRlbSwgZ2V0TW92ZUNvbFJpZ2h0SXRlbSwgZ2V0TW92ZVJvd0Rvd25JdGVtLCBnZXRNb3ZlUm93VXBJdGVtXG59IGZyb20gXCIuL3NyYy9tZW51SXRlbXNcIjtcbmltcG9ydCB7VG9vbEJhcn0gZnJvbSBcIi4vc3JjL3Rvb2xCYXJcIjtcbmltcG9ydCB7YWRkQnV0dG9uc30gZnJvbSBcIi4vc3JjL2J1dHRvblBhbmVsXCI7XG5pbXBvcnQge2FkZFRhYmxlR2VuZXJhdG9yfSBmcm9tIFwiLi9zcmMvdGFibGVHZW5lcmF0b3JcIjtcbmltcG9ydCB7REVGQVVMVF9TRVRUSU5HUywgVGFibGVFbmhhbmNlcjJTZXR0aW5ncywgVGFibGVFbmhhbmNlcjJTZXR0aW5nVGFifSBmcm9tIFwiLi9zcmMvc2V0dGluZ3NcIjtcbmltcG9ydCB7Z2V0VGFibGVIb3ZlclBvc3RQcm9jZXNzb3J9IGZyb20gXCIuL3NyYy90YWJsZUhvdmVyUG9zdFByb2Nlc3NvclwiO1xuaW1wb3J0IHtnZXRNb3VzZWRvd25IYW5kbGVyfSBmcm9tIFwiLi9zcmMvbW91c2Vkb3duSGFuZGxlclwiO1xuaW1wb3J0IHtnZXRLZXlkb3duSGFuZGxlcn0gZnJvbSBcIi4vc3JjL2tleWRvd25IYW5kbGVyXCI7XG5pbXBvcnQge2Fyb3VuZH0gZnJvbSBcIm1vbmtleS1hcm91bmRcIjtcbmltcG9ydCB7Z2V0Q29tbWFuZHN9IGZyb20gXCIuL3NyYy9jb21tYW5kc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYWJsZUVuaGFuY2VyMiBleHRlbmRzIFBsdWdpbiB7XG5cblx0LyoqIFx1ODg2OFx1NjgzQ1x1N0YxNlx1OEY5MVx1NTY2OFx1RkYwQ1x1NzUyOFx1NEU4RVx1NUMwNiBkb20gXHU0RTBBXHU3Njg0XHU2NTM5XHU1MkE4XHU2MzAxXHU0RTQ1XHU1MzE2XHU1MjMwXHU2NTg3XHU0RUY2ICovXG5cdHB1YmxpYyB0YWJsZUVkaXRvcjogVGFibGVFZGl0b3I7XG5cblx0LyoqIFx1NjBBQ1x1NkQ2RVx1NURFNVx1NTE3N1x1NjgwRiAqL1xuXHRwdWJsaWMgdG9vbEJhcjogVG9vbEJhciB8IG51bGw7XG5cblx0LyoqIFx1OEJCRVx1N0Y2RSAqL1xuXHRwdWJsaWMgc2V0dGluZ3M6IFRhYmxlRW5oYW5jZXIyU2V0dGluZ3M7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXG5cdFx0dGhpcy50YWJsZUVkaXRvciA9IG5ldyBUYWJsZUVkaXRvcih0aGlzKTtcblxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBUYWJsZUVuaGFuY2VyMlNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVGbG9hdGluZ1Rvb2xiYXIpXG5cdFx0XHR0aGlzLnRvb2xCYXIgPSBuZXcgVG9vbEJhcih0aGlzKTtcblxuXHRcdGNvbnN0IHRhYmxlSG92ZXJQb3N0UHJvY2Vzc29yID0gZ2V0VGFibGVIb3ZlclBvc3RQcm9jZXNzb3IodGhpcyk7XG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duUG9zdFByb2Nlc3Nvcih0YWJsZUhvdmVyUG9zdFByb2Nlc3Nvcik7XG5cblx0XHQvLyBcdTYzMDlcdTk1MkVcdTkwM0JcdThGOTFcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG5cblx0XHRcdC8vIFx1NkNFOFx1NTE4Q1x1NjgzN1x1NUYwRlxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuYWRqdXN0VGFibGVDZWxsSGVpZ2h0KVxuXHRcdFx0XHRhY3RpdmVEb2N1bWVudC5ib2R5LmFkZENsYXNzKCd0YWJsZS1oZWlnaHQtYWRqdXN0Jyk7XG5cblx0XHRcdC8vIFx1NkNFOFx1NTE4Q1x1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlx1NTkwNFx1NzQwNlx1NTY2OFxuXHRcdFx0Y29uc3QgY2xpY2tIYW5kbGVyID0gZ2V0TW91c2Vkb3duSGFuZGxlcih0aGlzKTtcblx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudCh3aW5kb3csICdjbGljaycsIGNsaWNrSGFuZGxlciwgdHJ1ZSk7XG5cblx0XHRcdC8vIFx1NkNFOFx1NTE4Q1x1NjMwOVx1OTUyRVx1NEU4Qlx1NEVGNlx1NTkwNFx1NzQwNlx1NTY2OFxuXHRcdFx0Y29uc3Qga2V5ZG93bkhhbmRsZXIgPSBnZXRLZXlkb3duSGFuZGxlcih0aGlzKTtcblx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudCh3aW5kb3csICdrZXlkb3duJywga2V5ZG93bkhhbmRsZXIsIHRydWUpO1xuXG5cdFx0XHRjb25zdCBjb21tYW5kcyA9IGdldENvbW1hbmRzKHRoaXMpIGFzIGFueTtcblx0XHRcdHRoaXMucmVnaXN0ZXIoXG5cdFx0XHRcdGFyb3VuZCgodGhpcy5hcHAgYXMgYW55KS5jb21tYW5kcywge1xuXHRcdFx0XHRcdGV4ZWN1dGVDb21tYW5kKG5leHQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbiAoY29tbWFuZDogYW55KSB7XG5cdFx0XHRcdFx0XHRcdGlmICghY29tbWFuZHNbY29tbWFuZC5pZF0/LmNhbGwoKSlcblx0XHRcdFx0XHRcdFx0XHRuZXh0LmNhbGwodGhpcywgY29tbWFuZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLW1lbnUnLCAobWVudSwgZWRpdG9yKSA9PiB7XG5cdFx0XHQvLyBcdTg5ODFcdTZDNDJcdTRFMERcdTRGN0ZcdTc1MjhcdTUzOUZcdTc1MUYgbWVudVxuXHRcdFx0bWVudS5zZXRVc2VOYXRpdmVNZW51KGZhbHNlKTtcblx0XHRcdC8vIFx1NjI3RVx1NTIzMFx1NjYyRlx1NEUwRFx1NjYyRlx1NTcyOFx1NjdEMFx1NEUyQSBjZWxsIFx1NEUwQVx1ODlFNlx1NTNEMVx1NzY4NFx1ODNEQ1x1NTM1NVxuXHRcdFx0Y29uc3QgaG92ZXJlZENlbGwgPSBhY3RpdmVEb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIGhvdmVyZWRDZWxsQ2xhc3NOYW1lKTtcblx0XHRcdGlmICghKGhvdmVyZWRDZWxsIGluc3RhbmNlb2YgSFRNTFRhYmxlQ2VsbEVsZW1lbnQpKSB7Ly8gXHU2Q0ExXHU2NzA5IGhvdmVyIFx1NTcyOCBjZWxsIFx1NEUwQVxuXHRcdFx0XHQvLyBcdTUyMTlcdTUzRUZcdTRFRTVcdTY2M0VcdTc5M0EgdGFibGUgZ2VuZXJhdG9yXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVRhYmxlR2VuZXJhdG9yKVxuXHRcdFx0XHRcdGFkZFRhYmxlR2VuZXJhdG9yKG1lbnUsIHRoaXMsIGVkaXRvcik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdC8vIFx1NTE0OFx1ODNCN1x1NUY5N1x1ODg0Q1x1NTIxN1x1NEZFMVx1NjA2Rlx1RkYwQ1x1ODAwQ1x1NEUwRFx1NjYyRlx1NTE0OFx1NEZERFx1NUI1OFx1NjZGNFx1NjUzOVx1RkYwQ1x1NTZFMFx1NEUzQVx1NEZERFx1NUI1OFx1NjZGNFx1NjUzOVx1NEYxQVx1ODlFNlx1NTNEMVx1OTFDRFx1N0VEOFx1RkYwQ1x1NUJGQ1x1ODFGNCBwb3NBdERvbSBcdTZDQTFcdTZDRDVcdTc1Mjhcblx0XHRcdGNvbnN0IGNlbGxJbmZvID0gZ2V0Q2VsbEluZm8oaG92ZXJlZENlbGwsIHRoaXMpITtcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZUJ1dHRvblBhbmVsKVxuXHRcdFx0XHRhZGRCdXR0b25zKG1lbnUsIHRoaXMsIGNlbGxJbmZvKTtcblx0XHR9KSk7XG5cdH1cblxuXHRzZXRDZWxsRWRpdGluZyhcblx0XHRjZWxsRWw6IEhUTUxUYWJsZUNlbGxFbGVtZW50LFxuXHRcdHRhYmxlTGluZTogbnVtYmVyLFxuXHRcdGk6IG51bWJlcixcblx0XHRqOiBudW1iZXJcblx0KSB7XG5cdFx0Y29uc3QgdGFibGUgPSB0aGlzLnRhYmxlRWRpdG9yLmdldFRhYmxlKHRhYmxlTGluZSk7XG5cdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcignQ2Fubm90IGdldCB0YWJsZSBvZiBjZWxsICcsIGNlbGxFbCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGNvbnN0IHRleHQgPSBnZXRDZWxsVGV4dCh0YWJsZSwgaSwgaik7XG5cdFx0aWYgKHRleHQgPT0gbnVsbClcblx0XHRcdHJldHVybjtcblx0XHQvLyBcdTUyQTBcdTRFMEEgY2xhc3Ncblx0XHRjZWxsRWwuYWRkQ2xhc3MoZWRpdGluZ0NlbGxDbGFzc05hbWUpO1xuXHRcdC8vIFx1ODA1QVx1NzEyNlxuXHRcdGNlbGxFbC5mb2N1cygpO1xuXHRcdC8vIFx1NEY3Rlx1OEZEOVx1NEUyQSBjZWxsIFx1NTNFRlx1N0YxNlx1OEY5MVxuXHRcdGNlbGxFbC5jb250ZW50RWRpdGFibGUgPSAndHJ1ZSc7XG5cdFx0Ly8gXHU1MTg1XHU1QkI5XHU2NkZGXHU2MzYyXG5cdFx0aWYgKHRleHQgPT0gJycpIHtcblx0XHRcdGNlbGxFbC5pbm5lclRleHQgPSAnICc7XG5cdFx0XHRzZXRDYXJldFBvc2l0aW9uKGNlbGxFbCwgMCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNlbGxFbC5pbm5lclRleHQgPSB0ZXh0ITtcblx0XHRcdHNldENhcmV0UG9zaXRpb24oY2VsbEVsLCB0ZXh0IS5sZW5ndGgpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGRvbmVFZGl0KGNlbGxFbD86IEhUTUxUYWJsZUNlbGxFbGVtZW50KSB7XG5cdFx0aWYgKCFjZWxsRWwpIHtcblx0XHRcdGNvbnN0IGVsID0gYWN0aXZlRG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBlZGl0aW5nQ2VsbENsYXNzTmFtZSk7XG5cdFx0XHRpZiAoZWwgaW5zdGFuY2VvZiBIVE1MVGFibGVDZWxsRWxlbWVudClcblx0XHRcdFx0Y2VsbEVsID0gZWw7XG5cdFx0XHRlbHNlIHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBcdTUwNUNcdTZCNjJcdTdGMTZcdThGOTFcblx0XHRjZWxsRWwuc2V0QXR0cignY29udGVudGVkaXRhYmxlJywgZmFsc2UpO1xuXHRcdC8vIFx1NTIyMFx1OTY2NFx1N0YxNlx1OEY5MSBjbGFzc1xuXHRcdGNlbGxFbC5yZW1vdmVDbGFzcyhlZGl0aW5nQ2VsbENsYXNzTmFtZSk7XG5cblx0XHQvLyBcdTYzRDBcdTRFQTRcdTY2RjRcdTY1Mzlcblx0XHRjb25zdCB7IHRhYmxlTGluZSwgaSwgaiB9ID0gZ2V0Q2VsbEluZm8oY2VsbEVsLCB0aGlzKSE7XG5cdFx0Y29uc3QgdGFibGUgPSB0aGlzLnRhYmxlRWRpdG9yLmdldFRhYmxlKHRhYmxlTGluZSk7XG5cdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcignQ2Fubm90IGdldCB0YWJsZSB3aGVuIHRyeWluZyB0byBkb25lIGVkaXQnKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRhd2FpdCB0aGlzLnRhYmxlRWRpdG9yLnVwZGF0ZUNlbGwodGFibGUsIGksIGosIGNlbGxFbC5pbm5lclRleHQudHJpbSgpKTtcblx0fVxuXG5cdGlzSW5SZWFkaW5nVmlldygpIHtcblx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdHJldHVybiBtYXJrZG93blZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgJiYgbWFya2Rvd25WaWV3LmdldE1vZGUoKSA9PSBcInByZXZpZXdcIjtcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7fVxufVxuIiwgImltcG9ydCB7VGFibGVFZGl0b3J9IGZyb20gXCIuL3RhYmxlRWRpdG9yXCI7XG5pbXBvcnQgVGFibGVFbmhhbmNlcjIgZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7TWFya2Rvd25WaWV3fSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7RWRpdG9yVmlld30gZnJvbSBcIkBjb2RlbWlycm9yL3ZpZXdcIjtcbmltcG9ydCB7b2ZmfSBmcm9tIFwiY29kZW1pcnJvclwiO1xuXG5leHBvcnQgY29uc3QgZWRpdGluZ0NlbGxDbGFzc05hbWUgPSAnZWRpdGluZy1jZWxsJztcbmV4cG9ydCBjb25zdCBob3ZlcmVkQ2VsbENsYXNzTmFtZSA9ICdob3ZlcmVkLWNlbGwnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZXRQb3NpdGlvbihlZGl0YWJsZUVsZW06IEhUTUxFbGVtZW50KSB7XG5cdGxldCBjYXJldFBvcyA9IDAsIHNlbCwgcmFuZ2U7XG5cdHNlbCA9IGFjdGl2ZVdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcblx0aWYgKHNlbCAmJiBzZWwucmFuZ2VDb3VudCkge1xuXHRcdHJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XG5cdFx0aWYgKHJhbmdlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLnBhcmVudE5vZGUgPT0gZWRpdGFibGVFbGVtKSB7XG5cdFx0XHRjYXJldFBvcyA9IHJhbmdlLmVuZE9mZnNldDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGNhcmV0UG9zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0Q2FyZXRQb3NpdGlvbihlZGl0YWJsZUVsZW06IEhUTUxFbGVtZW50LCBuZXdQb3M6IG51bWJlcikge1xuXHRsZXQgY2FyZXRQb3MgPSAwLCBzZWwsIHJhbmdlID0gYWN0aXZlRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcblx0c2VsID0gYWN0aXZlV2luZG93LmdldFNlbGVjdGlvbigpO1xuXHRpZiAoc2VsICYmIHNlbC5yYW5nZUNvdW50KSB7XG5cdFx0cmFuZ2Uuc2V0U3RhcnQoZWRpdGFibGVFbGVtLmNoaWxkTm9kZXNbMF0sIG5ld1Bvcyk7XG5cdFx0cmFuZ2UuY29sbGFwc2UodHJ1ZSk7XG5cdFx0c2VsLnJlbW92ZUFsbFJhbmdlcygpO1xuXHRcdHNlbC5hZGRSYW5nZShyYW5nZSk7XG5cdH1cblx0cmV0dXJuIGNhcmV0UG9zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZXRSZWN0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0bGV0IGNhcmV0UG9zID0gMCwgc2VsLCByYW5nZTtcblx0c2VsID0gYWN0aXZlV2luZG93LmdldFNlbGVjdGlvbigpO1xuXHRpZiAoc2VsICYmIHNlbC5yYW5nZUNvdW50KSB7XG5cdFx0cmFuZ2UgPSBzZWwuZ2V0UmFuZ2VBdCgwKTtcblx0XHRjb25zdCByZWN0ID0gcmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0cmV0dXJuIHJlY3Q7XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBUYWJsZSB7XG5cdC8qKlxuXHQgKiBcdTUyMTdcdTg4NjhcdThENzdcdTU5Q0JcdTg4NENcdUZGMENpbmNsdXNpdmVcblx0ICovXG5cdGZyb21MaW5lOiBudW1iZXIsXG5cdC8qKlxuXHQgKiBcdTUyMTdcdTg4NjhcdTdFRDNcdTY3NUZcdTg4NENcdUZGMENleGNsdXNpdmVcblx0ICovXG5cdHRvTGluZTogbnVtYmVyLFxuXHQvKipcblx0ICogXHU2ODNDXHU1RjBGXHU2M0E3XHU1MjM2XHU4ODRDXG5cdCAqL1xuXHRmb3JtYXRMaW5lOiBzdHJpbmdbXSxcblx0LyoqXG5cdCAqIFx1NjI0MFx1NjcwOSBjZWxsXHVGRjBDY2VsbHNbaV1bal0gXHU2NjJGXHU3QjJDIGkgXHU4ODRDXHU3QjJDIGogXHU1MjE3XHU3Njg0IGNlbGxcblx0ICovXG5cdGNlbGxzOiBzdHJpbmdbXVtdLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2VsbFRleHQodGFibGU6IFRhYmxlLCBpOiBudW1iZXIsIGo6IG51bWJlcikge1xuXHRsZXQgcmVzdWx0ID0gbnVsbDtcblx0dHJ5IHtcblx0XHRyZXN1bHQgPSB0YWJsZS5jZWxsc1tpXVtqXTtcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0cmVzdWx0ID0gbnVsbDtcblx0XHRjb25zb2xlLmVycm9yKCdDYW5ub3QgZ2V0IGNlbGwgaT0nLCBpLCAnLCBqPScsIGosICcgZnJvbSB0YWJsZT0nLCB0YWJsZSk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENlbGxJbmZvKFxuXHRjZWxsRWw6IEhUTUxUYWJsZUNlbGxFbGVtZW50LFxuXHRwbHVnaW46IFRhYmxlRW5oYW5jZXIyLFxuXHR0YWJsZUVsPzogSFRNTFRhYmxlRWxlbWVudCxcblx0ZWRpdG9yVmlldz86IEVkaXRvclZpZXdcbikge1xuXHRpZiAoIXRhYmxlRWwpIHtcblx0XHQvLyBcdTc4NkVcdTVCOUFcdThGRDlcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdTYyNDBcdTVDNUVcdTc2ODQgdGFibGVcblx0XHRsZXQgcGFyZW50ID0gY2VsbEVsLnBhcmVudE5vZGU7XG5cdFx0d2hpbGUgKHBhcmVudCkge1xuXHRcdFx0aWYgKHBhcmVudCBpbnN0YW5jZW9mIEhUTUxUYWJsZUVsZW1lbnQpXG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cdFx0fVxuXHRcdGlmIChwYXJlbnQpIHRhYmxlRWwgPSBwYXJlbnQ7XG5cdH1cblx0aWYgKCF0YWJsZUVsKSB7XG5cdFx0Y29uc29sZS5lcnJvcignQ2Fubm90IGdldCB0YWJsZSBlbGVtZW50IG9mIGNlbGwgJywgY2VsbEVsKTtcblx0XHRyZXR1cm47XG5cdH1cblx0Ly8gXHU4M0I3XHU1Rjk3IGVkaXRvclZpZXdcblx0aWYgKCFlZGl0b3JWaWV3KSB7XG5cdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdGNvbnN0IGVkaXRvciA9IG1hcmtkb3duVmlldz8uZWRpdG9yO1xuXHRcdGVkaXRvclZpZXcgPSAoZWRpdG9yIGFzIGFueSk/LmNtIGFzIEVkaXRvclZpZXc7XG5cdH1cblx0Ly8gXHU4QkExXHU3Qjk3XHU4RkQ5XHU0RTJBXHU4ODY4XHU2ODNDXHU1NzI4XHU3QjJDXHU1MUUwXHU4ODRDXG5cdGNvbnN0IHRhYmxlUG9zID0gZWRpdG9yVmlldy5wb3NBdERPTSh0YWJsZUVsKTtcblx0Y29uc3QgdGFibGVMaW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZUF0KHRhYmxlUG9zKS5udW1iZXIgLSAxO1xuXHQvLyBcdThCQTFcdTdCOTdcdThGRDlcdTRFMkFcdTUzNTVcdTUxNDNcdTY4M0NcdTU3MjhcdTdCMkNcdTUxRTBcdTg4NENcdTdCMkNcdTUxRTBcdTUyMTdcblx0Y29uc3QgdHJFbCA9IGNlbGxFbC5jbG9zZXN0KCd0cicpO1xuXHRjb25zdCBpID0gdHJFbCEucm93SW5kZXg7XG5cdGNvbnN0IGogPSBjZWxsRWwuY2VsbEluZGV4O1xuXHRyZXR1cm4geyB0YWJsZUxpbmUsIGksIGogfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENlbGxFbCh0YWJsZVBvczogbnVtYmVyLCBpOiBudW1iZXIsIGo6IG51bWJlciwgcGx1Z2luOiBUYWJsZUVuaGFuY2VyMikge1xuXHRjb25zdCBtYXJrZG93blZpZXcgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdGNvbnN0IGVkaXRvciA9IG1hcmtkb3duVmlldz8uZWRpdG9yO1xuXHRjb25zdCBlZGl0b3JWaWV3ID0gKGVkaXRvciBhcyBhbnkpPy5jbSBhcyBFZGl0b3JWaWV3O1xuXHRjb25zdCB7IG5vZGUsIG9mZnNldCB9ID0gZWRpdG9yVmlldy5kb21BdFBvcyh0YWJsZVBvcyk7XG5cdGNvbnN0IGVsID0gbm9kZS5jaGlsZE5vZGVzW29mZnNldF07XG5cdGlmICghKGVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKVxuXHRcdHJldHVybiBudWxsO1xuXHRjb25zdCB0YWJsZXMgPSBlbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGFibGUnKTtcblx0aWYgKHRhYmxlcy5sZW5ndGggPiAxKSB7XG5cdFx0Y29uc29sZS5lcnJvcignTW9yZSB0aGFuIDEgdGFibGVzIHdlcmUgZm91bmQnKTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXHRjb25zdCB0YWJsZSA9IHRhYmxlc1swXTtcblx0cmV0dXJuIHRhYmxlPy5yb3dzW2ldPy5jZWxsc1tqXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRocm90dGxlKGZ1bmM6IGFueSwgdGltZUZyYW1lOiBudW1iZXIpIHtcblx0bGV0IGxhc3RUaW1lID0gMDtcblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0XHRpZiAobm93IC0gbGFzdFRpbWUgPj0gdGltZUZyYW1lKSB7XG5cdFx0XHRmdW5jKCk7XG5cdFx0XHRsYXN0VGltZSA9IG5vdztcblx0XHR9XG5cdH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3aXRoRWRpdGluZ0NlbGw8VD4oY2FsbGJhY2s6IChjZWxsRWw6IEhUTUxUYWJsZUNlbGxFbGVtZW50KSA9PiBUKSB7XG5cdC8vIFx1NUY1M1x1NTI0RFx1NkNBMVx1NjcwOVx1NTcyOFx1N0YxNlx1OEY5MSBjZWxsXHVGRjBDXHU1MjE5XHU0RTBEXHU1OTA0XHU3NDA2XG5cdGNvbnN0IGNlbGxFbCA9IGFjdGl2ZURvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgZWRpdGluZ0NlbGxDbGFzc05hbWUpO1xuXHRpZiAoIShjZWxsRWwgaW5zdGFuY2VvZiBIVE1MVGFibGVDZWxsRWxlbWVudCkpXG5cdFx0cmV0dXJuIG51bGw7XG5cdHJldHVybiBjYWxsYmFjayhjZWxsRWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2l0aEhvdmVyZWRDZWxsPFQ+KGNhbGxiYWNrOiAoY2VsbEVsOiBIVE1MVGFibGVDZWxsRWxlbWVudCkgPT4gVCkge1xuXHQvLyBcdTVGNTNcdTUyNERcdTZDQTFcdTY3MDlcdTU3MjhcdTdGMTZcdThGOTEgY2VsbFx1RkYwQ1x1NTIxOVx1NEUwRFx1NTkwNFx1NzQwNlxuXHRjb25zdCBjZWxsRWwgPSBhY3RpdmVEb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIGhvdmVyZWRDZWxsQ2xhc3NOYW1lKTtcblx0aWYgKCEoY2VsbEVsIGluc3RhbmNlb2YgSFRNTFRhYmxlQ2VsbEVsZW1lbnQpKVxuXHRcdHJldHVybiBudWxsO1xuXHRyZXR1cm4gY2FsbGJhY2soY2VsbEVsKTtcbn1cbiIsICJpbXBvcnQge0FwcCwgTWFya2Rvd25WaWV3LCBOb3RpY2UsIFRGaWxlfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBUYWJsZUVuaGFuY2VyIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQge1RhYmxlfSBmcm9tIFwiLi9nbG9iYWxcIjtcbmltcG9ydCB7XG5cdGRlbGV0ZUxpbmUsIGRlbGV0ZUxpbmVzLFxuXHRpbnNlcnRMaW5lQmVsb3csXG5cdGluc2VydExpbmVCZWxvd1dpdGhUZXh0LFxuXHRyZXBsYWNlUmFuZ2VXaXRob3V0U2Nyb2xsLFxuXHRzZXRMaW5lV2l0aG91dFNjcm9sbCwgd2l0aG91dFNjcm9sbEFuZEZvY3VzXG59IGZyb20gXCIuL2VkaXRvclV0aWxzXCI7XG5pbXBvcnQgVGFibGVFbmhhbmNlcjIgZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7RWRpdG9yVmlld30gZnJvbSBcIkBjb2RlbWlycm9yL3ZpZXdcIjtcbmltcG9ydCB7IFRyYW5zYWN0aW9uU3BlYyB9IGZyb20gXCJAY29kZW1pcnJvci9zdGF0ZVwiO1xuXG5leHBvcnQgY2xhc3MgVGFibGVFZGl0b3Ige1xuXG5cdHBsdWdpbjogVGFibGVFbmhhbmNlcjI7XG5cblx0Y29uc3RydWN0b3IocGx1Z2luOiBUYWJsZUVuaGFuY2VyKSB7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRnZXRUYWJsZSh0YWJsZUxpbmU6IG51bWJlcikge1xuXHRcdGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdGlmIChtYXJrZG93blZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgJiYgbWFya2Rvd25WaWV3LmVkaXRvcikge1xuXHRcdFx0Y29uc3QgZWRpdG9yID0gbWFya2Rvd25WaWV3LmVkaXRvcjtcblx0XHRcdGNvbnN0IGxpbmVDb3VudCA9IGVkaXRvci5saW5lQ291bnQoKTtcblx0XHRcdGNvbnN0IGNlbGxzID0gW107XG5cdFx0XHRsZXQgbWF0Y2g7XG5cdFx0XHRsZXQgbm90U3RhbmRhcmQgPSBmYWxzZTtcblx0XHRcdC8vIHBhcnNlIFx1ODg2OFx1NTkzNFx1NjNBN1x1NTIzNlx1ODg0Q1xuXHRcdFx0bGV0IGZvcm1hdExpbmUgPSBlZGl0b3IuZ2V0TGluZSh0YWJsZUxpbmUgKyAxKTtcblx0XHRcdGNvbnN0IGZvcm1hdFJvd1JlZ2V4ID0gL15cXHMqKFxcfCk/KD86XFxzKjo/XFxzKj8tK1xccyo6P1xccypcXHw/KXsyLH0vO1xuXHRcdFx0bWF0Y2ggPSBmb3JtYXRSb3dSZWdleC5leGVjKGZvcm1hdExpbmUpO1xuXHRcdFx0aWYgKCFtYXRjaCkgeyAvLyBcdTY4M0NcdTVGMEZcdTYzQTdcdTUyMzZcdTg4NENcdTc2ODRcdTRGNERcdTdGNkVcdTRFMERcdTVCRjlcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDE7IDsgaSsrKSB7XG5cdFx0XHRcdFx0Y29uc3QgZG93biA9IHRhYmxlTGluZSArIDEgKyBpOyAvLyBcdTU0MTFcdTU0MEVcdTYyN0Vcblx0XHRcdFx0XHRjb25zdCB1cCA9IHRhYmxlTGluZSArIDEgLSBpOyAvLyBcdTU0MTFcdTUyNERcdTYyN0Vcblx0XHRcdFx0XHRpZiAodXAgPj0gbGluZUNvdW50ICYmIGRvd24gPCAwKVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0aWYgKGRvd24gPj0gMCkge1xuXHRcdFx0XHRcdFx0bWF0Y2ggPSBmb3JtYXRSb3dSZWdleC5leGVjKGVkaXRvci5nZXRMaW5lKGRvd24pKTtcblx0XHRcdFx0XHRcdGlmIChtYXRjaCkge1xuXHRcdFx0XHRcdFx0XHR0YWJsZUxpbmUgPSBkb3duIC0gMTsgLy8gXHU2MjdFXHU1MjMwXHU0RTg2XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodXAgPCBsaW5lQ291bnQpIHtcblx0XHRcdFx0XHRcdG1hdGNoID0gZm9ybWF0Um93UmVnZXguZXhlYyhlZGl0b3IuZ2V0TGluZSh1cCkpO1xuXHRcdFx0XHRcdFx0aWYgKG1hdGNoKSB7XG5cdFx0XHRcdFx0XHRcdHRhYmxlTGluZSA9IGRvd24gLSAxOyAvLyBcdTYyN0VcdTUyMzBcdTRFODZcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0Zm9ybWF0TGluZSA9IGVkaXRvci5nZXRMaW5lKHRhYmxlTGluZSArIDEpOyAvLyBcdTYyN0VcdTUyMzBcdTRFODZcblx0XHRcdGlmICghbWF0Y2hbMV0pIHsgLy8gXHU3NTI4XHU3Njg0XHU2NjJGXHU0RTI0XHU4RkI5XHU2Q0ExXHU2NzA5IHwgXHU3Njg0XHU4ODY4XHU2ODNDXHU4QkVEXHU2Q0Q1XHVGRjBDXHU2NTM5XHU2MjEwXHU0RTI0XHU4RkI5XHU2NzA5IHwgXHU3Njg0XHU4ODY4XHU2ODNDXHU4QkVEXHU2Q0Q1XHU1NDBFXHU1MTk5XHU1NkRFXHU2NTg3XHU0RUY2XG5cdFx0XHRcdGZvcm1hdExpbmUgPSBgfCAke2Zvcm1hdExpbmV9IHxgO1xuXHRcdFx0XHRlZGl0b3Iuc2V0TGluZSh0YWJsZUxpbmUgKyAxLCBmb3JtYXRMaW5lKTtcblx0XHRcdFx0bm90U3RhbmRhcmQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcGFyc2VkRm9ybWF0TGluZSA9IGZvcm1hdExpbmUuc3BsaXQoLyg/PCFcXFxcKVxcfC8pLnNsaWNlKDEsIC0xKTtcblx0XHRcdC8vIHBhcnNlIFx1ODg2OFx1NTkzNFxuXHRcdFx0bGV0IGhlYWRlckxpbmUgPSBlZGl0b3IuZ2V0TGluZSh0YWJsZUxpbmUpO1xuXHRcdFx0aWYgKG5vdFN0YW5kYXJkKSB7XG5cdFx0XHRcdGhlYWRlckxpbmUgPSBgfCAke2hlYWRlckxpbmV9IHxgO1xuXHRcdFx0XHRlZGl0b3Iuc2V0TGluZSh0YWJsZUxpbmUsIGhlYWRlckxpbmUpO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcGFyc2VkSGVhZGVyTGluZSA9IGhlYWRlckxpbmUuc3BsaXQoLyg/PCFcXFxcKVxcfC8pLnNsaWNlKDEsIC0xKTtcblx0XHRcdGNlbGxzLnB1c2gocGFyc2VkSGVhZGVyTGluZSk7XG5cdFx0XHQvLyBwYXJzZSBcdTg4NjhcdTY4M0NcdTRGNTNcblx0XHRcdGxldCBpID0gdGFibGVMaW5lICsgMTtcblx0XHRcdGNvbnN0IG5vdFN0YW5kYXJkUmVnZXggPSAvXlxccypbXnxdKlxcfC87XG5cdFx0XHR3aGlsZSAoKytpIDwgbGluZUNvdW50KSB7XG5cdFx0XHRcdGxldCBib2R5TGluZSA9IGVkaXRvci5nZXRMaW5lKGkpO1xuXHRcdFx0XHRpZiAobm90U3RhbmRhcmQpIHsgLy8gXHU1OTgyXHU2NzlDXHU3NTI4XHU3Njg0XHU2NjJGXHU0RTI0XHU4RkI5XHU2Q0ExXHU2NzA5IHwgXHU3Njg0XHU4ODY4XHU2ODNDXHU4QkVEXHU2Q0Q1XG5cdFx0XHRcdFx0aWYgKG5vdFN0YW5kYXJkUmVnZXguZXhlYyhib2R5TGluZSkpIHtcblx0XHRcdFx0XHRcdGJvZHlMaW5lID0gYHwgJHtib2R5TGluZX0gfGA7XG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0TGluZShpLCBib2R5TGluZSk7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJzZWRCb2R5TGluZSA9IGJvZHlMaW5lLnNwbGl0KC8oPzwhXFxcXClcXHwvKS5zbGljZSgxLCAtMSk7XG5cdFx0XHRcdFx0XHRjZWxscy5wdXNoKHBhcnNlZEJvZHlMaW5lKTtcblx0XHRcdFx0XHR9IGVsc2UgYnJlYWs7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKGJvZHlMaW5lLnRyaW1TdGFydCgpLnN0YXJ0c1dpdGgoJ3wnKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFyc2VkQm9keUxpbmUgPSBib2R5TGluZS5zcGxpdCgvKD88IVxcXFwpXFx8Lykuc2xpY2UoMSwgLTEpO1xuXHRcdFx0XHRcdFx0Y2VsbHMucHVzaChwYXJzZWRCb2R5TGluZSk7XG5cdFx0XHRcdFx0fSBlbHNlIGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRmcm9tTGluZTogdGFibGVMaW5lLFxuXHRcdFx0XHR0b0xpbmU6IGksXG5cdFx0XHRcdGZvcm1hdExpbmU6IHBhcnNlZEZvcm1hdExpbmUsXG5cdFx0XHRcdGNlbGxzLFxuXHRcdFx0fSBhcyBUYWJsZTtcblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvKipcblx0ICogXHU4M0I3XHU1Rjk3XHU3RUQ5XHU1QjlBIHRhYmxlIFx1N0IyQyBpIFx1ODg0Q1x1NzY4NFx1ODg0Q1x1NTNGN1x1RkYwOFx1NTcyOCB0aGlzLnJvd3MgXHU0RTJEXHU3Njg0XHU3RDIyXHU1RjE1XHVGRjA5XG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyBnZXRMaW5lTnVtYmVyKHRhYmxlOiBUYWJsZSwgbGluZTogbnVtYmVyKSB7XG5cdFx0cmV0dXJuIHRhYmxlIS5mcm9tTGluZSArIChsaW5lID09IDAgPyAwIDogbGluZSArIDEpOyAvLyBcdTU5MDRcdTc0MDZcdTY4M0NcdTVGMEZcdTYzQTdcdTUyMzZcdTg4NENcblx0fVxuXG5cdC8qKlxuXHQgKiBcdTY2RjRcdTY1QjBcdTg4NjhcdTY4M0NcdTRFMkRcdTY3RDBcdTRFMkEgY2VsbCBcdTc2ODRcdTUxODVcdTVCQjlcdUZGMENcdTRGMUFcdTVCRjlcdTZCRDRcdTRFNEJcdTUyNERcdTc2ODRcdTUxODVcdTVCQjlcdUZGMENcdTU5ODJcdTY3OUNcdTRFMERcdTUzRDhcdUZGMENcdTUyMTlcdTRFQzBcdTRFNDhcdTRFNUZcdTRFMERcdTUwNUFcblx0ICogQHBhcmFtIHRhYmxlXG5cdCAqIEBwYXJhbSBpIFx1NTRFQVx1NEUwMFx1ODg0Q1xuXHQgKiBAcGFyYW0gaiBcdTU0RUFcdTRFMDBcdTUyMTdcblx0ICogQHBhcmFtIG5ld0NvbnRlbnQgXHU2NUIwXHU3Njg0XHU1MTg1XHU1QkI5XG5cdCAqL1xuXHRhc3luYyB1cGRhdGVDZWxsKHRhYmxlOiBUYWJsZSwgaTogbnVtYmVyLCBqOiBudW1iZXIsIG5ld0NvbnRlbnQ6IHN0cmluZykge1xuXHRcdGlmICghdGFibGUpIHJldHVybjtcblx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRjb25zdCBlZGl0b3IgPSBtYXJrZG93blZpZXc/LmVkaXRvcjtcblx0XHRjb25zdCBlZGl0b3JWaWV3ID0gKGVkaXRvciBhcyBhbnkpPy5jbSBhcyBFZGl0b3JWaWV3O1xuXHRcdGlmICghZWRpdG9yIHx8ICFlZGl0b3JWaWV3KSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdDYW5ub3QgZ2V0IGVkaXRvcicpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBcdTZDQTFcdTY3MDlcdTY1MzlcdTUzRDhcdUZGMENcdTUyQTBcdTRFMDBcdTRFMkFcdTdBN0FcdTY4M0NcdUZGMENcdTRGRERcdThCQzEgZG9tIFx1NEYxQVx1NjZGNFx1NjVCMFxuXHRcdGlmIChuZXdDb250ZW50ID09IHRhYmxlLmNlbGxzW2ldW2pdKVxuXHRcdFx0bmV3Q29udGVudCArPSAnICc7XG5cdFx0dGFibGUuY2VsbHNbaV1bal0gPSBuZXdDb250ZW50OyAvLyB1cGRhdGUgY2VsbFxuXHRcdGNvbnN0IHJvd0xpbmVOdW1iZXIgPSBUYWJsZUVkaXRvci5nZXRMaW5lTnVtYmVyKHRhYmxlLCBpKTtcblx0XHRjb25zdCBuZXdMaW5lID0gVGFibGVFZGl0b3Iucm93Q2VsbHMycm93U3RyaW5nKHRhYmxlLmNlbGxzW2ldKTtcblx0XHR3aXRob3V0U2Nyb2xsQW5kRm9jdXMoZWRpdG9yVmlldywgKCkgPT4ge1xuXHRcdFx0ZWRpdG9yVmlldy5kaXNwYXRjaChzZXRMaW5lV2l0aG91dFNjcm9sbChlZGl0b3IsIHJvd0xpbmVOdW1iZXIsIG5ld0xpbmUpKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIC8qKlxuXHQvLyAgKiBcdTkwMUFcdThGQzdcdTU3MjhcdTg4NjhcdTU5MzRcdTU0MEVcdTYzRDJcdTUxNjUgXFx1MzAwMCBcdTRGRUVcdTY1MzlcdTUyMTdcdTVCQkRcblx0Ly8gICovXG5cdC8vIGFzeW5jIGNoYW5nZUNvbFdpZHRoKHRhYmxlTGluZTogbnVtYmVyLCBjb2xJbmRleDogbnVtYmVyLCBkZWx0YTogMSB8IC0xKSB7XG5cdC8vIFx0Y29uc3QgdGFibGUgPSB0aGlzLmdldFRhYmxlKHRhYmxlTGluZSk7XG5cdC8vIFx0aWYgKCF0YWJsZSkgcmV0dXJuO1xuXHQvLyBcdGlmIChkZWx0YSA9PSAtMSlcblx0Ly8gXHRcdHRhYmxlLmNlbGxzWzBdW2NvbEluZGV4XSA9IHRhYmxlLmNlbGxzWzBdW2NvbEluZGV4XS5yZXBsYWNlKC8gJC8sICcnKTtcblx0Ly8gXHRlbHNlIC8vIGRlbHRhID09IDFcblx0Ly8gXHRcdHRhYmxlLmNlbGxzWzBdW2NvbEluZGV4XSA9IFt0YWJsZS5jZWxsc1swXVtjb2xJbmRleF0sICcgJ10uam9pbignJyk7XG5cdC8vIFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdC8vIFx0aWYgKG1hcmtkb3duVmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykge1xuXHQvLyBcdFx0Ly8gXHU0RjdGXHU3NTI4IGVkaXRvciB0cmFuc2FjdGlvbiBcdTY2RjRcdTY1QjBcdUZGMENcdTYwMjdcdTgwRkRcdTY2RjRcdTU5N0Rcblx0Ly8gXHRcdGNvbnN0IGVkaXRvciA9IG1hcmtkb3duVmlldy5lZGl0b3I7XG5cdC8vIFx0XHRjb25zdCByb3dMaW5lTnVtYmVyID0gdGhpcy5nZXRMaW5lTnVtYmVyKHRhYmxlLCAwKTtcblx0Ly8gXHRcdGNvbnN0IG5ld0xpbmUgPSBUYWJsZUVkaXRvci5yb3dDZWxsczJyb3dTdHJpbmcodGFibGUuY2VsbHNbMF0pO1xuXHQvLyBcdFx0Ly8gXHU5NjMyXHU2QjYyXHU2Q0ExXHU2NzA5XHU1QkY5XHU2NTg3XHU2NzJDXHU1MDVBXHU0RkVFXHU2NTM5XHVGRjBDXHU1QkZDXHU4MUY0XHU0RTBEXHU4OUU2XHU1M0QxXHU5MUNEXHU2NUIwXHU2RTMyXHU2N0QzXG5cdC8vIFx0XHRpZiAoZWRpdG9yLmdldExpbmUocm93TGluZU51bWJlcikubGVuZ3RoID09IG5ld0xpbmUubGVuZ3RoKVxuXHQvLyBcdFx0XHRzZXRMaW5lV2l0aG91dFNjcm9sbChlZGl0b3IsIHJvd0xpbmVOdW1iZXIsIG5ld0xpbmUgKyAnICcpO1xuXHQvLyBcdFx0ZWxzZSBzZXRMaW5lV2l0aG91dFNjcm9sbChlZGl0b3IsIHJvd0xpbmVOdW1iZXIsIG5ld0xpbmUpO1xuXHQvLyBcdFx0YXdhaXQgbWFya2Rvd25WaWV3LnNhdmUoKTsgLy8gXHU1MTk5XHU1MjMwXHU2NTg3XHU0RUY2XHU5MUNDXHVGRjBDXHU5NjMyXHU2QjYyIHBhcnNlIFx1NzY4NFx1NjVGNlx1NTAxOVx1OEJGQlx1NTIzMFx1OTUxOVx1OEJFRlx1NzY4NFx1NTE4NVx1NUJCOVxuXHQvLyBcdH1cblx0Ly8gfVxuXHQvL1xuXHQvLyAvKipcblx0Ly8gICogXHU1MjIwXHU5NjY0XHU4ODY4XHU2ODNDXHU3Njg0XHU2MzA3XHU1QjlBXHU4ODRDXG5cdC8vICAqIEBwYXJhbSB0YWJsZUxpbmVcblx0Ly8gICogQHBhcmFtIHJvd0luZGV4IFx1ODk4MVx1NTIyMFx1OTY2NFx1NTRFQVx1NEUwMFx1ODg0Q1xuXHQvLyAgKi9cblx0Ly8gYXN5bmMgZGVsZXRlUm93KHRhYmxlTGluZTogbnVtYmVyLCByb3dJbmRleDogbnVtYmVyKSB7XG5cdC8vIFx0Y29uc3QgdGFibGUgPSB0aGlzLmdldFRhYmxlKHRhYmxlTGluZSk7XG5cdC8vIFx0aWYgKCF0YWJsZSkgcmV0dXJuO1xuXHQvLyBcdGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHQvLyBcdC8vIFx1NTk4Mlx1Njc5Q1x1ODk4MVx1NTIyMFx1OTY2NFx1NzY4NFx1ODg0Q1x1NjYyRlx1ODg2OFx1NTkzNFxuXHQvLyBcdGlmIChyb3dJbmRleCA9PSAwKSB7XG5cdC8vIFx0XHQvLyBUT0RPIFx1NUU5NFx1OEJFNVx1NTIyMFx1OTY2NFx1NjU3NFx1NEUyQVx1ODg2OFxuXHQvLyBcdFx0cmV0dXJuO1xuXHQvLyBcdH1cblx0Ly8gXHRjb25zdCByb3dMaW5lTnVtYmVyID0gdGhpcy5nZXRMaW5lTnVtYmVyKHRhYmxlLCByb3dJbmRleCk7XG5cdC8vIFx0aWYgKG1hcmtkb3duVmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykge1xuXHQvLyBcdFx0Ly8gXHU0RjdGXHU3NTI4IGVkaXRvciB0cmFuc2FjdGlvbiBcdTY2RjRcdTY1QjBcdUZGMENcdTYwMjdcdTgwRkRcdTY2RjRcdTU5N0Rcblx0Ly8gXHRcdGNvbnN0IGVkaXRvciA9IG1hcmtkb3duVmlldy5lZGl0b3I7XG5cdC8vIFx0XHRkZWxldGVMaW5lKGVkaXRvciwgcm93TGluZU51bWJlcik7XG5cdC8vIFx0XHRhd2FpdCBtYXJrZG93blZpZXcuc2F2ZSgpOyAvLyBcdTUxOTlcdTUyMzBcdTY1ODdcdTRFRjZcdTkxQ0NcdUZGMENcdTk2MzJcdTZCNjIgcGFyc2UgXHU3Njg0XHU2NUY2XHU1MDE5XHU4QkZCXHU1MjMwXHU5NTE5XHU4QkVGXHU3Njg0XHU1MTg1XHU1QkI5XG5cdC8vIFx0fVxuXHQvLyB9XG5cdC8vXG5cdC8vIC8qKlxuXHQvLyAgKiBcdTUyMjBcdTk2NjRcdTg4NjhcdTY4M0NcdTYzMDdcdTVCOUFcdTUyMTdcblx0Ly8gICogQHBhcmFtIHRhYmxlTGluZVxuXHQvLyAgKiBAcGFyYW0gY29sSW5kZXggXHU4OTgxXHU1MjIwXHU5NjY0XHU1NEVBXHU0RTAwXHU1MjE3XG5cdC8vICAqL1xuXHQvLyBhc3luYyBkZWxldGVDb2wodGFibGVMaW5lOiBudW1iZXIsIGNvbEluZGV4OiBudW1iZXIpIHtcblx0Ly8gXHRjb25zdCB0YWJsZSA9IHRoaXMuZ2V0VGFibGUodGFibGVMaW5lKTtcblx0Ly8gXHRpZiAoIXRhYmxlKSByZXR1cm47XG5cdC8vIFx0Ly8gXHU4ODY4XHU1OTM0XHUzMDAxXHU2ODNDXHU1RjBGXHU2M0E3XHU1MjM2XHU4ODRDXHUzMDAxXHU4ODY4XHU2ODNDXHU0RjUzXHU5MEZEXHU1MjIwXHU1M0JCXHU0RTAwXHU1MjE3XG5cdC8vIFx0dGFibGUuZm9ybWF0Um93LnNwbGljZShjb2xJbmRleCwgMSk7XG5cdC8vIFx0Zm9yIChjb25zdCByb3cgb2YgdGFibGUuY2VsbHMpXG5cdC8vIFx0XHRyb3cuc3BsaWNlKGNvbEluZGV4LCAxKTtcblx0Ly8gXHQvLyBUT0RPIFx1NjU3NFx1NTQwOFx1NjIxMFx1NEUwMFx1NEUyQSB0cmFuc2FjdGlvblx1RkYwQ1x1NEUwRFx1NzEzNlx1NjRBNFx1NTZERVx1NzY4NFx1NjVGNlx1NTAxOVx1ODk4MVx1NTk3RFx1NTFFMFx1NkI2NVxuXHQvLyBcdGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHQvLyBcdGlmIChtYXJrZG93blZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpIHtcblx0Ly8gXHRcdC8vIFx1NEY3Rlx1NzUyOCBlZGl0b3IgdHJhbnNhY3Rpb24gXHU2NkY0XHU2NUIwXHVGRjBDXHU2MDI3XHU4MEZEXHU2NkY0XHU1OTdEXG5cdC8vIFx0XHRjb25zdCBlZGl0b3IgPSBtYXJrZG93blZpZXcuZWRpdG9yO1xuXHQvLyBcdFx0Ly8gXHU1MzU1XHU1MjE3XHU4ODY4XHVGRjBDXHU3NkY0XHU2M0E1XHU1MjIwXHU2Mzg5XHU2NTc0XHU0RTJBXHU4ODY4XG5cdC8vIFx0XHRpZiAodGFibGUuZm9ybWF0Um93Lmxlbmd0aCA9PSAxKSB7XG5cdC8vIFx0XHRcdGRlbGV0ZUxpbmVzKGVkaXRvciwgdGFibGUuZnJvbUxpbmUsIHRhYmxlLnRvTGluZSk7XG5cdC8vIFx0XHR9IGVsc2Uge1xuXHQvLyBcdFx0XHRzZXRMaW5lV2l0aG91dFNjcm9sbChlZGl0b3IsIHRhYmxlLmZyb21MaW5lICsgMSwgVGFibGVFZGl0b3Iucm93Q2VsbHMycm93U3RyaW5nKHRhYmxlLmZvcm1hdFJvdykpO1xuXHQvLyBcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRhYmxlLmNlbGxzLmxlbmd0aDsgaSsrKSB7XG5cdC8vIFx0XHRcdFx0Y29uc3QgbGluZU51bWJlciA9IHRoaXMuZ2V0TGluZU51bWJlcih0YWJsZSwgaSk7XG5cdC8vIFx0XHRcdFx0c2V0TGluZVdpdGhvdXRTY3JvbGwoZWRpdG9yLCBsaW5lTnVtYmVyLCBUYWJsZUVkaXRvci5yb3dDZWxsczJyb3dTdHJpbmcodGFibGUuY2VsbHNbaV0pKTtcblx0Ly8gXHRcdFx0fVxuXHQvLyBcdFx0fVxuXHQvLyBcdFx0YXdhaXQgbWFya2Rvd25WaWV3LnNhdmUoKTsgLy8gXHU1MTk5XHU1MjMwXHU2NTg3XHU0RUY2XHU5MUNDXHVGRjBDXHU5NjMyXHU2QjYyIHBhcnNlIFx1NzY4NFx1NjVGNlx1NTAxOVx1OEJGQlx1NTIzMFx1OTUxOVx1OEJFRlx1NzY4NFx1NTE4NVx1NUJCOVxuXHQvLyBcdH1cblx0Ly8gfVxuXHQvL1xuXHQvKipcblx0ICogXHU1NzI4XHU4ODY4XHU2ODNDXHU2N0QwXHU0RTAwXHU1MjE3XHU1M0YzXHU4RkI5XHU2M0QyXHU1MTY1XHU2NUIwXHU1MjE3XG5cdCAqIEBwYXJhbSB0YWJsZVxuXHQgKiBAcGFyYW0gY29sSW5kZXggXHU1NzI4XHU1NEVBXHU0RTAwXHU1MjE3XHU1NDBFXHU2M0QyXHU1MTY1XG5cdCAqIEBwYXJhbSBjb2xcblx0ICovXG5cdGFzeW5jIGluc2VydENvbFJpZ2h0KHRhYmxlOiBUYWJsZSwgY29sSW5kZXg6IG51bWJlciwgY29sPzogc3RyaW5nW10pIHtcblx0XHRpZiAoIXRhYmxlKSByZXR1cm47XG5cdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0Y29uc3QgZWRpdG9yID0gbWFya2Rvd25WaWV3Py5lZGl0b3I7XG5cdFx0Y29uc3QgZWRpdG9yVmlldyA9IChlZGl0b3IgYXMgYW55KT8uY20gYXMgRWRpdG9yVmlldztcblx0XHRpZiAoIWVkaXRvciB8fCAhZWRpdG9yVmlldykge1xuXHRcdFx0Y29uc29sZS5lcnJvcignQ2Fubm90IGdldCBlZGl0b3InKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gXHU2REZCXHU1MkEwXHU2ODNDXHU1RjBGXHVGRjBDXHU5RUQ4XHU4QkE0XHU0RTNBXHU1QzQ1XHU1REU2XHU1QkY5XHU5RjUwXG5cdFx0dGFibGUuZm9ybWF0TGluZS5zcGxpY2UoY29sSW5kZXggKyAxLCAwLCAnLS0tJyk7XG5cdFx0dGFibGUuY2VsbHMuZm9yRWFjaCgocm93LCBpZHgpID0+IHtcblx0XHRcdGNvbnN0IG5ld0NlbGwgPSBjb2wgPyBjb2xbaWR4XSA6ICcgICAnO1xuXHRcdFx0cm93LnNwbGljZShjb2xJbmRleCArIDEsIDAsIG5ld0NlbGwpO1xuXHRcdH0pO1xuXHRcdGNvbnN0IHRyYW5zYWN0aW9uU3BlY3M6IFRyYW5zYWN0aW9uU3BlY1tdID0gW107XG5cdFx0Ly8gXHU0RkVFXHU2NTM5XHU2ODNDXHU1RjBGXHU2M0E3XHU1MjM2XHU4ODRDXG5cdFx0dHJhbnNhY3Rpb25TcGVjcy5wdXNoKFxuXHRcdFx0c2V0TGluZVdpdGhvdXRTY3JvbGwoZWRpdG9yLCB0YWJsZS5mcm9tTGluZSArIDEsIFRhYmxlRWRpdG9yLnJvd0NlbGxzMnJvd1N0cmluZyh0YWJsZS5mb3JtYXRMaW5lKSkpO1xuXHRcdC8vIFx1NEZFRVx1NjUzOVx1ODg2OFx1NjgzQ1x1NEY1M1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGFibGUuY2VsbHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGxpbmVOdW1iZXIgPSBUYWJsZUVkaXRvci5nZXRMaW5lTnVtYmVyKHRhYmxlLCBpKTtcblx0XHRcdHRyYW5zYWN0aW9uU3BlY3MucHVzaChcblx0XHRcdFx0c2V0TGluZVdpdGhvdXRTY3JvbGwoZWRpdG9yLCBsaW5lTnVtYmVyLCBUYWJsZUVkaXRvci5yb3dDZWxsczJyb3dTdHJpbmcodGFibGUuY2VsbHNbaV0pKSk7XG5cdFx0fVxuXHRcdHdpdGhvdXRTY3JvbGxBbmRGb2N1cyhlZGl0b3JWaWV3LCAoKSA9PiB7XG5cdFx0XHRlZGl0b3JWaWV3LmRpc3BhdGNoKC4uLnRyYW5zYWN0aW9uU3BlY3MpO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFx1NTcyOFx1NjMwN1x1NUI5QVx1ODg2OFx1NjgzQ1x1NzY4NFx1NjMwN1x1NUI5QVx1ODg0Q1x1NEUwQlx1NjVCOVx1NjNEMlx1NTE2NVx1NjVCMFx1ODg0Q1xuXHQgKiBAcGFyYW0gdGFibGVcblx0ICogQHBhcmFtIHJvd0luZGV4IFx1NTcyOFx1NTRFQVx1NEUwMFx1ODg0Q1x1NTQwRVx1NjNEMlx1NTE2NVxuXHQgKiBAcGFyYW0gcm93XG5cdCAqL1xuXHRhc3luYyBpbnNlcnRSb3dCZWxvdyh0YWJsZTogVGFibGUsIHJvd0luZGV4OiBudW1iZXIsIHJvdz86IHN0cmluZ1tdKSB7XG5cdFx0aWYgKCF0YWJsZSkgcmV0dXJuO1xuXHRcdGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdGNvbnN0IGVkaXRvciA9IG1hcmtkb3duVmlldz8uZWRpdG9yO1xuXHRcdGNvbnN0IGVkaXRvclZpZXcgPSAoZWRpdG9yIGFzIGFueSk/LmNtIGFzIEVkaXRvclZpZXc7XG5cdFx0aWYgKCFlZGl0b3IgfHwgIWVkaXRvclZpZXcpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBnZXQgZWRpdG9yJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICghcm93KSB7XG5cdFx0XHRyb3cgPSBbXTtcblx0XHRcdGxldCBpID0gdGFibGUuZm9ybWF0TGluZS5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoaS0tKSB7XG5cdFx0XHRcdHJvdy5wdXNoKCcgICcpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAocm93SW5kZXggPT0gMCkge1xuXHRcdFx0Y29uc3Qgcm93TGluZU51bWJlciA9IHRhYmxlLmZyb21MaW5lICsgMTtcblx0XHRcdHdpdGhvdXRTY3JvbGxBbmRGb2N1cyhlZGl0b3JWaWV3LCAoKSA9PiB7XG5cdFx0XHRcdGVkaXRvclZpZXcuZGlzcGF0Y2goaW5zZXJ0TGluZUJlbG93KGVkaXRvciwgcm93TGluZU51bWJlcikpO1xuXHRcdFx0XHRlZGl0b3JWaWV3LmRpc3BhdGNoKHNldExpbmVXaXRob3V0U2Nyb2xsKGVkaXRvciwgcm93TGluZU51bWJlciArIDEsIFRhYmxlRWRpdG9yLnJvd0NlbGxzMnJvd1N0cmluZyhyb3cgYXMgc3RyaW5nW10pKSk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3Qgcm93TGluZU51bWJlciA9IFRhYmxlRWRpdG9yLmdldExpbmVOdW1iZXIodGFibGUsIHJvd0luZGV4KTtcblx0XHRcdHdpdGhvdXRTY3JvbGxBbmRGb2N1cyhlZGl0b3JWaWV3LCAoKSA9PiB7XG5cdFx0XHRcdGVkaXRvclZpZXcuZGlzcGF0Y2goaW5zZXJ0TGluZUJlbG93KGVkaXRvciwgcm93TGluZU51bWJlcikpO1xuXHRcdFx0XHRlZGl0b3JWaWV3LmRpc3BhdGNoKHNldExpbmVXaXRob3V0U2Nyb2xsKGVkaXRvciwgcm93TGluZU51bWJlciArIDEsIFRhYmxlRWRpdG9yLnJvd0NlbGxzMnJvd1N0cmluZyhyb3cgYXMgc3RyaW5nW10pKSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogXHU4QkJFXHU3RjZFXHU0RTAwXHU1MjE3XHU0RTNBXHU1QzQ1XHU0RTJEIC8gXHU1QzQ1XHU1REU2IC8gXHU1QzQ1XHU1M0YzXHU1QkY5XHU5RjUwXG5cdCAqL1xuXHRhc3luYyBzZXRDb2xBbGlnbmVkKHRhYmxlOiBUYWJsZSwgY29sSW5kZXg6IG51bWJlciwgYWxpZ25lZDogJ2xlZnQnIHwgJ2NlbnRlcicgfCAncmlnaHQnKSB7XG5cdFx0aWYgKCF0YWJsZSkgcmV0dXJuO1xuXHRcdGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdGNvbnN0IGVkaXRvciA9IG1hcmtkb3duVmlldz8uZWRpdG9yO1xuXHRcdGNvbnN0IGVkaXRvclZpZXcgPSAoZWRpdG9yIGFzIGFueSk/LmNtIGFzIEVkaXRvclZpZXc7XG5cdFx0aWYgKCFlZGl0b3IgfHwgIWVkaXRvclZpZXcpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBnZXQgZWRpdG9yJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRhYmxlLmZvcm1hdExpbmVbY29sSW5kZXhdID0gYWxpZ25lZCA9PSAnbGVmdCdcblx0XHRcdD8gJzotLS0tJ1xuXHRcdFx0OiBhbGlnbmVkID09ICdyaWdodCdcblx0XHRcdFx0PyAnLS0tLTonXG5cdFx0XHRcdDogJzotLS06Jztcblx0XHR3aXRob3V0U2Nyb2xsQW5kRm9jdXMoZWRpdG9yVmlldywgKCkgPT4ge1xuXHRcdFx0ZWRpdG9yVmlldy5kaXNwYXRjaChzZXRMaW5lV2l0aG91dFNjcm9sbChlZGl0b3IsIHRhYmxlLmZyb21MaW5lICsgMSwgVGFibGVFZGl0b3Iucm93Q2VsbHMycm93U3RyaW5nKHRhYmxlLmZvcm1hdExpbmUpKSk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogXHU0RUE0XHU2MzYyXHU0RTI0XHU1MjE3XG5cdCAqIEBwYXJhbSB0YWJsZVxuXHQgKiBAcGFyYW0gY29sSW5kZXgxIFx1N0IyQ1x1NEUwMFx1NTIxN1x1NEUwQlx1NjgwN1xuXHQgKiBAcGFyYW0gY29sSW5kZXgyIFx1N0IyQ1x1NEU4Q1x1NTIxN1x1NEUwQlx1NjgwN1xuXHQgKi9cblx0YXN5bmMgc3dhcENvbHModGFibGU6IFRhYmxlLCBjb2xJbmRleDE6IG51bWJlciwgY29sSW5kZXgyOiBudW1iZXIpIHtcblx0XHRpZiAoIXRhYmxlKSByZXR1cm47XG5cdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0Y29uc3QgZWRpdG9yID0gbWFya2Rvd25WaWV3Py5lZGl0b3I7XG5cdFx0Y29uc3QgZWRpdG9yVmlldyA9IChlZGl0b3IgYXMgYW55KT8uY20gYXMgRWRpdG9yVmlldztcblx0XHRpZiAoIWVkaXRvciB8fCAhZWRpdG9yVmlldykge1xuXHRcdFx0Y29uc29sZS5lcnJvcignQ2Fubm90IGdldCBlZGl0b3InKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgY29sTnVtID0gdGFibGUuY2VsbHNbMF0ubGVuZ3RoO1xuXHRcdGlmIChjb2xJbmRleDEgPCAwIHx8IGNvbEluZGV4MiA8IDAgfHwgY29sSW5kZXgxID49IGNvbE51bSB8fCBjb2xJbmRleDIgPj0gY29sTnVtKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdNb3ZlIG91dCBvZiByYW5nZScpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCB0cmFuc2FjdGlvblNwZWNzOiBUcmFuc2FjdGlvblNwZWNbXSA9IFtdO1xuXHRcdC8vIFx1NTE0OFx1NTkwNFx1NzQwNlx1NjgzQ1x1NUYwRlx1NjNBN1x1NTIzNlx1ODg0Q1xuXHRcdFsgdGFibGUuZm9ybWF0TGluZVtjb2xJbmRleDFdLCB0YWJsZS5mb3JtYXRMaW5lW2NvbEluZGV4Ml0gXVxuXHRcdFx0PSBbIHRhYmxlLmZvcm1hdExpbmVbY29sSW5kZXgyXSwgdGFibGUuZm9ybWF0TGluZVtjb2xJbmRleDFdXTtcblx0XHR0cmFuc2FjdGlvblNwZWNzLnB1c2goXG5cdFx0XHRzZXRMaW5lV2l0aG91dFNjcm9sbChlZGl0b3IsIHRhYmxlLmZyb21MaW5lICsgMSwgVGFibGVFZGl0b3Iucm93Q2VsbHMycm93U3RyaW5nKHRhYmxlLmZvcm1hdExpbmUpKSk7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YWJsZS5jZWxscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgbGluZU51bWJlciA9IFRhYmxlRWRpdG9yLmdldExpbmVOdW1iZXIodGFibGUsIGkpO1xuXHRcdFx0WyB0YWJsZS5jZWxsc1tpXVtjb2xJbmRleDFdLCB0YWJsZS5jZWxsc1tpXVtjb2xJbmRleDJdIF1cblx0XHRcdFx0PSBbIHRhYmxlLmNlbGxzW2ldW2NvbEluZGV4Ml0sIHRhYmxlLmNlbGxzW2ldW2NvbEluZGV4MV1dO1xuXHRcdFx0dHJhbnNhY3Rpb25TcGVjcy5wdXNoKFxuXHRcdFx0XHRzZXRMaW5lV2l0aG91dFNjcm9sbChlZGl0b3IsIGxpbmVOdW1iZXIsIFRhYmxlRWRpdG9yLnJvd0NlbGxzMnJvd1N0cmluZyh0YWJsZS5jZWxsc1tpXSkpKTtcblx0XHR9XG5cdFx0d2l0aG91dFNjcm9sbEFuZEZvY3VzKGVkaXRvclZpZXcsICgpID0+IHtcblx0XHRcdGVkaXRvclZpZXcuZGlzcGF0Y2goLi4udHJhbnNhY3Rpb25TcGVjcyk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogXHU0RUE0XHU2MzYyXHU0RTI0XHU4ODRDXG5cdCAqIEBwYXJhbSB0YWJsZVxuXHQgKiBAcGFyYW0gcm93SW5kZXgxIFx1N0IyQ1x1NEUwMFx1ODg0Q1x1NEUwQlx1NjgwN1xuXHQgKiBAcGFyYW0gcm93SW5kZXgyIFx1N0IyQ1x1NEU4Q1x1ODg0Q1x1NEUwQlx1NjgwN1xuXHQgKi9cblx0YXN5bmMgc3dhcFJvd3ModGFibGU6IFRhYmxlLCByb3dJbmRleDE6IG51bWJlciwgcm93SW5kZXgyOiBudW1iZXIpIHtcblx0XHRpZiAoIXRhYmxlKSByZXR1cm47XG5cdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0Y29uc3QgZWRpdG9yID0gbWFya2Rvd25WaWV3Py5lZGl0b3I7XG5cdFx0Y29uc3QgZWRpdG9yVmlldyA9IChlZGl0b3IgYXMgYW55KT8uY20gYXMgRWRpdG9yVmlldztcblx0XHRpZiAoIWVkaXRvciB8fCAhZWRpdG9yVmlldykge1xuXHRcdFx0Y29uc29sZS5lcnJvcignQ2Fubm90IGdldCBlZGl0b3InKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3Qgcm93TnVtID0gdGFibGUuY2VsbHMubGVuZ3RoO1xuXHRcdGlmIChyb3dJbmRleDEgPCAxIHx8IHJvd0luZGV4MiA8IDEgfHwgcm93SW5kZXgxID49IHJvd051bSB8fCByb3dJbmRleDIgPj0gcm93TnVtKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdNb3ZlIG91dCBvZiByYW5nZScpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCB0cmFuc2FjdGlvblNwZWNzOiBUcmFuc2FjdGlvblNwZWNbXSA9IFtdO1xuXHRcdFsgdGFibGUuY2VsbHNbcm93SW5kZXgxXSwgdGFibGUuY2VsbHNbcm93SW5kZXgyXSBdXG5cdFx0XHQ9IFsgdGFibGUuY2VsbHNbcm93SW5kZXgyXSwgdGFibGUuY2VsbHNbcm93SW5kZXgxXSBdO1xuXHRcdGNvbnN0IGxpbmVOdW1iZXIxID0gVGFibGVFZGl0b3IuZ2V0TGluZU51bWJlcih0YWJsZSwgcm93SW5kZXgxKTtcblx0XHRjb25zdCByb3cxU3RyaW5nID0gVGFibGVFZGl0b3Iucm93Q2VsbHMycm93U3RyaW5nKHRhYmxlLmNlbGxzW3Jvd0luZGV4MV0pO1xuXHRcdHRyYW5zYWN0aW9uU3BlY3MucHVzaChcblx0XHRcdHNldExpbmVXaXRob3V0U2Nyb2xsKGVkaXRvciwgbGluZU51bWJlcjEsIHJvdzFTdHJpbmcpKTtcblx0XHRjb25zdCBsaW5lTnVtYmVyMiA9IFRhYmxlRWRpdG9yLmdldExpbmVOdW1iZXIodGFibGUsIHJvd0luZGV4Mik7XG5cdFx0Y29uc3Qgcm93MlN0cmluZyA9IFRhYmxlRWRpdG9yLnJvd0NlbGxzMnJvd1N0cmluZyh0YWJsZS5jZWxsc1tyb3dJbmRleDJdKTtcblx0XHR0cmFuc2FjdGlvblNwZWNzLnB1c2goXG5cdFx0XHRzZXRMaW5lV2l0aG91dFNjcm9sbChlZGl0b3IsIGxpbmVOdW1iZXIyLCByb3cyU3RyaW5nKSk7XG5cdFx0d2l0aG91dFNjcm9sbEFuZEZvY3VzKGVkaXRvclZpZXcsICgpID0+IHtcblx0XHRcdGVkaXRvclZpZXcuZGlzcGF0Y2goLi4udHJhbnNhY3Rpb25TcGVjcyk7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyAvKipcblx0Ly8gICogXHU1MjIwXHU5NjY0XHU2NTc0XHU0RTJBXHU4ODY4XG5cdC8vICAqIEBwYXJhbSB0YWJsZUxpbmUgXHU1Rjg1XHU1MjIwXHU5NjY0XHU4ODY4XHU3Njg0IGlkXG5cdC8vICAqL1xuXHQvLyBhc3luYyBkZWxldGVFbnRpcmVUYWJsZSh0YWJsZUxpbmU6IG51bWJlcikge1xuXHQvLyBcdGNvbnN0IHRhYmxlID0gdGhpcy5nZXRUYWJsZSh0YWJsZUxpbmUpO1xuXHQvLyBcdGlmICghdGFibGUpIHJldHVybjtcblx0Ly8gXHRjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0Ly8gXHRpZiAobWFya2Rvd25WaWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XG5cdC8vIFx0XHQvLyBcdTRGN0ZcdTc1MjggZWRpdG9yIHRyYW5zYWN0aW9uIFx1NjZGNFx1NjVCMFx1RkYwQ1x1NjAyN1x1ODBGRFx1NjZGNFx1NTk3RFxuXHQvLyBcdFx0Y29uc3QgZWRpdG9yID0gbWFya2Rvd25WaWV3LmVkaXRvcjtcblx0Ly8gXHRcdHJlcGxhY2VSYW5nZVdpdGhvdXRTY3JvbGwoZWRpdG9yLCAnJyxcblx0Ly8gXHRcdFx0e2xpbmU6IHRhYmxlLmZyb21MaW5lLCBjaDogMH0sXG5cdC8vIFx0XHRcdHtsaW5lOiB0YWJsZS50b0xpbmUsIGNoOiAwfSk7XG5cdC8vIFx0XHRhd2FpdCBtYXJrZG93blZpZXcuc2F2ZSgpOyAvLyBcdTUxOTlcdTUyMzBcdTY1ODdcdTRFRjZcdTkxQ0NcdUZGMENcdTk2MzJcdTZCNjIgcGFyc2UgXHU3Njg0XHU2NUY2XHU1MDE5XHU4QkZCXHU1MjMwXHU5NTE5XHU4QkVGXHU3Njg0XHU1MTg1XHU1QkI5XG5cdC8vIFx0fVxuXHQvLyB9XG5cblx0LyoqXG5cdCAqIFx1NTIyMFx1OTY2NFx1ODg2OFx1NjgzQ1x1NzY4NFx1NjMwN1x1NUI5QVx1ODg0Q1xuXHQgKiBAcGFyYW0gdGFibGVcblx0ICogQHBhcmFtIHJvd0luZGV4IFx1ODk4MVx1NTIyMFx1OTY2NFx1NTRFQVx1NEUwMFx1ODg0Q1xuXHQgKi9cblx0YXN5bmMgZGVsZXRlUm93KHRhYmxlOiBUYWJsZSwgcm93SW5kZXg6IG51bWJlcikge1xuXHRcdGlmICghdGFibGUpIHJldHVybjtcblx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRjb25zdCBlZGl0b3IgPSBtYXJrZG93blZpZXc/LmVkaXRvcjtcblx0XHRjb25zdCBlZGl0b3JWaWV3ID0gKGVkaXRvciBhcyBhbnkpPy5jbSBhcyBFZGl0b3JWaWV3O1xuXHRcdGlmICghZWRpdG9yIHx8ICFlZGl0b3JWaWV3KSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdDYW5ub3QgZ2V0IGVkaXRvcicpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBcdTU5ODJcdTY3OUNcdTg5ODFcdTUyMjBcdTk2NjRcdTc2ODRcdTg4NENcdTY2MkZcdTg4NjhcdTU5MzRcblx0XHRpZiAocm93SW5kZXggPT0gMCkge1xuXHRcdFx0Ly8gVE9ETyBcdTVFOTRcdThCRTVcdTUyMjBcdTk2NjRcdTY1NzRcdTRFMkFcdTg4Njhcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3Qgcm93TGluZU51bWJlciA9IFRhYmxlRWRpdG9yLmdldExpbmVOdW1iZXIodGFibGUsIHJvd0luZGV4KTtcblx0XHR3aXRob3V0U2Nyb2xsQW5kRm9jdXMoZWRpdG9yVmlldywgKCkgPT4ge1xuXHRcdFx0ZWRpdG9yVmlldy5kaXNwYXRjaChkZWxldGVMaW5lKGVkaXRvciwgcm93TGluZU51bWJlcikpO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFx1NTIyMFx1OTY2NFx1ODg2OFx1NjgzQ1x1NjMwN1x1NUI5QVx1NTIxN1xuXHQgKiBAcGFyYW0gdGFibGVcblx0ICogQHBhcmFtIGNvbEluZGV4IFx1ODk4MVx1NTIyMFx1OTY2NFx1NTRFQVx1NEUwMFx1NTIxN1xuXHQgKi9cblx0YXN5bmMgZGVsZXRlQ29sKHRhYmxlOiBUYWJsZSwgY29sSW5kZXg6IG51bWJlcikge1xuXHRcdGlmICghdGFibGUpIHJldHVybjtcblx0XHQvLyBcdTg4NjhcdTU5MzRcdTMwMDFcdTY4M0NcdTVGMEZcdTYzQTdcdTUyMzZcdTg4NENcdTMwMDFcdTg4NjhcdTY4M0NcdTRGNTNcdTkwRkRcdTUyMjBcdTUzQkJcdTRFMDBcdTUyMTdcblx0XHR0YWJsZS5mb3JtYXRMaW5lLnNwbGljZShjb2xJbmRleCwgMSk7XG5cdFx0Zm9yIChjb25zdCByb3cgb2YgdGFibGUuY2VsbHMpXG5cdFx0XHRyb3cuc3BsaWNlKGNvbEluZGV4LCAxKTtcblx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRjb25zdCBlZGl0b3IgPSBtYXJrZG93blZpZXc/LmVkaXRvcjtcblx0XHRjb25zdCBlZGl0b3JWaWV3ID0gKGVkaXRvciBhcyBhbnkpPy5jbSBhcyBFZGl0b3JWaWV3O1xuXHRcdGlmICghZWRpdG9yIHx8ICFlZGl0b3JWaWV3KSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdDYW5ub3QgZ2V0IGVkaXRvcicpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBcdTUzNTVcdTUyMTdcdTg4NjhcdUZGMENcdTc2RjRcdTYzQTVcdTUyMjBcdTYzODlcdTY1NzRcdTRFMkFcdTg4Njhcblx0XHRpZiAodGFibGUuZm9ybWF0TGluZS5sZW5ndGggPT0gMSkge1xuXHRcdFx0ZWRpdG9yVmlldy5kaXNwYXRjaChkZWxldGVMaW5lcyhlZGl0b3IsIHRhYmxlLmZyb21MaW5lLCB0YWJsZS50b0xpbmUpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3QgdHJhbnNhY3Rpb25TcGVjczogVHJhbnNhY3Rpb25TcGVjW10gPSBbXTtcblx0XHRcdHRyYW5zYWN0aW9uU3BlY3MucHVzaChcblx0XHRcdFx0c2V0TGluZVdpdGhvdXRTY3JvbGwoZWRpdG9yLCB0YWJsZS5mcm9tTGluZSArIDEsIFRhYmxlRWRpdG9yLnJvd0NlbGxzMnJvd1N0cmluZyh0YWJsZS5mb3JtYXRMaW5lKSkpO1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YWJsZS5jZWxscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRjb25zdCBsaW5lTnVtYmVyID0gVGFibGVFZGl0b3IuZ2V0TGluZU51bWJlcih0YWJsZSwgaSk7XG5cdFx0XHRcdHRyYW5zYWN0aW9uU3BlY3MucHVzaChcblx0XHRcdFx0XHRzZXRMaW5lV2l0aG91dFNjcm9sbChlZGl0b3IsIGxpbmVOdW1iZXIsIFRhYmxlRWRpdG9yLnJvd0NlbGxzMnJvd1N0cmluZyh0YWJsZS5jZWxsc1tpXSkpKTtcblx0XHRcdH1cblx0XHRcdHdpdGhvdXRTY3JvbGxBbmRGb2N1cyhlZGl0b3JWaWV3LCAoKSA9PiB7XG5cdFx0XHRcdGVkaXRvclZpZXcuZGlzcGF0Y2goLi4udHJhbnNhY3Rpb25TcGVjcyk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogXHU2MzA5XHU2N0QwXHU0RTAwXHU1MjE3XHU2MzkyXHU1RThGXG5cdCAqIEBwYXJhbSB0YWJsZVxuXHQgKiBAcGFyYW0gY29sSW5kZXhcblx0ICogQHBhcmFtIG9yZGVyIFx1NTM0N1x1NUU4Rlx1OEZEOFx1NjYyRlx1OTY0RFx1NUU4RiAoXHU5RUQ4XHU4QkE0XHU1MzQ3XHU1RThGKVxuXHQgKi9cblx0YXN5bmMgc29ydEJ5Q29sKHRhYmxlOiBUYWJsZSwgY29sSW5kZXg6IG51bWJlciwgb3JkZXI/OiAnYWVzJyB8ICdkZXNjJykge1xuXHRcdGlmICghdGFibGUpIHJldHVybjtcblx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRjb25zdCBlZGl0b3IgPSBtYXJrZG93blZpZXc/LmVkaXRvcjtcblx0XHRjb25zdCBlZGl0b3JWaWV3ID0gKGVkaXRvciBhcyBhbnkpPy5jbSBhcyBFZGl0b3JWaWV3O1xuXHRcdGlmICghZWRpdG9yIHx8ICFlZGl0b3JWaWV3KSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdDYW5ub3QgZ2V0IGVkaXRvcicpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBcdTYzOTJcdTVFOEZcdTU0MEVcdTc2ODRcdTg4NjhcdTY4M0NcdTRGNTNcblx0XHRjb25zdCBzb3J0ZWRCb2R5ID0gdGFibGUuY2VsbHMuc2xpY2UoMSkuc29ydCgocm93MSwgcm93MikgPT4ge1xuXHRcdFx0Y29uc3QgY2VsbDEgPSByb3cxW2NvbEluZGV4XS50b1VwcGVyQ2FzZSgpO1xuXHRcdFx0Y29uc3QgY2VsbDIgPSByb3cyW2NvbEluZGV4XS50b1VwcGVyQ2FzZSgpO1xuXHRcdFx0Ly8gXHU1MzQ3XHU1RThGXHU2MzkyXHU1RThGXG5cdFx0XHRpZiAoIW9yZGVyIHx8IG9yZGVyID09ICdhZXMnKVxuXHRcdFx0XHRyZXR1cm4gY2VsbDEgPCBjZWxsMiA/IC0xIDogY2VsbDEgPiBjZWxsMiA/IDEgOiAwO1xuXHRcdFx0ZWxzZSAvLyBcdTk2NERcdTVFOEZcdTYzOTJcdTVFOEZcblx0XHRcdFx0cmV0dXJuIGNlbGwxIDwgY2VsbDIgPyAxIDogY2VsbDEgPiBjZWxsMiA/IC0xIDogMDtcblx0XHR9KTtcblx0XHRjb25zdCBib2R5U3RyaW5nID0gc29ydGVkQm9keS5tYXAoVGFibGVFZGl0b3Iucm93Q2VsbHMycm93U3RyaW5nKS5qb2luKCdcXG4nKTtcblx0XHQvLyBjb25zb2xlLmxvZyhib2R5U3RyaW5nKTtcblx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKFxuXHRcdFx0Ym9keVN0cmluZyxcblx0XHRcdHsgbGluZTogdGFibGUuZnJvbUxpbmUgKyAyLCBjaDogMCB9LFxuXHRcdFx0eyBsaW5lOiB0YWJsZS50b0xpbmUsIGNoOiAwIH1cblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlRW1wdHlUYWJsZShpOiBudW1iZXIsIGo6IG51bWJlciwgZmlsbD86IGJvb2xlYW4pIHtcblx0XHRpZiAoaiA8IDEgfHwgaSA8IDEpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBjcmVhdGUgYW4gZW1wdHkgdGFibGUnKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0Y29uc3QgZWRpdG9yID0gbWFya2Rvd25WaWV3Py5lZGl0b3I7XG5cdFx0Y29uc3QgZWRpdG9yVmlldyA9IChlZGl0b3IgYXMgYW55KT8uY20gYXMgRWRpdG9yVmlldztcblx0XHRpZiAoIWVkaXRvciB8fCAhZWRpdG9yVmlldykge1xuXHRcdFx0Y29uc29sZS5lcnJvcignQ2Fubm90IGdldCBlZGl0b3InKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuXHRcdGNvbnN0IGN1cnNvckxpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG5cdFx0Y29uc3QgYm9keVN0cmluZyA9ICd8JyArICcgIHwnLnJlcGVhdChqKTtcblx0XHRjb25zdCBmb3JtYXRTdHJpbmcgPSAnfCcgKyAnOi06fCcucmVwZWF0KGopO1xuXHRcdGxldCB0YWJsZUFyciA9IFtcblx0XHRcdGN1cnNvckxpbmUsICdcXG4nLFxuXHRcdFx0Ym9keVN0cmluZywgJ1xcbicsXG5cdFx0XHRmb3JtYXRTdHJpbmcsICdcXG4nXG5cdFx0XTtcblx0XHR3aGlsZSAoaS0tKSB0YWJsZUFyci5wdXNoKGJvZHlTdHJpbmcsICdcXG4nKTtcblx0XHRlZGl0b3Iuc2V0TGluZShjdXJzb3IubGluZSwgdGFibGVBcnIuam9pbignJykpO1xuXHR9XG5cblx0c3RhdGljIHJvd0NlbGxzMnJvd1N0cmluZyhjZWxsczogc3RyaW5nW10pIHtcblx0XHRjb25zdCByZXN1bHQgPSBbJ3wnXTtcblx0XHR0cnkge1xuXHRcdFx0Zm9yIChjb25zdCBjZWxsIG9mIGNlbGxzKSB7XG5cdFx0XHRcdC8vIFx1ODFGM1x1NUMxMVx1NzU1OVx1NEUyNFx1NEUyQVx1N0E3QVx1NjgzQ1x1RkYwQ1x1OTYzMlx1NkI2Mlx1NEVBN1x1NzUxRlx1OTc1RVx1NkNENVx1ODg2OFx1NTkzNFxuXHRcdFx0XHRyZXN1bHQucHVzaChjZWxsLmxlbmd0aCA9PSAwID8gJyAgJyA6IGNlbGwpO1xuXHRcdFx0XHRyZXN1bHQucHVzaCgnfCcpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihlcnIpO1xuXHRcdFx0Y29uc29sZS5lcnJvcihjZWxscyk7XG5cdFx0XHR0aHJvdyBlcnI7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQuam9pbignJyk7XG5cdH1cbn1cbiIsICJpbXBvcnQge0VkaXRvciwgRWRpdG9yUG9zaXRpb259IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtwcml2YXRlRGVjcnlwdH0gZnJvbSBcImNyeXB0b1wiO1xuaW1wb3J0IHtUcmFuc2FjdGlvblNwZWN9IGZyb20gXCJAY29kZW1pcnJvci9zdGF0ZVwiO1xuaW1wb3J0IHtFZGl0b3JWaWV3fSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xuXG5leHBvcnQgY29uc3QgZ2V0TGluZVN0YXJ0UG9zID0gKGxpbmU6IG51bWJlcik6IEVkaXRvclBvc2l0aW9uID0+ICh7XG5cdGxpbmUsXG5cdGNoOiAwLFxufSk7XG5cbmV4cG9ydCBjb25zdCBnZXRMaW5lRW5kUG9zID0gKFxuXHRsaW5lOiBudW1iZXIsXG5cdGVkaXRvcjogRWRpdG9yLFxuKTogRWRpdG9yUG9zaXRpb24gPT4gKHtcblx0bGluZSxcblx0Y2g6IGVkaXRvci5nZXRMaW5lKGxpbmUpLmxlbmd0aCxcbn0pO1xuXG5leHBvcnQgY29uc3QgZGVsZXRlTGluZXMgPSAoXG5cdGVkaXRvcjogRWRpdG9yLFxuXHRmcm9tOiBudW1iZXIsIC8vIGluY2x1c2l2ZVxuXHR0bzogbnVtYmVyIC8vIGV4Y2x1c2l2ZVxuKSA9PiB7XG5cdGlmICh0byA9PT0gZWRpdG9yLmxhc3RMaW5lKCkgKyAxKSB7XG5cdFx0Ly8gXHU2Q0ExXHU2NzA5XHU0RTBCXHU0RTAwXHU4ODRDXG5cdFx0cmV0dXJuIHJlcGxhY2VSYW5nZVdpdGhvdXRTY3JvbGwoXG5cdFx0XHRlZGl0b3IsXG5cdFx0XHQnJyxcblx0XHRcdGdldExpbmVFbmRQb3MoZnJvbSAtIDEsIGVkaXRvciksXG5cdFx0XHRnZXRMaW5lRW5kUG9zKHRvLCBlZGl0b3IpLFxuXHRcdCk7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHJlcGxhY2VSYW5nZVdpdGhvdXRTY3JvbGwoXG5cdFx0XHRlZGl0b3IsXG5cdFx0XHQnJyxcblx0XHRcdGdldExpbmVTdGFydFBvcyhmcm9tKSxcblx0XHRcdGdldExpbmVTdGFydFBvcyh0byksXG5cdFx0KTtcblx0fVxufTtcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZUxpbmUgPSAoZWRpdG9yOiBFZGl0b3IsIGxpbmU6IG51bWJlcikgPT4ge1xuXHRyZXR1cm4gZGVsZXRlTGluZXMoZWRpdG9yLCBsaW5lLCBsaW5lICsgMSk7XG59XG5cbmV4cG9ydCBjb25zdCBnZXRMZWFkaW5nV2hpdGVzcGFjZSA9IChsaW5lQ29udGVudDogc3RyaW5nKSA9PiB7XG5cdGNvbnN0IGluZGVudGF0aW9uID0gbGluZUNvbnRlbnQubWF0Y2goL15cXHMrLyk7XG5cdHJldHVybiBpbmRlbnRhdGlvbiA/IGluZGVudGF0aW9uWzBdIDogJyc7XG59O1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0TGluZUFib3ZlID0gKGVkaXRvcjogRWRpdG9yLCBsaW5lOiBudW1iZXIpID0+IHtcblx0Y29uc3Qgc3RhcnRPZkN1cnJlbnRMaW5lID0gZ2V0TGluZVN0YXJ0UG9zKGxpbmUpO1xuXHRyZXR1cm4gcmVwbGFjZVJhbmdlV2l0aG91dFNjcm9sbChlZGl0b3IsICdcXG4nLCBzdGFydE9mQ3VycmVudExpbmUpO1xufTtcblxuZXhwb3J0IGNvbnN0IGluc2VydExpbmVCZWxvdyA9IChlZGl0b3I6IEVkaXRvciwgbGluZTogbnVtYmVyKSA9PiB7XG5cdGNvbnN0IGVuZE9mQ3VycmVudExpbmUgPSBnZXRMaW5lRW5kUG9zKGxpbmUsIGVkaXRvcik7XG5cdGNvbnN0IGluZGVudGF0aW9uID0gZ2V0TGVhZGluZ1doaXRlc3BhY2UoZWRpdG9yLmdldExpbmUobGluZSkpO1xuXHRyZXR1cm4gcmVwbGFjZVJhbmdlV2l0aG91dFNjcm9sbChlZGl0b3IsICdcXG4nICsgaW5kZW50YXRpb24sIGVuZE9mQ3VycmVudExpbmUpO1xufTtcblxuZXhwb3J0IGNvbnN0IGluc2VydExpbmVCZWxvd1dpdGhUZXh0ID0gKGVkaXRvcjogRWRpdG9yLCBsaW5lOiBudW1iZXIsIHRleHQ6IHN0cmluZykgPT4ge1xuXHRjb25zdCBlbmRPZkN1cnJlbnRMaW5lID0gZ2V0TGluZUVuZFBvcyhsaW5lLCBlZGl0b3IpO1xuXHRjb25zdCBpbmRlbnRhdGlvbiA9IGdldExlYWRpbmdXaGl0ZXNwYWNlKGVkaXRvci5nZXRMaW5lKGxpbmUpKTtcblx0Y29uc3QgdGV4dFRvSW5zZXJ0ID0gdGV4dC5zcGxpdCgvXFxyP1xcbi8pLm1hcCgocykgPT4gaW5kZW50YXRpb24gKyBzKS5qb2luKCdcXG4nKTtcblx0cmVwbGFjZVJhbmdlV2l0aG91dFNjcm9sbChlZGl0b3IsICdcXG4nICsgdGV4dFRvSW5zZXJ0LCBlbmRPZkN1cnJlbnRMaW5lKTtcblx0cmV0dXJuIHsgYW5jaG9yOiB7IGxpbmU6IGxpbmUgKyAxLCBjaDogaW5kZW50YXRpb24ubGVuZ3RoIH0gfTtcbn1cblxuZXhwb3J0IGNvbnN0IHpmID0gKGU6IGFueSwgdDogYW55KSA9PiB7XG5cdGlmICh0LmxpbmUgPCAwKVxuXHRcdHJldHVybiAwO1xuXHRjb25zdCBuID0gdC5saW5lICsgMTtcblx0aWYgKG4gPiBlLmxpbmVzKVxuXHRcdHJldHVybiBlLmxlbmd0aDtcblx0Y29uc3QgaSA9IGUubGluZShuKTtcblx0cmV0dXJuIGlzRmluaXRlKHQuY2gpID8gdC5jaCA8IDAgPyBpLmZyb20gKyBNYXRoLm1heCgwLCBpLmxlbmd0aCArIHQuY2gpIDogaS5mcm9tICsgdC5jaCA6IGkudG9cbn1cblxuZXhwb3J0IGNvbnN0IHJlcGxhY2VSYW5nZVdpdGhvdXRTY3JvbGwgPSAoZWRpdG9yOiBFZGl0b3IsIHJlcGxhY2VtZW50OiBzdHJpbmcsIGZyb206IEVkaXRvclBvc2l0aW9uLCB0bz86IEVkaXRvclBvc2l0aW9uKSA9PiB7XG5cdGNvbnN0IGNtID0gKGVkaXRvciBhcyBhbnkpLmNtO1xuXHRjb25zdCBzdGF0ZSA9IGNtLnN0YXRlLmRvYztcblx0Y29uc3QgZnJvbTIgPSB6ZihzdGF0ZSwgZnJvbSk7XG5cdGNvbnN0IHRvMiA9IHRvID8gemYoc3RhdGUsIHRvKSA6IGZyb20yO1xuXHRyZXR1cm4ge1xuXHRcdGNoYW5nZXM6IHtcblx0XHRcdGZyb206IGZyb20yLFxuXHRcdFx0dG86IHRvMixcblx0XHRcdGluc2VydDogcmVwbGFjZW1lbnQsXG5cdFx0fSxcblx0XHRzY3JvbGxJbnRvVmlldzogZmFsc2UsIC8vIFx1NEUwRFx1NkVEQVx1NTJBOFx1RkYwMVx1RkYwMVxuXHRcdHNlcXVlbnRpYWw6IGZhbHNlLCAvLyBcdTk2MzJcdTZCNjJcdTRGNERcdTdGNkVcdTk1MTlcdTRFNzFcblx0fSBhcyBUcmFuc2FjdGlvblNwZWM7XG59XG5cbmV4cG9ydCBjb25zdCBzZXRMaW5lV2l0aG91dFNjcm9sbCA9IChlZGl0b3I6IEVkaXRvciwgbjogbnVtYmVyLCB0ZXh0OiBzdHJpbmcpID0+IHtcblx0Y29uc3QgY20gPSAoZWRpdG9yIGFzIGFueSkuY207XG5cdGNvbnN0IHN0YXRlID0gY20uc3RhdGUuZG9jO1xuXHRjb25zdCBmcm9tID0gemYoc3RhdGUsIHsgbGluZTogbiwgY2g6IDAgfSk7XG5cdGNvbnN0IHRvID0gemYoc3RhdGUsIHsgbGluZTogbiwgY2g6IGVkaXRvci5nZXRMaW5lKG4pLmxlbmd0aCB9KTtcblx0cmV0dXJuIHtcblx0XHRjaGFuZ2VzOiB7XG5cdFx0XHRmcm9tLFxuXHRcdFx0dG8sXG5cdFx0XHRpbnNlcnQ6IHRleHQsXG5cdFx0fSxcblx0XHRzY3JvbGxJbnRvVmlldzogZmFsc2UsIC8vIFx1NEUwRFx1NkVEQVx1NTJBOFx1RkYwMVx1RkYwMVxuXHRcdHNlcXVlbnRpYWw6IGZhbHNlLCAvLyBcdTk2MzJcdTZCNjJcdTRGNERcdTdGNkVcdTk1MTlcdTRFNzFcblx0fSBhcyBUcmFuc2FjdGlvblNwZWM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3aXRob3V0U2Nyb2xsQW5kRm9jdXMoZWRpdG9yVmlldzogRWRpdG9yVmlldywgY2FsbGJhY2s6ICgpID0+IGFueSkge1xuXHRjb25zdCBzY3JvbGxEb20gPSBlZGl0b3JWaWV3LnNjcm9sbERPTTtcblx0Y29uc3QgeCA9IHNjcm9sbERvbS5zY3JvbGxMZWZ0XG5cdGNvbnN0IHkgPSBzY3JvbGxEb20uc2Nyb2xsVG9wO1xuXHRjb25zdCByZXNldFNjcm9sbCA9ICgpID0+IHtcblx0XHRzY3JvbGxEb20uc2Nyb2xsVG8oeCwgeSk7XG5cdH1cblx0c2Nyb2xsRG9tLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHJlc2V0U2Nyb2xsLCB0cnVlKTtcblx0ZWRpdG9yVmlldy5jb250ZW50RE9NLmJsdXIoKTtcblx0Y2FsbGJhY2soKTtcblx0ZWRpdG9yVmlldy5jb250ZW50RE9NLmJsdXIoKTtcblx0c2Nyb2xsRG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHJlc2V0U2Nyb2xsLCB0cnVlKTtcbn1cbiIsICJpbXBvcnQgVGFibGVFbmhhbmNlcjIgZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7YWRkSWNvbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRCZWxvd0ljb24gPSBgXG48c3ZnXG5cdHQ9XCIxNjYxODQyMDM0MzE4XCJcblx0Y2xhc3M9XCJpY29uXCJcblx0dmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIlxuXHR2ZXJzaW9uPVwiMS4xXCJcblx0eG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG5cdHAtaWQ9XCI1Njg4XCJcblx0d2lkdGg9XCIxNlwiXG5cdGhlaWdodD1cIjE2XCJcbj5cblx0PHBhdGhcblx0XHRkPVwiTTkwNCA3NjhIMTIwYy00LjQgMC04IDMuNi04IDh2ODBjMCA0LjQgMy42IDggOCA4aDc4NGM0LjQgMCA4LTMuNiA4LTh2LTgwYzAtNC40LTMuNi04LTgtOHpNODc4LjcgMTYwSDE0NS4zYy0xOC40IDAtMzMuMyAxNC4zLTMzLjMgMzJ2NDY0YzAgMTcuNyAxNC45IDMyIDMzLjMgMzJoNzMzLjNjMTguNCAwIDMzLjMtMTQuMyAzMy4zLTMyVjE5MmMwLjEtMTcuNy0xNC44LTMyLTMzLjItMzJ6TTM2MCA2MTZIMTg0VjQ1NmgxNzZ2MTYweiBtMC0yMjRIMTg0VjIzMmgxNzZ2MTYweiBtMjQwIDIyNEg0MjRWNDU2aDE3NnYxNjB6IG0wLTIyNEg0MjRWMjMyaDE3NnYxNjB6IG0yNDAgMjI0SDY2NFY0NTZoMTc2djE2MHogbTAtMjI0SDY2NFYyMzJoMTc2djE2MHpcIiBcblx0XHRwLWlkPVwiNTY4OVwiXG5cdFx0ZmlsbD1cImN1cnJlbnRDb2xvclwiXG5cdCAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxuXHQ+PC9wYXRoPlxuPC9zdmc+YDtcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZUljb24gPSBgXG48c3ZnXG5cdHQ9XCIxNjYxNzgxMTYxMTgwXCJcblx0Y2xhc3M9XCJpY29uXCJcblx0dmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIlxuXHR2ZXJzaW9uPVwiMS4xXCJcblx0eG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG5cdHAtaWQ9XCIzMjQyXCJcblx0d2lkdGg9XCIxNlwiXG5cdGhlaWdodD1cIjE2XCJcbj5cblx0PHBhdGhcblx0XHRkPVwiTTUxMiA0NzEuNzQ0bDIwNy40MjQtMjA3LjM2YTI4LjQxNiAyOC40MTYgMCAxIDEgNDAuMjU2IDQwLjE5Mkw1NTIuMjU2IDUxMmwyMDcuMzYgMjA3LjQyNGEyOC40MTYgMjguNDE2IDAgMSAxLTQwLjE5MiA0MC4yNTZMNTEyIDU1Mi4yNTZsLTIwNy40MjQgMjA3LjM2YTI4LjQxNiAyOC40MTYgMCAxIDEtNDAuMjU2LTQwLjE5Mkw0NzEuNzQ0IDUxMmwtMjA3LjM2LTIwNy40MjRhMjguNDE2IDI4LjQxNiAwIDAgMSA0MC4xOTItNDAuMjU2TDUxMiA0NzEuNzQ0elwiXG5cdFx0cC1pZD1cIjMyNDNcIlxuXHRcdGZpbGw9XCJjdXJyZW50Q29sb3JcIlxuXHQgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcblx0PlxuXHQ8L3BhdGg+XG48L3N2Zz5gO1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0UmlnaHRJY29uID0gYFxuPHN2Z1xuXHR0PVwiMTY2MTg0MjA1OTk0MFwiXG5cdGNsYXNzPVwiaWNvblwiXG5cdHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCJcblx0dmVyc2lvbj1cIjEuMVwiXG5cdHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuXHRwLWlkPVwiNTkyNFwiXG5cdHdpZHRoPVwiMTZcIlxuXHRoZWlnaHQ9XCIxNlwiXG4+XG5cdDxwYXRoXG5cdFx0ZD1cIk04NTYgMTEyaC04MGMtNC40IDAtOCAzLjYtOCA4djc4NGMwIDQuNCAzLjYgOCA4IDhoODBjNC40IDAgOC0zLjYgOC04VjEyMGMwLTQuNC0zLjYtOC04LTh6TTY1NiAxMTJIMTkyYy0xNy43IDAtMzIgMTQuOS0zMiAzMy4zdjczMy4zYzAgMTguNCAxNC4zIDMzLjMgMzIgMzMuM2g0NjRjMTcuNyAwIDMyLTE0LjkgMzItMzMuM1YxNDUuM2MwLTE4LjQtMTQuMy0zMy4zLTMyLTMzLjN6TTM5MiA4NDBIMjMyVjY2NGgxNjB2MTc2eiBtMC0yNDBIMjMyVjQyNGgxNjB2MTc2eiBtMC0yNDBIMjMyVjE4NGgxNjB2MTc2eiBtMjI0IDQ4MEg0NTZWNjY0aDE2MHYxNzZ6IG0wLTI0MEg0NTZWNDI0aDE2MHYxNzZ6IG0wLTI0MEg0NTZWMTg0aDE2MHYxNzZ6XCIgXG5cdFx0cC1pZD1cIjU5MjVcIlxuXHRcdGZpbGw9XCJjdXJyZW50Q29sb3JcIlxuXHQgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcblx0PjwvcGF0aD5cbjwvc3ZnPmA7XG5cbmV4cG9ydCBjb25zdCBjZW50ZXJBbGlnbmVkSWNvbiA9IGBcbjxzdmcgXG5cdHQ9XCIxNjYxODQwOTQwMDg5XCJcblx0Y2xhc3M9XCJpY29uXCJcblx0dmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIlxuXHR2ZXJzaW9uPVwiMS4xXCJcblx0eG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG5cdHAtaWQ9XCIxNzIyXCJcblx0d2lkdGg9XCIxNlwiXG5cdGhlaWdodD1cIjE2XCJcbj5cblx0PHBhdGhcblx0ZD1cIk0xNzAuNjY2NjY3IDIyNGg2ODIuNjY2NjY2YTMyIDMyIDAgMSAxIDAgNjRIMTcwLjY2NjY2N2EzMiAzMiAwIDEgMSAwLTY0ek0yOTguNjY2NjY3IDM5NC42NjY2NjdoNDI2LjY2NjY2NmEzMiAzMiAwIDEgMSAwIDY0SDI5OC42NjY2NjdhMzIgMzIgMCAxIDEgMC02NHpNMTcwLjY2NjY2NyA1NjUuMzMzMzMzaDY4Mi42NjY2NjZhMzIgMzIgMCAxIDEgMCA2NEgxNzAuNjY2NjY3YTMyIDMyIDAgMSAxIDAtNjR6TTI5OC42NjY2NjcgNzM2aDQyNi42NjY2NjZhMzIgMzIgMCAxIDEgMCA2NEgyOTguNjY2NjY3YTMyIDMyIDAgMSAxIDAtNjR6XCJcblx0ZmlsbD1cImN1cnJlbnRDb2xvclwiXG4gICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcblx0cC1pZD1cIjE3MjNcIlxuXHQ+XG5cdDwvcGF0aD5cbjwvc3ZnPmA7XG5cbmV4cG9ydCBjb25zdCBsZWZ0QWxpZ25lZEljb24gPSBgXG48c3ZnIFxuXHR0PVwiMTY2MTg0MTExNDgxNFwiXG5cdGNsYXNzPVwiaWNvblwiXG5cdHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCJcblx0dmVyc2lvbj1cIjEuMVwiXG5cdHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuXHRwLWlkPVwiNDIyM1wiIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiXG4+XG5cdDxwYXRoXG5cdFx0ZD1cIk0xNzAuNjY2NjY3IDIyNGg2ODIuNjY2NjY2YTMyIDMyIDAgMSAxIDAgNjRIMTcwLjY2NjY2N2EzMiAzMiAwIDEgMSAwLTY0ek0xNzAuNjY2NjY3IDM5NC42NjY2NjdoNDI2LjY2NjY2NmEzMiAzMiAwIDEgMSAwIDY0SDE3MC42NjY2NjdhMzIgMzIgMCAxIDEgMC02NHpNMTcwLjY2NjY2NyA1NjUuMzMzMzMzaDY4Mi42NjY2NjZhMzIgMzIgMCAxIDEgMCA2NEgxNzAuNjY2NjY3YTMyIDMyIDAgMSAxIDAtNjR6TTE3MC42NjY2NjcgNzM2aDQyNi42NjY2NjZhMzIgMzIgMCAxIDEgMCA2NEgxNzAuNjY2NjY3YTMyIDMyIDAgMSAxIDAtNjR6XCJcblx0XHRmaWxsPVwiY3VycmVudENvbG9yXCJcbiAgICBcdHN0cm9rZT1cImN1cnJlbnRDb2xvclwiXG5cdFx0cC1pZD1cIjQyMjRcIlxuXHQ+PC9wYXRoPlxuPC9zdmc+XG5gO1xuXG5leHBvcnQgY29uc3QgcmlnaHRBbGlnbmVkSWNvbiA9IGBcbjxzdmdcblx0dD1cIjE2NjE4NDEyMTg2MjZcIlxuXHRjbGFzcz1cImljb25cIlxuXHR2aWV3Qm94PVwiMCAwIDEwMjQgMTAyNFwiXG5cdHZlcnNpb249XCIxLjFcIlxuXHR4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcblx0cC1pZD1cIjQ0MzhcIlxuXHR3aWR0aD1cIjE2XCJcblx0aGVpZ2h0PVwiMTZcIlxuPlxuXHQ8cGF0aFxuXHRcdGQ9XCJNMTcwLjY2NjY2NyAyMjRoNjgyLjY2NjY2NmEzMiAzMiAwIDEgMSAwIDY0SDE3MC42NjY2NjdhMzIgMzIgMCAxIDEgMC02NHpNNDI2LjY2NjY2NyAzOTQuNjY2NjY3aDQyNi42NjY2NjZhMzIgMzIgMCAxIDEgMCA2NEg0MjYuNjY2NjY3YTMyIDMyIDAgMSAxIDAtNjR6TTE3MC42NjY2NjcgNTY1LjMzMzMzM2g2ODIuNjY2NjY2YTMyIDMyIDAgMSAxIDAgNjRIMTcwLjY2NjY2N2EzMiAzMiAwIDEgMSAwLTY0ek00MjYuNjY2NjY3IDczNmg0MjYuNjY2NjY2YTMyIDMyIDAgMSAxIDAgNjRINDI2LjY2NjY2N2EzMiAzMiAwIDEgMSAwLTY0elwiXG5cdFx0ZmlsbD1cImN1cnJlbnRDb2xvclwiXG4gICAgXHRzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxuXHRcdHAtaWQ9XCI0NDM5XCJcblx0PjwvcGF0aD5cbjwvc3ZnPlxuYDtcblxuZXhwb3J0IGNvbnN0IG1vdmVSaWdodEljb24gPSBgXG48c3ZnXG5cdHQ9XCIxNjYyMTg3NzY1MTQ4XCJcblx0Y2xhc3M9XCJpY29uXCJcblx0dmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIlxuXHR2ZXJzaW9uPVwiMS4xXCJcblx0eG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG5cdHAtaWQ9XCI5Njc4XCJcblx0d2lkdGg9XCIxNlwiXG5cdGhlaWdodD1cIjE2XCJcbj5cblx0PHBhdGhcblx0XHRkPVwiTTU5My40NTA2NjcgNTEyLjEyOEwzNjAuMDY0IDI3OC42MTMzMzNsNDUuMjkwNjY3LTQ1LjIyNjY2NiAyNzguNjEzMzMzIDI3OC43NjI2NjZMNDA1LjMzMzMzMyA3OTAuNjEzMzMzbC00NS4yMjY2NjYtNDUuMjY5MzMzelwiIFxuXHRcdHAtaWQ9XCI5Njc5XCJcblx0XHRmaWxsPVwiY3VycmVudENvbG9yXCJcbiAgICBcdHN0cm9rZT1cImN1cnJlbnRDb2xvclwiXG5cdD48L3BhdGg+XG48L3N2Zz5gO1xuXG5leHBvcnQgY29uc3QgbW92ZUxlZnRJY29uID0gYFxuPHN2Z1xuXHR0PVwiMTY2MjE4ODA5MDE0NFwiXG5cdGNsYXNzPVwiaWNvblwiXG5cdHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCJcblx0dmVyc2lvbj1cIjEuMVwiXG5cdHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuXHRwLWlkPVwiNjA2N1wiXG5cdHdpZHRoPVwiMTZcIlxuXHRoZWlnaHQ9XCIxNlwiXG4+XG5cdDxwYXRoXG5cdFx0ZD1cIk02NDEuMjggMjc4LjYxMzMzM2wtNDUuMjI2NjY3LTQ1LjIyNjY2Ni0yNzguNjM0NjY2IDI3OC43NjI2NjYgMjc4LjYxMzMzMyAyNzguNDg1MzM0IDQ1LjI0OC00NS4yNjkzMzQtMjMzLjM2NTMzMy0yMzMuMjM3MzMzelwiXG5cdFx0cC1pZD1cIjYwNjhcIlxuXHRcdGZpbGw9XCJjdXJyZW50Q29sb3JcIlxuICAgIFx0c3Ryb2tlPVwiY3VycmVudENvbG9yXCJcblx0PjwvcGF0aD5cbjwvc3ZnPmA7XG5cbmV4cG9ydCBjb25zdCBjbG9uZUljb24gPSBgXG48c3ZnIHQ9XCIxNjcxOTMyOTU0NzA5XCIgY2xhc3M9XCJpY29uXCIgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHAtaWQ9XCI0OTg0XCIgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCI+PHBhdGggZD1cIk0xNjAgMTYwdjU0NGgxMjh2LTY0SDIyNFYyMjRoNDE2djY0aDY0VjE2MEgxNjB6IG0xNjAgMTYwdjU0NGg1NDRWMzIwSDMyMHogbTY0IDY0aDQxNnY0MTZIMzg0VjM4NHpcIiBmaWxsPVwiY3VycmVudENvbG9yXCJcbiAgICBcdHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHAtaWQ9XCI0OTg1XCI+PC9wYXRoPjwvc3ZnPmA7XG5cbmV4cG9ydCBjb25zdCB3aWRlckljb24gPSBgXG48c3ZnXG4gICB3aWR0aD1cIjE1Ljk5OTk5OVwiXG4gICBoZWlnaHQ9XCIxNS45OTk5OTlcIlxuICAgdmlld0JveD1cIjAgMCA0LjIzMzMzMyA0LjIzMzMzM1wiXG4gICBpZD1cInN2ZzVcIlxuICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICA8ZGVmc1xuICAgICBpZD1cImRlZnMyXCIgLz5cbiAgPGdcbiAgICAgaWQ9XCJsYXllcjFcIj5cbiAgICA8cGF0aFxuICAgICAgIGlkPVwicGF0aDI0MC01LTNcIlxuICAgICAgIGZpbGw9XCJjdXJyZW50Q29sb3JcIlxuXHQgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxuICAgICAgIHN0eWxlPVwic3Ryb2tlLXdpZHRoOjAuMTU1MzE7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWRhc2hhcnJheTpub25lXCJcbiAgICAgICBkPVwiTSAyLjcxNjk4NTEsMi44MTQ5NDI2IDMuMzU1NDQ3OCwyLjExNjY2NjcgTSAyLjcxNjk4NTEsMS40MTgzOTA4IDMuMzU1NDQ3OCwyLjExNjY2NjcgTSAxLjUxNjM0ODEsMi44MTQ5NDI2IDAuODc3ODg1NSwyLjExNjY2NjcgTSAxLjUxNjM0ODEsMS40MTgzOTA4IDAuODc3ODg1NSwyLjExNjY2NjdcIiAvPlxuICA8L2c+XG48L3N2Zz5gO1xuXG5leHBvcnQgY29uc3QgbmFycm93ZXJJY29uID0gYFxuPHN2Z1xuICAgd2lkdGg9XCIxNS45OTk5OTlcIlxuICAgaGVpZ2h0PVwiMTUuOTk5OTk5XCJcbiAgIHZpZXdCb3g9XCIwIDAgNC4yMzMzMzMgNC4yMzMzMzNcIlxuICAgaWQ9XCJzdmc1XCJcbiAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAgPGRlZnNcbiAgICAgaWQ9XCJkZWZzMlwiIC8+XG4gIDxnXG4gICAgIGlkPVwibGF5ZXIxXCI+XG4gICAgPHBhdGhcbiAgICAgICBpZD1cInBhdGgyNDAtNS0zXCJcbiAgICAgICBmaWxsPVwiY3VycmVudENvbG9yXCJcblx0ICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICBzdHlsZT1cInN0cm9rZS13aWR0aDowLjE1NTMxO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1kYXNoYXJyYXk6bm9uZVwiXG4gICAgICAgZD1cIk0gMy4yODcxNzA2LDIuODE0OTQyNiAyLjY0ODcwNzksMi4xMTY2NjY3IE0gMy4yODcxNzA2LDEuNDE4MzkwOCAyLjY0ODcwNzksMi4xMTY2NjY3IE0gMC45NDYxNjI3NywyLjgxNDk0MjYgMS41ODQ2MjU0LDIuMTE2NjY2NyBNIDAuOTQ2MTYyNzcsMS40MTgzOTA4IDEuNTg0NjI1NCwyLjExNjY2NjdcIiAvPlxuICA8L2c+XG48L3N2Zz5gO1xuXG5leHBvcnQgY29uc3QgdXB3YXJkSWNvbiA9IGBcbjxzdmcgdD1cIjE2NzE5MzQ3MTMxMDRcIiBjbGFzcz1cImljb25cIiB2aWV3Qm94PVwiMCAwIDEwMjQgMTAyNFwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgcC1pZD1cIjI2NDBcIiB3aWR0aD1cIjE2XCIgaGVpZ2h0PVwiMTZcIj48cGF0aCBkPVwiTTgzMC4yNCA2ODUuNzZsMTEuMzI4LTExLjMxMmExNiAxNiAwIDAgMCAwLTIyLjY0TDUzMC40NDggMzQwLjY4OGExNiAxNiAwIDAgMC0yMi42NCAwTDE5Ni42ODggNjUxLjgwOGExNiAxNiAwIDAgMCAwIDIyLjY0bDExLjMxMiAxMS4zMTJhMTYgMTYgMCAwIDAgMjIuNjI0IDBsMjg4LjQ5Ni0yODguNTEyTDgwNy42MzIgNjg1Ljc2YTE2IDE2IDAgMCAwIDIyLjYyNCAwelwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIlxuXHQgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBwLWlkPVwiMjY0MVwiPjwvcGF0aD48L3N2Zz5gO1xuXG5leHBvcnQgY29uc3QgZG93bkljb24gPSBgXG48c3ZnIHQ9XCIxNjcxOTM0NzkyNjcwXCIgY2xhc3M9XCJpY29uXCIgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHAtaWQ9XCIzMTYzXCIgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCI+PHBhdGggZD1cIk04MzAuMjQgMzQwLjY4OGwxMS4zMjggMTEuMzEyYTE2IDE2IDAgMCAxIDAgMjIuNjI0TDUzMC40NDggNjg1Ljc2YTE2IDE2IDAgMCAxLTIyLjY0IDBMMTk2LjY4OCAzNzQuNjI0YTE2IDE2IDAgMCAxIDAtMjIuNjI0bDExLjMxMi0xMS4zMTJhMTYgMTYgMCAwIDEgMjIuNjI0IDBsMjg4LjQ5NiAyODguNDk2IDI4OC41MTItMjg4LjQ5NmExNiAxNiAwIDAgMSAyMi42MjQgMHpcIiBmaWxsPVwiY3VycmVudENvbG9yXCJcblx0ICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgcC1pZD1cIjMxNjRcIj48L3BhdGg+PC9zdmc+YDtcblxuZXhwb3J0IGNvbnN0IGluc2VydENvbFJpZ2h0ID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBjbGFzcz1cInN2Zy1pY29uXCI+XG4gICAgPHBhdGggZD1cIk02LDVDNS40NDgsNSA1LDUuNDQ4IDUsNkw1LDE4QzUsMTguNTUyIDUuNDQ4LDE5IDYsMTlMMTIsMTlDMTIuNTUyLDE5IDEzLDE4LjU1MiAxMywxOEwxMyw2QzEzLDUuNDQ4IDEyLjU1Miw1IDEyLDVMNiw1WlwiLz5cbiAgICA8cGF0aCBkPVwiTTE5LDE5TDE5LDVcIi8+XG48L3N2Zz5gO1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0Um93QmVsb3cgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwic3ZnLWljb25cIj5cbiAgICA8cGF0aCBkPVwiTTE5LDZDMTksNS40NDggMTguNTUyLDUgMTgsNUw2LDVDNS40NDgsNSA1LDUuNDQ4IDUsNkw1LDEyQzUsMTIuNTUyIDUuNDQ4LDEzIDYsMTNMMTgsMTNDMTguNTUyLDEzIDE5LDEyLjU1MiAxOSwxMkwxOSw2WlwiLz5cbiAgICA8cGF0aCBkPVwiTTUsMTlMMTksMTlcIi8+XG48L3N2Zz5gO1xuXG5leHBvcnQgY29uc3QgY2xvbmVSb3cgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwic3ZnLWljb25cIj5cbiAgICA8cGF0aCBkPVwiTTE5LDZMNSw2XCIvPlxuICAgIDxwYXRoIGQ9XCJNNywxOUw1LDE5XCIvPlxuICAgIDxwYXRoIGQ9XCJNMTMsMTlMMTEsMTlcIi8+XG4gICAgPHBhdGggZD1cIk0xOSwxOUwxNywxOVwiLz5cbiAgICA8cGF0aCBkPVwiTTEyLDE0TDE1LDExXCIvPlxuICAgIDxwYXRoIGQ9XCJNMTIsMTRMOSwxMVwiLz5cbjwvc3ZnPmA7XG5cbmV4cG9ydCBjb25zdCBjbG9uZUNvbCA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJzdmctaWNvblwiPlxuICAgIDxwYXRoIGQ9XCJNNiw1TDYsMTlcIi8+XG4gICAgPHBhdGggZD1cIk0xOSwxN0wxOSwxOVwiLz5cbiAgICA8cGF0aCBkPVwiTTE5LDExTDE5LDEzXCIvPlxuICAgIDxwYXRoIGQ9XCJNMTksNUwxOSw3XCIvPlxuICAgIDxwYXRoIGQ9XCJNMTQsMTJMMTEsOVwiLz5cbiAgICA8cGF0aCBkPVwiTTE0LDEyTDExLDE1XCIvPlxuPC9zdmc+YDtcblxuZXhwb3J0IGNvbnN0IGRlbFJvdyA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJzdmctaWNvblwiPlxuICAgIDxwYXRoIGQ9XCJNMTcuNzUsNUw0LDVcIi8+XG4gICAgPHBhdGggZD1cIk0xNy43NSwxOUw0LDE5XCIvPlxuICAgIDxwYXRoIGQ9XCJNMTIsMTJMNCwxMlwiLz5cbiAgICA8cGF0aCBkPVwiTTE1LDE0LjVMMjAsOS41XCIvPlxuICAgIDxwYXRoIGQ9XCJNMjAsMTQuNUwxNSw5LjVcIi8+XG48L3N2Zz5gO1xuXG5leHBvcnQgY29uc3QgZGVsQ29sID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBjbGFzcz1cInN2Zy1pY29uXCI+XG4gICAgPHBhdGggZD1cIk01LDYuMjVMNSwyMFwiLz5cbiAgICA8cGF0aCBkPVwiTTE5LDYuMjVMMTksMjBcIi8+XG4gICAgPHBhdGggZD1cIk0xMiwxMkwxMiwyMFwiLz5cbiAgICA8cGF0aCBkPVwiTTE0LjUsOUw5LjUsNFwiLz5cbiAgICA8cGF0aCBkPVwiTTE0LjUsNEw5LjUsOVwiLz5cbjwvc3ZnPmA7XG4iLCAiaW1wb3J0IFRhYmxlRW5oYW5jZXIyIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQge1xuXHRjbG9uZUljb24sXG5cdGRlbGV0ZUljb24sXG5cdGRvd25JY29uLFxuXHRpbnNlcnRCZWxvd0ljb24sXG5cdGluc2VydFJpZ2h0SWNvbixcblx0bW92ZUxlZnRJY29uLFxuXHRtb3ZlUmlnaHRJY29uLFxuXHR1cHdhcmRJY29uXG59IGZyb20gXCIuL2ljb25cIjtcbmltcG9ydCB7Z2V0Q2VsbEluZm8sIFRhYmxlfSBmcm9tIFwiLi9nbG9iYWxcIjtcbmltcG9ydCB7Tm90aWNlfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGNsYXNzIFRvb2xCYXIge1xuXG5cdHBsdWdpbjogVGFibGVFbmhhbmNlcjI7XG5cdHJvd09wQmFyRWw6IEhUTUxFbGVtZW50O1xuXHRjb2xPcEJhckVsOiBIVE1MRWxlbWVudDtcblx0LyoqIFx1NjI0MFx1NjcwOVx1ODhBQlx1NkZDMFx1NkQzQlx1NzY4NCB0b29sYmFyICovXG5cdGFjdGl2ZU9wQmFyczogSFRNTEVsZW1lbnRbXTtcblx0LyoqIFx1OTY5MFx1ODVDRiB0aW1lb3V0XHVGRjBDXHU4MkU1XHU2NzA5XHU1OTFBXHU0RTJBXHU4OEFCXHU2RkMwXHU2RDNCXHU3Njg0IHRvb2xiYXJcdUZGMENcdTVCODNcdTRFRUNcdTUxNkNcdTc1MjhcdTU0MENcdTRFMDAgdGltZW91dCAqL1xuXHRoaWRlVGltZW91dDogYW55O1xuXHQvKiogXHU1RjUzXHU1MjREXHU0RTNBXHU1NEVBXHU0RTJBIGNlbGwgXHU2NjNFXHU3OTNBXHU1REU1XHU1MTc3XHU2ODBGICovXG5cdGNlbGw6IHsgdGFibGVMaW5lOiBudW1iZXIsIGk6IG51bWJlciwgajogbnVtYmVyIH07XG5cblx0Y29uc3RydWN0b3IocGx1Z2luOiBUYWJsZUVuaGFuY2VyMikge1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMucm93T3BCYXJFbCA9IGNyZWF0ZURpdih7Y2xzOiAnb2ItdGFibGUtZW5oYW5jZXItcm93LWJhcid9KTtcblx0XHR0aGlzLmNvbE9wQmFyRWwgPSBjcmVhdGVEaXYoe2NsczogJ29iLXRhYmxlLWVuaGFuY2VyLWNvbC1iYXInfSk7XG5cblx0XHR0aGlzLnJvd09wQmFyRWwuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogJ29iLXRhYmxlLWVuaGFuY2VyLXJvdy1iYXItYnV0dG9uJ1xuXHRcdH0sIChlbCkgPT4ge1xuXHRcdFx0ZWwuaW5uZXJIVE1MID0gdXB3YXJkSWNvbjtcblx0XHRcdGVsLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLmNlbGwuaSA9PSAxKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZSgnQ3VycmVudCBjb2x1bW4gaXMgYWxyZWFkeSB0aGUgdG9wIHJvdy4nKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgdGFibGUgPSBhd2FpdCBwbHVnaW4udGFibGVFZGl0b3IuZ2V0VGFibGUodGhpcy5jZWxsLnRhYmxlTGluZSk7XG5cdFx0XHRcdGlmICghdGFibGUpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdDYW5ub3QgZ2V0IHRhYmxlLicpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi50YWJsZUVkaXRvci5zd2FwUm93cyh0YWJsZSwgdGhpcy5jZWxsLmksdGhpcy5jZWxsLmkgLSAxKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMucm93T3BCYXJFbC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiAnb2ItdGFibGUtZW5oYW5jZXItcm93LWJhci1idXR0b24nXG5cdFx0fSwgKGVsKSA9PiB7XG5cdFx0XHRlbC5pbm5lckhUTUwgPSBkb3duSWNvbjtcblx0XHRcdGVsLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHRhYmxlID0gYXdhaXQgcGx1Z2luLnRhYmxlRWRpdG9yLmdldFRhYmxlKHRoaXMuY2VsbC50YWJsZUxpbmUpO1xuXHRcdFx0XHRpZiAoIXRhYmxlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignQ2Fubm90IGdldCB0YWJsZS4nKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3Qgcm93TnVtID0gdGFibGUuY2VsbHMubGVuZ3RoO1xuXHRcdFx0XHRpZiAodGhpcy5jZWxsLmkgPT0gcm93TnVtIC0gMSkge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0N1cnJlbnQgY29sdW1uIGlzIGFscmVhZHkgdGhlIGJvdHRvbSByb3cuJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnRhYmxlRWRpdG9yLnN3YXBSb3dzKHRhYmxlLCB0aGlzLmNlbGwuaSx0aGlzLmNlbGwuaSArIDEpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5yb3dPcEJhckVsLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6ICdvYi10YWJsZS1lbmhhbmNlci1yb3ctYmFyLWJ1dHRvbidcblx0XHR9LCAoZWwpID0+IHtcblx0XHRcdGVsLmlubmVySFRNTCA9IGluc2VydEJlbG93SWNvbjtcblx0XHRcdGVsLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHRhYmxlID0gYXdhaXQgcGx1Z2luLnRhYmxlRWRpdG9yLmdldFRhYmxlKHRoaXMuY2VsbC50YWJsZUxpbmUpO1xuXHRcdFx0XHRpZiAoIXRhYmxlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignQ2Fubm90IGdldCB0YWJsZS4nKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4udGFibGVFZGl0b3IuaW5zZXJ0Um93QmVsb3codGFibGUsIHRoaXMuY2VsbC5pKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuY29sT3BCYXJFbC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiAnb2ItdGFibGUtZW5oYW5jZXItY29sLWJhci1idXR0b24nXG5cdFx0fSwgKGVsKSA9PiB7XG5cdFx0XHRlbC5pbm5lckhUTUwgPSBtb3ZlTGVmdEljb247XG5cdFx0XHRlbC5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5jZWxsLmogPT0gMCkge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0N1cnJlbnQgY29sdW1uIGlzIGFscmVhZHkgdGhlIGxlZnRtb3N0IGNvbHVtbi4nKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgdGFibGUgPSBhd2FpdCBwbHVnaW4udGFibGVFZGl0b3IuZ2V0VGFibGUodGhpcy5jZWxsLnRhYmxlTGluZSk7XG5cdFx0XHRcdGlmICghdGFibGUpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdDYW5ub3QgZ2V0IHRhYmxlLicpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRhd2FpdCBwbHVnaW4udGFibGVFZGl0b3Iuc3dhcENvbHModGFibGUsIHRoaXMuY2VsbC5qLCB0aGlzLmNlbGwuaiAtIDEpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5jb2xPcEJhckVsLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6ICdvYi10YWJsZS1lbmhhbmNlci1jb2wtYmFyLWJ1dHRvbidcblx0XHR9LCAoZWwpID0+IHtcblx0XHRcdGVsLmlubmVySFRNTCA9IGluc2VydFJpZ2h0SWNvbjtcblx0XHRcdGVsLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHRhYmxlID0gYXdhaXQgcGx1Z2luLnRhYmxlRWRpdG9yLmdldFRhYmxlKHRoaXMuY2VsbC50YWJsZUxpbmUpO1xuXHRcdFx0XHRpZiAoIXRhYmxlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignQ2Fubm90IGdldCB0YWJsZS4nKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4udGFibGVFZGl0b3IuaW5zZXJ0Q29sUmlnaHQodGFibGUsIHRoaXMuY2VsbC5qKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMucm93T3BCYXJFbC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiAnb2ItdGFibGUtZW5oYW5jZXItcm93LWJhci1idXR0b24nXG5cdFx0fSwgKGVsKSA9PiB7XG5cdFx0XHRlbC5pbm5lckhUTUwgPSBkZWxldGVJY29uO1xuXHRcdFx0ZWwub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuY2VsbC5pID09IDApIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdZb3UgY2FuXFwndCBkZWxldGUgdGhlIGhlYWRlciBvZiBhIHRhYmxlLicpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCB0YWJsZSA9IGF3YWl0IHBsdWdpbi50YWJsZUVkaXRvci5nZXRUYWJsZSh0aGlzLmNlbGwudGFibGVMaW5lKTtcblx0XHRcdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBnZXQgdGFibGUuJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnRhYmxlRWRpdG9yLmRlbGV0ZVJvdyh0YWJsZSwgdGhpcy5jZWxsLmkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5jb2xPcEJhckVsLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6ICdvYi10YWJsZS1lbmhhbmNlci1jb2wtYmFyLWJ1dHRvbidcblx0XHR9LCAoZWwpID0+IHtcblx0XHRcdGVsLmlubmVySFRNTCA9IGRlbGV0ZUljb247XG5cdFx0XHRlbC5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCB0YWJsZSA9IGF3YWl0IHBsdWdpbi50YWJsZUVkaXRvci5nZXRUYWJsZSh0aGlzLmNlbGwudGFibGVMaW5lKTtcblx0XHRcdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBnZXQgdGFibGUuJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnRhYmxlRWRpdG9yLmRlbGV0ZUNvbCh0YWJsZSwgdGhpcy5jZWxsLmopO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5jb2xPcEJhckVsLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6ICdvYi10YWJsZS1lbmhhbmNlci1jb2wtYmFyLWJ1dHRvbidcblx0XHR9LCAoZWwpID0+IHtcblx0XHRcdGVsLmlubmVySFRNTCA9IG1vdmVSaWdodEljb247XG5cdFx0XHRlbC5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCB0YWJsZSA9IGF3YWl0IHBsdWdpbi50YWJsZUVkaXRvci5nZXRUYWJsZSh0aGlzLmNlbGwudGFibGVMaW5lKTtcblx0XHRcdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBnZXQgdGFibGUuJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IGNvbE51bSA9IHRhYmxlLmZvcm1hdExpbmUubGVuZ3RoO1xuXHRcdFx0XHRpZiAodGhpcy5jZWxsLmogPT0gY29sTnVtIC0gMSkge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0N1cnJlbnQgY29sdW1uIGlzIGFscmVhZHkgdGhlIHJpZ2h0bW9zdCBjb2x1bW4uJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnRhYmxlRWRpdG9yLnN3YXBDb2xzKHRhYmxlLCB0aGlzLmNlbGwuaiwgdGhpcy5jZWxsLmogKyAxKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuY29sT3BCYXJFbC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiAnb2ItdGFibGUtZW5oYW5jZXItY29sLWJhci1idXR0b24nXG5cdFx0fSwgKGVsKSA9PiB7XG5cdFx0XHRlbC5pbm5lckhUTUwgPSBjbG9uZUljb247XG5cdFx0XHRlbC5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCB0YWJsZSA9IGF3YWl0IHBsdWdpbi50YWJsZUVkaXRvci5nZXRUYWJsZSh0aGlzLmNlbGwudGFibGVMaW5lKTtcblx0XHRcdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBnZXQgdGFibGUuJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IGNvbCA9IHRhYmxlLmNlbGxzLm1hcChyb3cgPT4gcm93W3RoaXMuY2VsbC5qXSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnRhYmxlRWRpdG9yLmluc2VydENvbFJpZ2h0KHRhYmxlLCB0aGlzLmNlbGwuaiwgY29sKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMucm93T3BCYXJFbC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiAnb2ItdGFibGUtZW5oYW5jZXItcm93LWJhci1idXR0b24nXG5cdFx0fSwgKGVsKSA9PiB7XG5cdFx0XHRlbC5pbm5lckhUTUwgPSBjbG9uZUljb247XG5cdFx0XHRlbC5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCB0YWJsZSA9IGF3YWl0IHBsdWdpbi50YWJsZUVkaXRvci5nZXRUYWJsZSh0aGlzLmNlbGwudGFibGVMaW5lKTtcblx0XHRcdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBnZXQgdGFibGUuJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnRhYmxlRWRpdG9yLmluc2VydFJvd0JlbG93KHRhYmxlLCB0aGlzLmNlbGwuaSwgdGFibGUuY2VsbHNbdGhpcy5jZWxsLmldKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFx1NkVEQVx1NTJBOFx1NjVGNlx1NEUwRFx1NjYzRVx1NzkzQVxuXHRcdHBsdWdpbi5yZWdpc3RlckRvbUV2ZW50KGFjdGl2ZURvY3VtZW50LCAnc2Nyb2xsJywgKGUpID0+IHtcblx0XHRcdHRoaXMuY29sT3BCYXJFbC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuXHRcdFx0dGhpcy5yb3dPcEJhckVsLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cdFx0XHR0aGlzLmFjdGl2ZU9wQmFycyA9IFtdO1xuXHRcdH0sIHRydWUpO1xuXG5cdFx0aWYgKGFjdGl2ZURvY3VtZW50KSB7XG5cdFx0XHRhY3RpdmVEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMucm93T3BCYXJFbCk7XG5cdFx0XHRhY3RpdmVEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuY29sT3BCYXJFbCk7XG5cdFx0fVxuXHR9XG5cblx0dHJ5U2hvd0ZvcihjZWxsRWw6IEhUTUxUYWJsZUNlbGxFbGVtZW50KSB7XG5cdFx0aWYgKHRoaXMucGx1Z2luLmlzSW5SZWFkaW5nVmlldygpKVxuXHRcdFx0cmV0dXJuO1xuXHRcdC8vIFx1NkUwNVx1OTY2NFx1OTY5MFx1ODVDRlx1OEJBMVx1NjVGNlxuXHRcdGlmICh0aGlzLmhpZGVUaW1lb3V0KVxuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpO1xuXHRcdHRoaXMuY2VsbCA9IGdldENlbGxJbmZvKGNlbGxFbCwgdGhpcy5wbHVnaW4pITtcblx0XHQvLyBjZWxsIFx1NEUzQVx1N0IyQ1x1NEUwMFx1NTIxNyBjZWxsXHVGRjBDXHU1QzU1XHU3OTNBXHU4ODRDXHU2NENEXHU0RjVDIHRvb2xiYXJcblx0XHRpZiAodGhpcy5jZWxsLmogPT0gMCkge1xuXHRcdFx0dGhpcy5hY3RpdmVPcEJhcnMucHVzaCh0aGlzLnJvd09wQmFyRWwpO1xuXHRcdFx0dGhpcy5yb3dPcEJhckVsLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG5cdFx0XHR0aGlzLmNvbE9wQmFyRWwuc3R5bGUuekluZGV4ID0gJzk5Jztcblx0XHRcdGNvbnN0IGNlbGxSZWN0ID0gY2VsbEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0Y29uc3QgdG9vbEJhclJlY3QgPSB0aGlzLnJvd09wQmFyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHR0aGlzLnJvd09wQmFyRWwuc3R5bGUudG9wID0gYCR7Y2VsbFJlY3QudG9wfXB4YDtcblx0XHRcdHRoaXMucm93T3BCYXJFbC5zdHlsZS5sZWZ0ID0gYCR7Y2VsbFJlY3QubGVmdCAtIHRvb2xCYXJSZWN0LndpZHRofXB4YDtcblx0XHRcdHRoaXMucm93T3BCYXJFbC5zdHlsZS5oZWlnaHQgPSBgJHtjZWxsUmVjdC5oZWlnaHR9cHhgOyAvLyBcdTlBRDhcdTVFQTZcdTRGRERcdTYzMDFcdTU0OEMgY2VsbCBcdTRFMDBcdTgxRjRcblx0XHR9XG5cdFx0Ly8gY2VsbCBcdTRFM0FcdTdCMkNcdTRFMDBcdTg4NENcdTc2ODQgY2VsbFx1RkYwQ1x1NUM1NVx1NzkzQVx1NTIxN1x1NjRDRFx1NEY1QyB0b29sYmFyXG5cdFx0aWYgKHRoaXMuY2VsbC5pID09IDApIHtcblx0XHRcdHRoaXMuYWN0aXZlT3BCYXJzLnB1c2godGhpcy5jb2xPcEJhckVsKTtcblx0XHRcdHRoaXMuY29sT3BCYXJFbC5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuXHRcdFx0dGhpcy5jb2xPcEJhckVsLnN0eWxlLnpJbmRleCA9ICc5OSc7XG5cdFx0XHRjb25zdCBjZWxsUmVjdCA9IGNlbGxFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRcdGNvbnN0IHRvb2xCYXJSZWN0ID0gdGhpcy5jb2xPcEJhckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0dGhpcy5jb2xPcEJhckVsLnN0eWxlLnRvcCA9IGAke2NlbGxSZWN0LnRvcCAtIHRvb2xCYXJSZWN0LmhlaWdodH1weGA7XG5cdFx0XHR0aGlzLmNvbE9wQmFyRWwuc3R5bGUubGVmdCA9IGAke2NlbGxSZWN0LmxlZnR9cHhgO1xuXHRcdFx0dGhpcy5jb2xPcEJhckVsLnN0eWxlLndpZHRoID0gYCR7Y2VsbFJlY3Qud2lkdGh9cHhgOyAvLyBcdTVCQkRcdTVFQTZcdTRGRERcdTYzMDFcdTU0OEMgY2VsbCBcdTRFMDBcdTgxRjRcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogXHU1OTgyXHU2NzlDXHU1NzI4IDIwMG1zIFx1NkNBMVx1NjcwOVx1NzlGQlx1NTE2NSB0b29sYmFyXHVGRjBDXHU1MjE5XHU5NjkwXHU4NUNGIHRvb2xiYXJcblx0ICpcblx0ICogXHU1NDI2XHU1MjE5XHU1RjUzXHU5RjIwXHU2ODA3XHU3OUZCXHU1MUZBIHRvb2xiYXIgMjAwbXMgXHU1NDBFXHU5NjkwXHU4NUNGIHRvb2xiYXJcblx0ICovXG5cdHRyeUhpZGUodGltZW91dDogbnVtYmVyKSB7XG5cdFx0dGhpcy5oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0dGhpcy5jb2xPcEJhckVsLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cdFx0XHR0aGlzLnJvd09wQmFyRWwuc3R5bGUub3BhY2l0eSA9ICcwJztcblx0XHRcdHRoaXMuY29sT3BCYXJFbC5zdHlsZS56SW5kZXggPSAnLTEnO1xuXHRcdFx0dGhpcy5yb3dPcEJhckVsLnN0eWxlLnpJbmRleCA9ICctMSc7XG5cdFx0XHR0aGlzLmFjdGl2ZU9wQmFycyA9IFtdO1xuXHRcdH0sIHRpbWVvdXQpO1xuXHRcdGNvbnN0IHN0b3BIaWRlVGltZW91dCA9IChlOiBhbnkpID0+IHtcblx0XHRcdGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lb3V0KTtcblx0XHRcdHRoaXMuYWN0aXZlT3BCYXJzLmZvckVhY2goKHRvb2xCYXJFbCkgPT4ge1xuXHRcdFx0XHR0b29sQmFyRWwub25tb3VzZW91dCA9IChlKSA9PiB7XG5cdFx0XHRcdFx0Ly8gXHU3MjM2XHU3RUE3XHU3OUZCXHU1MTY1XHU4MUVBXHU1REYxXHVGRjBDXHU0RTBEXHU4OUU2XHU1M0QxXHU3OUZCXHU1MUZBXHU0RThCXHU0RUY2XG5cdFx0XHRcdFx0aWYgKChlLnJlbGF0ZWRUYXJnZXQgaW5zdGFuY2VvZiBOb2RlKSAmJiB0b29sQmFyRWwuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KSlcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR0aGlzLnRyeUhpZGUoNTAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHRoaXMuYWN0aXZlT3BCYXJzLmZvckVhY2goKHRvb2xiYXIpID0+IHtcblx0XHRcdHRvb2xiYXIub25tb3VzZWVudGVyID0gc3RvcEhpZGVUaW1lb3V0O1xuXHRcdH0pO1xuXHR9XG5cblx0b25VbmxvYWQoKSB7XG5cdFx0dGhpcy5jb2xPcEJhckVsLnJlbW92ZSgpO1xuXHRcdHRoaXMucm93T3BCYXJFbC5yZW1vdmUoKTtcblx0fVxufVxuIiwgImltcG9ydCB7QmFzZUNvbXBvbmVudCwgQnV0dG9uQ29tcG9uZW50LCBDbG9zZWFibGVDb21wb25lbnQsIEVkaXRvciwgTWVudSwgTWVudUl0ZW0sIE5vdGljZX0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgVGFibGVFbmhhbmNlcjIgZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7Z2V0Q2VsbEluZm99IGZyb20gXCIuL2dsb2JhbFwiO1xuaW1wb3J0IHtpbnNlcnRSb3dCZWxvdywgaW5zZXJ0Q29sUmlnaHQsIGNsb25lUm93LCBjbG9uZUNvbCwgZGVsUm93LCBkZWxDb2x9IGZyb20gXCIuL2ljb25cIjtcbmltcG9ydCB7RWRpdG9yVmlld30gZnJvbSBcIkBjb2RlbWlycm9yL3ZpZXdcIjtcblxuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbnMgPSAoXG5cdG1lbnU6IE1lbnUsXG5cdHBsdWdpbjogVGFibGVFbmhhbmNlcjIsXG5cdHsgdGFibGVMaW5lLCBpLCBqIH06IHsgdGFibGVMaW5lOiBudW1iZXIsIGk6IG51bWJlciwgajogbnVtYmVyIH1cbikgPT4ge1xuXHRjb25zdCBvbGRPbkxvYWQgPSBtZW51Lm9ubG9hZDtcblx0bWVudS5vbmxvYWQgPSAoKSA9PiB7XG5cdFx0b2xkT25Mb2FkLmNhbGwobWVudSk7IC8vIGR5bmFtaWMgb3ZlcnJpZGVcblx0XHRjb25zdCBtZW51RG9tID0gKG1lbnUgYXMgYW55KS5kb20gYXMgSFRNTEVsZW1lbnQ7XG5cdFx0Y29uc3QgY29udGFpbmVyRWwgPSBjcmVhdGVEaXYoeyBjbHM6IFsnb2ItdGFibGUtZW5oYW5jZXInLCAnYnV0dG9uLW1lbnUnXX0pO1xuXHRcdC8vIEJ1dHRvbnNcblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldFRvb2x0aXAoJ0luc2VydCByb3cgYmVsb3cnKVxuXHRcdFx0LnNldENsYXNzKCdjbGlja2FibGUtaWNvbicpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHBsdWdpbi5kb25lRWRpdCgpOyAvLyBcdTUxNDhcdTRGRERcdTVCNThcdTY2RjRcdTY1MzlcdTUxOERcdTgzQjdcdTUzRDYgdGFibGVcdUZGMENcdTk2MzJcdTZCNjJcdTUzRDZcdTUyMzBcdThGQzdcdTY1RjZcdTc2ODRcdTg4NjhcdTY4M0NcdTUxODVcdTVCQjlcblx0XHRcdFx0Y29uc3QgdGFibGUgPSBwbHVnaW4udGFibGVFZGl0b3IuZ2V0VGFibGUodGFibGVMaW5lKTtcblx0XHRcdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ2Nhbm5vdCBsb2NhdGUgdGFibGUgd2hlbiB0cnlpbmcgdG8gaW5zZXJ0IHJvdyBiZWxvdyAnKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgcGx1Z2luLnRhYmxlRWRpdG9yLmluc2VydFJvd0JlbG93KHRhYmxlLCBpKTtcblx0XHRcdH0pXG5cdFx0XHQudGhlbihidXR0b24gPT4gYnV0dG9uLmJ1dHRvbkVsLmlubmVySFRNTCA9IGluc2VydFJvd0JlbG93KTtcblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldFRvb2x0aXAoJ0luc2VydCBjb2x1bW4gcmlnaHQnKVxuXHRcdFx0LnNldENsYXNzKCdjbGlja2FibGUtaWNvbicpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHBsdWdpbi5kb25lRWRpdCgpO1xuXHRcdFx0XHRjb25zdCB0YWJsZSA9IHBsdWdpbi50YWJsZUVkaXRvci5nZXRUYWJsZSh0YWJsZUxpbmUpO1xuXHRcdFx0XHRpZiAoIXRhYmxlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignY2Fubm90IGxvY2F0ZSB0YWJsZSB3aGVuIHRyeWluZyB0byBpbnNlcnQgY29sdW1uIGJlbG93ICcpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRhd2FpdCBwbHVnaW4udGFibGVFZGl0b3IuaW5zZXJ0Q29sUmlnaHQodGFibGUsIGopO1xuXHRcdFx0fSlcblx0XHRcdC50aGVuKGJ1dHRvbiA9PiBidXR0b24uYnV0dG9uRWwuaW5uZXJIVE1MID0gaW5zZXJ0Q29sUmlnaHQpO1xuXHRcdG5ldyBCdXR0b25Db21wb25lbnQoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0VG9vbHRpcCgnQ2xvbmUgcm93Jylcblx0XHRcdC5zZXRDbGFzcygnY2xpY2thYmxlLWljb24nKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRhd2FpdCBwbHVnaW4uZG9uZUVkaXQoKTtcblx0XHRcdFx0Y29uc3QgdGFibGUgPSBwbHVnaW4udGFibGVFZGl0b3IuZ2V0VGFibGUodGFibGVMaW5lKTtcblx0XHRcdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ2Nhbm5vdCBsb2NhdGUgdGFibGUgd2hlbiB0cnlpbmcgdG8gY29weSByb3cgYmVsb3cgJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IHBsdWdpbi50YWJsZUVkaXRvci5pbnNlcnRSb3dCZWxvdyh0YWJsZSwgaSwgdGFibGUuY2VsbHNbaV0pO1xuXHRcdFx0fSlcblx0XHRcdC50aGVuKGJ1dHRvbiA9PiBidXR0b24uYnV0dG9uRWwuaW5uZXJIVE1MID0gY2xvbmVSb3cpO1xuXHRcdG5ldyBCdXR0b25Db21wb25lbnQoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0VG9vbHRpcCgnQ2xvbmUgY29sdW1uJylcblx0XHRcdC5zZXRDbGFzcygnY2xpY2thYmxlLWljb24nKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRhd2FpdCBwbHVnaW4uZG9uZUVkaXQoKTtcblx0XHRcdFx0Y29uc3QgdGFibGUgPSBwbHVnaW4udGFibGVFZGl0b3IuZ2V0VGFibGUodGFibGVMaW5lKTtcblx0XHRcdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ2Nhbm5vdCBsb2NhdGUgdGFibGUgd2hlbiB0cnlpbmcgdG8gY29weSByb3cgYmVsb3cgJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IGNvbCA9IHRhYmxlLmNlbGxzLm1hcChyb3cgPT4gcm93W2pdKTtcblx0XHRcdFx0YXdhaXQgcGx1Z2luLnRhYmxlRWRpdG9yLmluc2VydENvbFJpZ2h0KHRhYmxlLCBqLCBjb2wpO1xuXHRcdFx0fSlcblx0XHRcdC50aGVuKGJ1dHRvbiA9PiBidXR0b24uYnV0dG9uRWwuaW5uZXJIVE1MID0gY2xvbmVDb2wpO1xuXHRcdG5ldyBCdXR0b25Db21wb25lbnQoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0VG9vbHRpcCgnRGVsZXRlIHJvdycpXG5cdFx0XHQuc2V0Q2xhc3MoJ2NsaWNrYWJsZS1pY29uJylcblx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0YXdhaXQgcGx1Z2luLmRvbmVFZGl0KCk7XG5cdFx0XHRcdGNvbnN0IHRhYmxlID0gcGx1Z2luLnRhYmxlRWRpdG9yLmdldFRhYmxlKHRhYmxlTGluZSk7XG5cdFx0XHRcdGlmICghdGFibGUpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdjYW5ub3QgbG9jYXRlIHRhYmxlIHdoZW4gdHJ5aW5nIHRvIGNvcHkgcm93IGJlbG93ICcpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRhd2FpdCBwbHVnaW4udGFibGVFZGl0b3IuZGVsZXRlUm93KHRhYmxlLCBpKTtcblx0XHRcdH0pXG5cdFx0XHQudGhlbihidXR0b24gPT4gYnV0dG9uLmJ1dHRvbkVsLmlubmVySFRNTCA9IGRlbFJvdylcblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldFRvb2x0aXAoJ0RlbGV0ZSBjb2x1bW4nKVxuXHRcdFx0LnNldENsYXNzKCdjbGlja2FibGUtaWNvbicpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHBsdWdpbi5kb25lRWRpdCgpO1xuXHRcdFx0XHRjb25zdCB0YWJsZSA9IHBsdWdpbi50YWJsZUVkaXRvci5nZXRUYWJsZSh0YWJsZUxpbmUpO1xuXHRcdFx0XHRpZiAoIXRhYmxlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignY2Fubm90IGxvY2F0ZSB0YWJsZSB3aGVuIHRyeWluZyB0byBjb3B5IHJvdyBiZWxvdyAnKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgcGx1Z2luLnRhYmxlRWRpdG9yLmRlbGV0ZUNvbCh0YWJsZSwgaik7XG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oYnV0dG9uID0+IGJ1dHRvbi5idXR0b25FbC5pbm5lckhUTUwgPSBkZWxDb2wpO1xuXHRcdG5ldyBCdXR0b25Db21wb25lbnQoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0VG9vbHRpcCgnTW92ZSBjb2x1bW4gbGVmdCcpXG5cdFx0XHQuc2V0SWNvbignY2hldnJvbi1sZWZ0Jylcblx0XHRcdC5zZXRDbGFzcygnY2xpY2thYmxlLWljb24nKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRhd2FpdCBwbHVnaW4uZG9uZUVkaXQoKTtcblx0XHRcdFx0Y29uc3QgdGFibGUgPSBwbHVnaW4udGFibGVFZGl0b3IuZ2V0VGFibGUodGFibGVMaW5lKTtcblx0XHRcdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ2Nhbm5vdCBsb2NhdGUgdGFibGUgd2hlbiB0cnlpbmcgdG8gY29weSByb3cgYmVsb3cgJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChqID09IDApIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdDdXJyZW50IGNvbHVtbiBpcyBhbHJlYWR5IHRoZSBsZWZ0bW9zdCBjb2x1bW4uJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IHBsdWdpbi50YWJsZUVkaXRvci5zd2FwQ29scyh0YWJsZSwgaiwgaiAtIDEpO1xuXHRcdFx0fSk7XG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXJFbClcblx0XHRcdC5zZXRUb29sdGlwKCdNb3ZlIGNvbHVtbiByaWdodCcpXG5cdFx0XHQuc2V0SWNvbignY2hldnJvbi1yaWdodCcpXG5cdFx0XHQuc2V0Q2xhc3MoJ2NsaWNrYWJsZS1pY29uJylcblx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0YXdhaXQgcGx1Z2luLmRvbmVFZGl0KCk7XG5cdFx0XHRcdGNvbnN0IHRhYmxlID0gcGx1Z2luLnRhYmxlRWRpdG9yLmdldFRhYmxlKHRhYmxlTGluZSk7XG5cdFx0XHRcdGlmICghdGFibGUpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdjYW5ub3QgbG9jYXRlIHRhYmxlIHdoZW4gdHJ5aW5nIHRvIGNvcHkgcm93IGJlbG93ICcpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBjb2xOdW0gPSB0YWJsZS5mb3JtYXRMaW5lLmxlbmd0aDtcblx0XHRcdFx0aWYgKGogPT0gY29sTnVtIC0gMSkge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0N1cnJlbnQgY29sdW1uIGlzIGFscmVhZHkgdGhlIHJpZ2h0bW9zdCBjb2x1bW4uJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IHBsdWdpbi50YWJsZUVkaXRvci5zd2FwQ29scyh0YWJsZSwgaiwgaiArIDEpO1xuXHRcdFx0fSk7XG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXJFbClcblx0XHRcdC5zZXRUb29sdGlwKCdNb3ZlIHJvdyB1cHdhcmQnKVxuXHRcdFx0LnNldEljb24oJ2NoZXZyb24tdXAnKVxuXHRcdFx0LnNldENsYXNzKCdjbGlja2FibGUtaWNvbicpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHBsdWdpbi5kb25lRWRpdCgpO1xuXHRcdFx0XHRjb25zdCB0YWJsZSA9IHBsdWdpbi50YWJsZUVkaXRvci5nZXRUYWJsZSh0YWJsZUxpbmUpO1xuXHRcdFx0XHRpZiAoIXRhYmxlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignY2Fubm90IGxvY2F0ZSB0YWJsZSB3aGVuIHRyeWluZyB0byBjb3B5IHJvdyBiZWxvdyAnKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGkgPT0gMSkge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0N1cnJlbnQgY29sdW1uIGlzIGFscmVhZHkgdGhlIHRvcCByb3cuJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IHBsdWdpbi50YWJsZUVkaXRvci5zd2FwUm93cyh0YWJsZSwgaSwgaSAtIDEpO1xuXHRcdFx0fSk7XG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXJFbClcblx0XHRcdC5zZXRUb29sdGlwKCdNb3ZlIHJvdyBkb3duJylcblx0XHRcdC5zZXRJY29uKCdjaGV2cm9uLWRvd24nKVxuXHRcdFx0LnNldENsYXNzKCdjbGlja2FibGUtaWNvbicpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHBsdWdpbi5kb25lRWRpdCgpO1xuXHRcdFx0XHRjb25zdCB0YWJsZSA9IHBsdWdpbi50YWJsZUVkaXRvci5nZXRUYWJsZSh0YWJsZUxpbmUpO1xuXHRcdFx0XHRpZiAoIXRhYmxlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignY2Fubm90IGxvY2F0ZSB0YWJsZSB3aGVuIHRyeWluZyB0byBjb3B5IHJvdyBiZWxvdyAnKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3Qgcm93TnVtID0gdGFibGUuY2VsbHMubGVuZ3RoO1xuXHRcdFx0XHRpZiAoaSA9PSByb3dOdW0gLSAxKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZSgnQ3VycmVudCBjb2x1bW4gaXMgYWxyZWFkeSB0aGUgYm90dG9tIHJvdy4nKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgcGx1Z2luLnRhYmxlRWRpdG9yLnN3YXBSb3dzKHRhYmxlLCBpLCBpICsgMSk7XG5cdFx0XHR9KTtcblx0XHRjb25zdCBzZXRDb2xBbGlnbiA9IChhbGlnbmVkOiAnbGVmdCcgfCAnY2VudGVyJyB8ICdyaWdodCcpID0+IGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHBsdWdpbi5kb25lRWRpdCgpO1xuXHRcdFx0Y29uc3QgdGFibGUgPSBwbHVnaW4udGFibGVFZGl0b3IuZ2V0VGFibGUodGFibGVMaW5lKTtcblx0XHRcdGlmICghdGFibGUpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcignY2Fubm90IGxvY2F0ZSB0YWJsZSB3aGVuIHRyeWluZyB0byBjb3B5IHJvdyBiZWxvdyAnKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0YXdhaXQgcGx1Z2luLnRhYmxlRWRpdG9yLnNldENvbEFsaWduZWQodGFibGUsIGosIGFsaWduZWQpO1xuXHRcdH07XG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXJFbClcblx0XHRcdC5zZXRUb29sdGlwKCdDZW50ZXIgYWxpZ24nKVxuXHRcdFx0LnNldEljb24oJ2FsaWduLWNlbnRlcicpXG5cdFx0XHQuc2V0Q2xhc3MoJ2NsaWNrYWJsZS1pY29uJylcblx0XHRcdC5vbkNsaWNrKHNldENvbEFsaWduKCdjZW50ZXInKSk7XG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXJFbClcblx0XHRcdC5zZXRUb29sdGlwKCdMZWZ0IGFsaWduJylcblx0XHRcdC5zZXRJY29uKCdhbGlnbi1sZWZ0Jylcblx0XHRcdC5zZXRDbGFzcygnY2xpY2thYmxlLWljb24nKVxuXHRcdFx0Lm9uQ2xpY2soc2V0Q29sQWxpZ24oJ2xlZnQnKSk7XG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXJFbClcblx0XHRcdC5zZXRUb29sdGlwKCdSaWdodCBhbGlnbicpXG5cdFx0XHQuc2V0SWNvbignYWxpZ24tcmlnaHQnKVxuXHRcdFx0LnNldENsYXNzKCdjbGlja2FibGUtaWNvbicpXG5cdFx0XHQub25DbGljayhzZXRDb2xBbGlnbigncmlnaHQnKSk7XG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXJFbClcblx0XHRcdC5zZXRUb29sdGlwKCdTb3J0IGFzY2VuZGluZycpXG5cdFx0XHQuc2V0SWNvbignc29ydC1hc2MnKVxuXHRcdFx0LnNldENsYXNzKCdjbGlja2FibGUtaWNvbicpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHBsdWdpbi5kb25lRWRpdCgpO1xuXHRcdFx0XHRjb25zdCB0YWJsZSA9IHBsdWdpbi50YWJsZUVkaXRvci5nZXRUYWJsZSh0YWJsZUxpbmUpO1xuXHRcdFx0XHRpZiAoIXRhYmxlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignY2Fubm90IGxvY2F0ZSB0YWJsZSB3aGVuIHRyeWluZyBzb3J0IHRhYmxlICcpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRhd2FpdCBwbHVnaW4udGFibGVFZGl0b3Iuc29ydEJ5Q29sKHRhYmxlLCBqLCAnYWVzJyk7XG5cdFx0XHR9KTtcblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldFRvb2x0aXAoJ1NvcnQgZGVzY2VuZGluZycpXG5cdFx0XHQuc2V0SWNvbignc29ydC1kZXNjJylcblx0XHRcdC5zZXRDbGFzcygnY2xpY2thYmxlLWljb24nKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRhd2FpdCBwbHVnaW4uZG9uZUVkaXQoKTtcblx0XHRcdFx0Y29uc3QgdGFibGUgPSBwbHVnaW4udGFibGVFZGl0b3IuZ2V0VGFibGUodGFibGVMaW5lKTtcblx0XHRcdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ2Nhbm5vdCBsb2NhdGUgdGFibGUgd2hlbiB0cnlpbmcgc29ydCB0YWJsZSAnKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgcGx1Z2luLnRhYmxlRWRpdG9yLnNvcnRCeUNvbCh0YWJsZSwgaiwgJ2Rlc2MnKTtcblx0XHRcdH0pO1xuXG5cdFx0Y29uc3QgZGl2aWRlckVsID0gY3JlYXRlRGl2KHsgY2xzOiAnbWVudS1zZXBhcmF0b3InIH0pO1xuXHRcdG1lbnVEb20ucHJlcGVuZChkaXZpZGVyRWwpO1xuXHRcdG1lbnVEb20ucHJlcGVuZChjb250YWluZXJFbCk7XG5cdH1cbn1cbiIsICJpbXBvcnQge0VkaXRvciwgTWVudX0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgVGFibGVFbmhhbmNlcjIgZnJvbSBcIi4uL21haW5cIjtcblxuZXhwb3J0IGNvbnN0IGFkZFRhYmxlR2VuZXJhdG9yID0gKFxuXHRtZW51OiBNZW51LFxuXHRwbHVnaW46IFRhYmxlRW5oYW5jZXIyLFxuXHRlZGl0b3I6IEVkaXRvclxuKSA9PiB7XG5cdG1lbnUuYWRkSXRlbShtZW51SXRlbSA9PiB7XG5cdFx0bWVudUl0ZW0uc2V0VGl0bGUoJ0NyZWF0ZSBuZXcgdGFibGUnKTtcblx0XHRtZW51SXRlbS5zZXRJY29uKCd0YWJsZScpO1xuXHRcdG1lbnVJdGVtLm9uQ2xpY2soYXN5bmMgZSA9PiB7XG5cdFx0XHQvLyBcdThCQTFcdTdCOTdcdTUxNDlcdTY4MDdcdTRGNERcdTdGNkVcblx0XHRcdGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoJ2Zyb20nKTtcblx0XHRcdGNvbnN0IGVkaXRvcjIgPSBlZGl0b3IgYXMgYW55O1xuXHRcdFx0bGV0IGNvb3JkOiBhbnk7XG5cdFx0XHRpZiAoZWRpdG9yMi5jb29yZHNBdFBvcykge1xuXHRcdFx0XHRjb25zdCBvZmZzZXQgPSBlZGl0b3IucG9zVG9PZmZzZXQoY3Vyc29yKTtcblx0XHRcdFx0Y29vcmQgPSBlZGl0b3IyLmNtLmNvb3Jkc0F0UG9zPy4ob2Zmc2V0KSA/PyBlZGl0b3IyLmNvb3Jkc0F0UG9zKG9mZnNldCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdDYW5ub3QgZ2V0IGN1cnNvciBjb29yZGluYXRlJyk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdC8vIFx1NTcyOFx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVx1NjI1M1x1NUYwMCB0YWJsZUdlbmVyYXRvclxuXHRcdFx0Y29uc3QgdGFibGVHZW5lcmF0b3IgPSBuZXcgVGFibGVHZW5lcmF0b3IocGx1Z2luKTtcblx0XHRcdHRhYmxlR2VuZXJhdG9yLnNob3dBdFBvc2l0aW9uKHsgeDogY29vcmQubGVmdCwgeTogY29vcmQuYm90dG9tIH0pO1xuXHRcdH0pO1xuXHR9KTtcbn1cblxuY2xhc3MgVGFibGVHZW5lcmF0b3IgZXh0ZW5kcyBNZW51IHtcblxuXHRwcml2YXRlIHBsdWdpbjogVGFibGVFbmhhbmNlcjI7XG5cblx0Y29uc3RydWN0b3IocGx1Z2luOiBUYWJsZUVuaGFuY2VyMikge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5hZGRJdGVtKGl0ZW0gPT4gaXRlbS5zZXREaXNhYmxlZCh0cnVlKSk7IC8vIFx1NkRGQlx1NTJBMFx1NEUwMFx1NEUyQVx1N0E3QSBpdGVtXHVGRjBDXHU5NjMyXHU2QjYyXHU0RTBEXHU2NjNFXHU3OTNBXG5cdH1cblxuXHRvbmxvYWQoKSB7XG5cdFx0c3VwZXIub25sb2FkKCk7XG5cdFx0Y29uc3QgbWVudURvbSA9ICh0aGlzIGFzIGFueSkuZG9tIGFzIEhUTUxFbGVtZW50O1xuXHRcdGNvbnN0IGZyYWcgPSBhY3RpdmVEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdFx0Y29uc3QgY29udGFpbmVyRWwgPSBmcmFnLmNyZWF0ZURpdih7IGNsczogJ3RhYmxlLWdlbmVyYXRvci1jb250YWluZXInIH0pO1xuXHRcdC8vIFx1ODg0Q1x1NTIxN1x1OEJBMVx1NjU3MFx1NTY2OFx1NTJBMFx1NEUwQSBtZW51LWl0ZW1cdUZGMENcdTRGN0ZcdTY4MzdcdTVGMEZcdTU0OEMgbWVudSBcdTY2RjRcdTY0MkRcblx0XHRjb25zdCBjb3VudGVyID0gZnJhZy5jcmVhdGVEaXYoeyBjbHM6IFsndGFibGUtZ2VuZXJhdG9yLWNvdW50ZXInLCAnbWVudS1pdGVtJ10gfSk7XG5cdFx0Ly8gVE9ETyBcdTg4NENcdTUyMTdcdTY1NzBcdTU5ODJcdTRGNTVcdTc4NkVcdTVCOUEgaiBcdTUyMTdcdTVCRjlcdTVFOTRcdTc2ODRcdTY4M0NcdTVCNTAgZWxcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IDc7IGkgKyspIHtcblx0XHRcdGZvciAobGV0IGogPSAwOyBqIDwgNzsgaiArKykge1xuXHRcdFx0XHRjb25zdCBncmlkRWwgPSBjcmVhdGVEaXYoeyBjbHM6ICd0YWJsZS1nZW5lcmF0b3ItZ3JpZCcgfSk7XG5cdFx0XHRcdGdyaWRFbC5zZXRBdHRyKCdpJywgaSk7XG5cdFx0XHRcdGdyaWRFbC5zZXRBdHRyKCdqJywgaik7XG5cdFx0XHRcdC8vIFx1NzBCOVx1NTFGQlx1NjgzQ1x1NUI1MFx1NjVGNlx1RkYwQ1x1NTIxQlx1NUVGQVx1NUJGOVx1NUU5NFx1NTkyN1x1NUMwRlx1NzY4NFx1ODg2OFx1NjgzQ1xuXHRcdFx0XHRncmlkRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0Ly8gaSArIDEgXHU4ODRDXHVGRjBDaiArIDEgXHU1MjE3XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4udGFibGVFZGl0b3IuY3JlYXRlRW1wdHlUYWJsZShpICsgMSwgaiArIDEpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0Ly8gXHU5RjIwXHU2ODA3XHU4RkRCXHU1MTY1XHU2ODNDXHU1QjUwXHU2NUY2XHVGRjBDXHU2NkY0XHU2NUIwXHU2ODNDXHU1QjUwXHU5QUQ4XHU0RUFFXG5cdFx0XHRcdGdyaWRFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJsZS1nZW5lcmF0b3ItZ3JpZCcpLmZvckVhY2goZ3JpZEVsID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGkyID0gcGFyc2VJbnQoZ3JpZEVsLmdldEF0dHIoJ2knKSEpO1xuXHRcdFx0XHRcdFx0Y29uc3QgajIgPSBwYXJzZUludChncmlkRWwuZ2V0QXR0cignaicpISk7XG5cdFx0XHRcdFx0XHRpZiAoaTIgPiBpIHx8IGoyID4gaikgZ3JpZEVsLnJlbW92ZUNsYXNzKCdzZWxlY3QnKTtcblx0XHRcdFx0XHRcdGVsc2UgZ3JpZEVsLmFkZENsYXNzKCdzZWxlY3QnKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjb3VudGVyLmlubmVyVGV4dCA9IGAke2kgKyAxfSByb3dzICR7aiArIDF9IGNvbHVtbnNgO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHRjb250YWluZXJFbC5hcHBlbmQoZ3JpZEVsKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0bWVudURvbS5hcHBlbmQoZnJhZyk7XG5cdH1cbn1cbiIsICJpbXBvcnQge0FwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZ30gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgVGFibGVFbmhhbmNlcjIgZnJvbSBcIi4uL21haW5cIjtcblxuZXhwb3J0IGludGVyZmFjZSBUYWJsZUVuaGFuY2VyMlNldHRpbmdzIHtcblx0ZW5hYmxlQnV0dG9uUGFuZWw6IGJvb2xlYW4sXG5cdGVuYWJsZVRhYmxlR2VuZXJhdG9yOiBib29sZWFuLFxuXHRlbmFibGVGbG9hdGluZ1Rvb2xiYXI6IGJvb2xlYW4sXG5cdGFkanVzdFRhYmxlQ2VsbEhlaWdodDogYm9vbGVhbixcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFRhYmxlRW5oYW5jZXIyU2V0dGluZ3MgPSB7XG5cdGVuYWJsZUJ1dHRvblBhbmVsOiB0cnVlLFxuXHRlbmFibGVUYWJsZUdlbmVyYXRvcjogdHJ1ZSxcblx0ZW5hYmxlRmxvYXRpbmdUb29sYmFyOiBmYWxzZSxcblx0YWRqdXN0VGFibGVDZWxsSGVpZ2h0OiB0cnVlLFxufVxuXG5leHBvcnQgY2xhc3MgVGFibGVFbmhhbmNlcjJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cblx0cHJpdmF0ZSBwbHVnaW46IFRhYmxlRW5oYW5jZXIyO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFRhYmxlRW5oYW5jZXIyKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpIHtcblx0XHR0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XG5cdFx0Ly8gXHU2ODA3XHU5ODk4XG5cdFx0dGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdUYWJsZSBFbmhhbmNlciBTZXR0aW5ncycgfSk7XG5cdFx0Ly8gXHU4QkJFXHU3RjZFXHU5ODc5XG5cdFx0bmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdFbmFibGUgQnV0dG9uIFBhbmVsJylcblx0XHRcdC5hZGRUb2dnbGUoYyA9PiBjXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVCdXR0b25QYW5lbClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWwpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVCdXR0b25QYW5lbCA9IHZhbDtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXHRcdG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlIFRhYmxlIEdlbmVyYXRvcicpXG5cdFx0XHQuYWRkVG9nZ2xlKGMgPT4gY1xuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlVGFibGVHZW5lcmF0b3IpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlVGFibGVHZW5lcmF0b3IgPSB2YWw7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblx0XHRuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBGbG9hdGluZyBQYW5lbCcpXG5cdFx0XHQuYWRkVG9nZ2xlKGMgPT4gY1xuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRmxvYXRpbmdUb29sYmFyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUZsb2F0aW5nVG9vbGJhciA9IHZhbDtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXHRcdG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQWRqdXN0IEhlaWdodCBvZiBUYWJsZSBDZWxscycpXG5cdFx0XHQuc2V0RGVzYygnVGhlIGRlZmF1bHQgaGVpZ2h0IG9mIGFuIGVtcHR5IGNlbGwgaXMgdmVyeSBzaG9ydC4gQWN0aXZhdGUgdGhpcyB0byBpbmNyZWFzZSB0aGUgY2VsbCBoZWlnaHQgYW5kIG1ha2UgaXQgZWFzaWVyIHRvIGNsaWNrLicpXG5cdFx0XHQuYWRkVG9nZ2xlKGMgPT4gY1xuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWRqdXN0VGFibGVDZWxsSGVpZ2h0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbCkgPT4ge1xuXHRcdFx0XHRcdGlmICh2YWwgPT0gdHJ1ZSlcblx0XHRcdFx0XHRcdGFjdGl2ZURvY3VtZW50Py5ib2R5Py5hZGRDbGFzcygndGFibGUtaGVpZ2h0LWFkanVzdCcpO1xuXHRcdFx0XHRcdGVsc2UgYWN0aXZlRG9jdW1lbnQ/LmJvZHk/LnJlbW92ZUNsYXNzKCd0YWJsZS1oZWlnaHQtYWRqdXN0Jyk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYWRqdXN0VGFibGVDZWxsSGVpZ2h0ID0gdmFsO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cdH1cbn1cbiIsICJpbXBvcnQgVGFibGVFbmhhbmNlcjIgZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7TWFya2Rvd25Qb3N0UHJvY2Vzc29yLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0fSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7aG92ZXJlZENlbGxDbGFzc05hbWV9IGZyb20gXCIuL2dsb2JhbFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFibGVIb3ZlclBvc3RQcm9jZXNzb3IoXG5cdHBsdWdpbjogVGFibGVFbmhhbmNlcjJcbik6IE1hcmtkb3duUG9zdFByb2Nlc3NvciB7XG5cdHJldHVybiAoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0Y29uc3QgdGFibGVzID0gZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RhYmxlJyk7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YWJsZXMubGVuZ3RoOyBpICsrKSB7XG5cdFx0XHRjb25zdCB0YWJsZSA9IHRhYmxlc1tpXTtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGFibGUucm93cy5sZW5ndGg7IGkgKyspIHtcblx0XHRcdFx0Y29uc3Qgcm93ID0gdGFibGUucm93c1tpXTtcblx0XHRcdFx0Zm9yIChsZXQgaiA9IDA7IGogPCByb3cuY2VsbHMubGVuZ3RoOyBqICsrKSB7XG5cdFx0XHRcdFx0Y29uc3QgY2VsbCA9IHJvdy5jZWxsc1tqXTtcblx0XHRcdFx0XHQvLyBcdTlGMjBcdTY4MDcgaG92ZXIgXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHU1MkEwXHU0RTBBIGhvdmVyQ2VsbENsYXNzXG5cdFx0XHRcdFx0Y2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y2VsbC5hZGRDbGFzcyhob3ZlcmVkQ2VsbENsYXNzTmFtZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y2VsbC5yZW1vdmVDbGFzcyhob3ZlcmVkQ2VsbENsYXNzTmFtZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG4iLCAiaW1wb3J0IFRhYmxlRW5oYW5jZXIyIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQge01hcmtkb3duVmlld30gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge0VkaXRvclZpZXd9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XG5pbXBvcnQge2VkaXRpbmdDZWxsQ2xhc3NOYW1lLCBnZXRDZWxsRWwsIGdldENlbGxUZXh0LCBnZXRDZWxsSW5mbywgc2V0Q2FyZXRQb3NpdGlvbn0gZnJvbSBcIi4vZ2xvYmFsXCI7XG5pbXBvcnQge1RhYmxlRWRpdG9yfSBmcm9tIFwiLi90YWJsZUVkaXRvclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW91c2Vkb3duSGFuZGxlcihwbHVnaW46IFRhYmxlRW5oYW5jZXIyKSB7XG5cdHJldHVybiBhc3luYyAoZTogTW91c2VFdmVudCkgPT4ge1xuXHRcdC8vIFx1OTYwNVx1OEJGQlx1NkEyMVx1NUYwRlx1NEUwRFx1NEY3Rlx1NzUyOFx1NkI2NFx1NjNEMlx1NEVGNlxuXHRcdGlmIChwbHVnaW4uaXNJblJlYWRpbmdWaWV3KCkpXG5cdFx0XHRyZXR1cm47XG5cdFx0Ly8gXHU4M0I3XHU1Rjk3IGVkaXRvclZpZXdcblx0XHRjb25zdCBtYXJrZG93blZpZXcgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0Y29uc3QgZWRpdG9yID0gbWFya2Rvd25WaWV3Py5lZGl0b3I7XG5cdFx0Y29uc3QgZWRpdG9yVmlldyA9IChlZGl0b3IgYXMgYW55KT8uY20gYXMgRWRpdG9yVmlldztcblx0XHQvLyBcdTRFMERcdTY2MkZcdTcwQjlcdTUxRkJcdTUzNTVcdTUxNDNcdTY4M0NcdTg5RTZcdTUzRDFcdTc2ODRcdTRFOEJcdTRFRjZcblx0XHRjb25zdCBjZWxsRWwgPSBlLnRhcmdldE5vZGU7XG5cdFx0aWYgKCEoY2VsbEVsIGluc3RhbmNlb2YgSFRNTFRhYmxlQ2VsbEVsZW1lbnQpKSB7XG5cdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTVCNThcdTU3MjhcdTU5MDRcdTRFOEVcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMENcdTUyMTlcdTZCNjRcdTUzNTVcdTUxNDNcdTY4M0NcdTkwMDBcdTUxRkFcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcblx0XHRcdGNvbnN0IGVkaXRpbmdDZWxsID0gYWN0aXZlRG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBlZGl0aW5nQ2VsbENsYXNzTmFtZSk7XG5cdFx0XHRpZiAoZWRpdGluZ0NlbGwgaW5zdGFuY2VvZiBIVE1MVGFibGVDZWxsRWxlbWVudCkge1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnZG9uZSBlZGl0ICcsIGVkaXRpbmdDZWxsKTtcblx0XHRcdFx0YXdhaXQgcGx1Z2luLmRvbmVFZGl0KGVkaXRpbmdDZWxsKTtcblx0XHRcdFx0ZWRpdG9yPy5mb2N1cygpOyAvLyBcdTZDQTFcdTY3MDlcdTcwQjlcdTUxRkJcdTUzNTVcdTUxNDNcdTY4M0NcdUZGMENcdTU2RTBcdTZCNjRcdTYwNjJcdTU5MERcdTdGMTZcdThGOTFcdTU2NjhcdTcxMjZcdTcwQjlcblx0XHRcdH1cblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gXHU1NDI2XHU1MjE5XHU2NjJGXHU3MEI5XHU1MUZCXHU0RTg2XHU2N0QwXHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXG5cdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0Ly8gXHU3ODZFXHU1QjlBXHU4RkQ5XHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXHU2MjQwXHU1QzVFXHU3Njg0IHRhYmxlXG5cdFx0bGV0IHRhYmxlRWwgPSBjZWxsRWwucGFyZW50Tm9kZTtcblx0XHR3aGlsZSAodGFibGVFbCkge1xuXHRcdFx0aWYgKHRhYmxlRWwgaW5zdGFuY2VvZiBIVE1MVGFibGVFbGVtZW50KVxuXHRcdFx0XHRicmVhaztcblx0XHRcdHRhYmxlRWwgPSB0YWJsZUVsLnBhcmVudE5vZGU7XG5cdFx0fVxuXHRcdGlmICghdGFibGVFbCkge1xuXHRcdFx0Y29uc29sZS5lcnJvcignQ2Fubm90IGdldCB0YWJsZSBlbGVtZW50IG9mIGNlbGwgJywgY2VsbEVsKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gXHU1RkZEXHU3NTY1IGRhdGF2aWV3IFx1NTIxQlx1NUVGQVx1NzY4NFx1ODg2OFx1NjgzQ1xuXHRcdGlmICh0YWJsZUVsLmhhc0NsYXNzKCdkYXRhdmlldycpKVxuXHRcdFx0cmV0dXJuO1xuXHRcdGNvbnN0IHsgdGFibGVMaW5lLCBpLCBqIH0gPSBnZXRDZWxsSW5mbyhjZWxsRWwsIHBsdWdpbiwgdGFibGVFbCkhO1xuXHRcdC8vIFx1NURGMlx1N0VDRlx1NTkwNFx1NEU4RVx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlxuXHRcdGlmIChjZWxsRWwuaXNDb250ZW50RWRpdGFibGUpIHtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdhbHJlYWR5IGluIGVkaXRpbmcgbW9kZSAnLCBjZWxsRWwpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCB0YWJsZVBvcyA9IGVkaXRvclZpZXcucG9zQXRET00odGFibGVFbCk7XG5cdFx0Ly8gXHU1OTgyXHU2NzlDXHU1QjU4XHU1NzI4XHU1OTA0XHU0RThFXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXHVGRjBDXHU1MjE5XHU2QjY0XHU1MzU1XHU1MTQzXHU2ODNDXHU1MTQ4XHU5MDAwXHU1MUZBXHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXG5cdFx0Y29uc3QgZWRpdGluZ0NlbGwgPSBhY3RpdmVEb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIGVkaXRpbmdDZWxsQ2xhc3NOYW1lKTtcblx0XHRpZiAoZWRpdGluZ0NlbGwgaW5zdGFuY2VvZiBIVE1MVGFibGVDZWxsRWxlbWVudCkge1xuXHRcdFx0Ly8gY29uc29sZS5sb2coJ2RvbmUgZWRpdCAnLCBlZGl0aW5nQ2VsbCk7XG5cdFx0XHRhd2FpdCBwbHVnaW4uZG9uZUVkaXQoZWRpdGluZ0NlbGwpO1xuXHRcdH1cblx0XHQvLyBcdTdCNDlcdTRFMDBcdTRGMUFcdTUxM0ZcdUZGMENcdTUxOERcdTVDMDZcdTcwQjlcdTUxRkJcdTc2ODRcdTUzNTVcdTUxNDNcdTY4M0NcdTdGNkVcdTRFM0FcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdGNvbnN0IG5ld0NlbGxFbCA9IGdldENlbGxFbCh0YWJsZVBvcywgaSwgaiwgcGx1Z2luKTtcblx0XHRcdGlmICghKG5ld0NlbGxFbCBpbnN0YW5jZW9mIEhUTUxUYWJsZUNlbGxFbGVtZW50KSkge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdDYW5ub3QgcmVsb2NhdGUgdGFibGUgY2VsbCcpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHQvLyBcdTYyN0VcdTUyMzBcdTRFODZcdUZGMENcdTVDMDZcdTUxNzZcdTdGNkVcdTRFM0FcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcblx0XHRcdHBsdWdpbi5zZXRDZWxsRWRpdGluZyhuZXdDZWxsRWwsIHRhYmxlTGluZSwgaSwgaik7XG5cdFx0fSwgNTApO1xuXHR9XG59XG4iLCAiaW1wb3J0IFRhYmxlRW5oYW5jZXIyIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQge2VkaXRpbmdDZWxsQ2xhc3NOYW1lLCBnZXRDYXJldFBvc2l0aW9uLCBnZXRDZWxsRWwsIGdldENlbGxJbmZvLCBzZXRDYXJldFBvc2l0aW9ufSBmcm9tIFwiLi9nbG9iYWxcIjtcbmltcG9ydCB7TWFya2Rvd25WaWV3fSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7RWRpdG9yVmlldywga2V5bWFwfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5ZG93bkhhbmRsZXIocGx1Z2luOiBUYWJsZUVuaGFuY2VyMikge1xuXHRyZXR1cm4gYXN5bmMgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblxuXHRcdC8vIFx1ODNCN1x1NUY5NyBlZGl0b3JWaWV3IFRPRE8gcGVyZm9ybWFuY2UgaXNzdWU/XG5cdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdGlmICghbWFya2Rvd25WaWV3KSByZXR1cm47XG5cdFx0Y29uc3QgZWRpdG9yID0gbWFya2Rvd25WaWV3LmVkaXRvcjtcblx0XHRjb25zdCBlZGl0b3JWaWV3ID0gKGVkaXRvciBhcyBhbnkpPy5jbSBhcyBFZGl0b3JWaWV3O1xuXG5cdFx0Ly8gXHU2NEE0XHU1NkRFICYgXHU5MUNEXHU1MDVBXG5cdFx0aWYgKCFlZGl0b3IuaGFzRm9jdXMoKSkge1xuXHRcdFx0aWYgKCFlLnJlcGVhdCAmJiBlLmN0cmxLZXkgJiYgZS5rZXkgPT0gJ3onKSB7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0ZWRpdG9yLnVuZG8oKTtcblx0XHRcdFx0ZWRpdG9yLmJsdXIoKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fSBlbHNlIGlmICghZS5yZXBlYXQgJiYgZS5jdHJsS2V5ICYmIGUua2V5ID09ICdaJykge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGVkaXRvci5yZWRvKCk7XG5cdFx0XHRcdGVkaXRvci5ibHVyKCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBcdTVGNTNcdTUyNERcdTZDQTFcdTY3MDlcdTU3MjhcdTdGMTZcdThGOTEgY2VsbFx1RkYwQ1x1NTIxOVx1NEUwRFx1NTkwNFx1NzQwNlxuXHRcdGNvbnN0IGNlbGxFbCA9IGFjdGl2ZURvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgZWRpdGluZ0NlbGxDbGFzc05hbWUpO1xuXHRcdGlmICghKGNlbGxFbCBpbnN0YW5jZW9mIEhUTUxUYWJsZUNlbGxFbGVtZW50KSlcblx0XHRcdHJldHVybjtcblxuXHRcdC8vIDxzaGlmdC1lbnRlcj5cblx0XHRpZiAoIWUucmVwZWF0ICYmIGUua2V5ID09ICdFbnRlcicgJiYgZS5zaGlmdEtleSkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGNvbnN0IHByZXZDYXJldFBvcyA9IGdldENhcmV0UG9zaXRpb24oY2VsbEVsKTtcblx0XHRcdGNvbnN0IHRleHQxID0gY2VsbEVsLmlubmVyVGV4dC5zbGljZSgwLCBwcmV2Q2FyZXRQb3MpO1xuXHRcdFx0Y29uc3QgdGV4dDIgPSBjZWxsRWwuaW5uZXJUZXh0LnNsaWNlKHByZXZDYXJldFBvcyArIDEpO1xuXHRcdFx0Y2VsbEVsLmlubmVyVGV4dCA9IFt0ZXh0MSwgJyA8YnI+ICcsIHRleHQyXS5qb2luKCcnKTtcblx0XHRcdHNldENhcmV0UG9zaXRpb24oY2VsbEVsLCBwcmV2Q2FyZXRQb3MgKyA2KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyA8ZW50ZXI+XG5cdFx0Ly8gPGVzYz5cblx0XHRpZiAoIWUucmVwZWF0ICYmIChlLmtleSA9PSAnRW50ZXInIHx8IGUua2V5ID09ICdFc2NhcGUnKSkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGF3YWl0IHBsdWdpbi5kb25lRWRpdChjZWxsRWwpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFx1Nzg2RVx1NUI5QVx1OEZEOVx1NEUyQVx1NTM1NVx1NTE0M1x1NjgzQ1x1NjI0MFx1NUM1RVx1NzY4NCB0YWJsZVxuXHRcdGxldCB0YWJsZUVsID0gY2VsbEVsLnBhcmVudE5vZGU7XG5cdFx0d2hpbGUgKHRhYmxlRWwpIHtcblx0XHRcdGlmICh0YWJsZUVsIGluc3RhbmNlb2YgSFRNTFRhYmxlRWxlbWVudClcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR0YWJsZUVsID0gdGFibGVFbC5wYXJlbnROb2RlO1xuXHRcdH1cblx0XHRpZiAoIXRhYmxlRWwpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBmaW5kIHRhYmxlIG9mIGNlbGwnLCBjZWxsRWwpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIDxsZWZ0PlxuXHRcdGlmIChlLmtleSA9PSAnQXJyb3dMZWZ0Jykge1xuXHRcdFx0Y29uc3QgY2FyZXRQb3MgPSBnZXRDYXJldFBvc2l0aW9uKGNlbGxFbCk7XG5cdFx0XHRjb25zdCB7IHRhYmxlTGluZSwgaSwgaiB9ID0gZ2V0Q2VsbEluZm8oY2VsbEVsLCBwbHVnaW4sIHRhYmxlRWwpITtcblx0XHRcdC8vIFx1NTIzMFx1NjcwMFx1NURFNlx1N0FFRlx1NEU4Nlx1RkYwQ1x1NTk4Mlx1Njc5Q1x1NURFNlx1OEZCOVx1OEZEOFx1NjcwOSBjZWxsXHVGRjBDXHU1MThEXHU2MzA5XHU1MjE5XHU4REYzXHU1MjMwXHU1REU2XHU4RkI5XHU3Njg0IGNlbGxcblx0XHRcdGlmIChjYXJldFBvcyA9PSAwKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0Y29uc3QgdGFibGVQb3MgPSBlZGl0b3JWaWV3LnBvc0F0RE9NKHRhYmxlRWwpO1xuXHRcdFx0XHRhd2FpdCBwbHVnaW4uZG9uZUVkaXQoY2VsbEVsKTtcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgbmV3Q2VsbEVsID0gZ2V0Q2VsbEVsKHRhYmxlUG9zLCBpLCBqIC0gMSwgcGx1Z2luKTtcblx0XHRcdFx0XHRpZiAobmV3Q2VsbEVsIGluc3RhbmNlb2YgSFRNTFRhYmxlQ2VsbEVsZW1lbnQpIHtcblx0XHRcdFx0XHRcdHBsdWdpbi5zZXRDZWxsRWRpdGluZyhuZXdDZWxsRWwsIHRhYmxlTGluZSwgaSwgaiAtIDEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgNTApO1xuXHRcdFx0fS8vIFx1NTQyNlx1NTIxOVx1NTE0OVx1NjgwN1x1NURFNlx1NzlGQlxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyA8cmlnaHQ+XG5cdFx0aWYgKGUua2V5ID09ICdBcnJvd1JpZ2h0Jykge1xuXHRcdFx0Y29uc3QgY2FyZXRQb3MgPSBnZXRDYXJldFBvc2l0aW9uKGNlbGxFbCk7XG5cdFx0XHRjb25zdCB7IHRhYmxlTGluZSwgaSwgaiB9ID0gZ2V0Q2VsbEluZm8oY2VsbEVsLCBwbHVnaW4sIHRhYmxlRWwpITtcblx0XHRcdC8vIFx1NTIzMFx1NjcwMFx1NTNGM1x1N0FFRlx1NEU4Nlx1RkYwQ1x1NTk4Mlx1Njc5Q1x1NTNGM1x1OEZCOVx1OEZEOFx1NjcwOSBjZWxsXHVGRjBDXHU1MThEXHU2MzA5XHU1MjE5XHU4REYzXHU1MjMwXHU1M0YzXHU4RkI5XHU3Njg0IGNlbGxcblx0XHRcdGlmIChjYXJldFBvcyA+PSBjZWxsRWwuaW5uZXJUZXh0Lmxlbmd0aCkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGNvbnN0IHRhYmxlUG9zID0gZWRpdG9yVmlldy5wb3NBdERPTSh0YWJsZUVsKTtcblx0XHRcdFx0YXdhaXQgcGx1Z2luLmRvbmVFZGl0KGNlbGxFbCk7XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IG5ld0NlbGxFbCA9IGdldENlbGxFbCh0YWJsZVBvcywgaSwgaiArIDEsIHBsdWdpbik7XG5cdFx0XHRcdFx0aWYgKG5ld0NlbGxFbCBpbnN0YW5jZW9mIEhUTUxUYWJsZUNlbGxFbGVtZW50KSB7XG5cdFx0XHRcdFx0XHRwbHVnaW4uc2V0Q2VsbEVkaXRpbmcobmV3Q2VsbEVsLCB0YWJsZUxpbmUsIGksIGogKyAxKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIDUwKTtcblx0XHRcdH0gLy8gXHU1NDI2XHU1MjE5XHU1MTQ5XHU2ODA3XHU1M0YzXHU3OUZCXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIDx1cD4gXHU3OUZCXHU1MjMwXHU0RTBBXHU0RTAwXHU4ODRDXHVGRjBDXHU1OTgyXHU2NzlDXHU2NzA5XG5cdFx0aWYgKGUua2V5ID09ICdBcnJvd1VwJykge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGNvbnN0IHsgdGFibGVMaW5lLCBpLCBqIH0gPSBnZXRDZWxsSW5mbyhjZWxsRWwsIHBsdWdpbiwgdGFibGVFbCkhO1xuXHRcdFx0Y29uc3QgdGFibGVQb3MgPSBlZGl0b3JWaWV3LnBvc0F0RE9NKHRhYmxlRWwpO1xuXHRcdFx0YXdhaXQgcGx1Z2luLmRvbmVFZGl0KGNlbGxFbCk7XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0Y29uc3QgbmV3Q2VsbEVsID0gZ2V0Q2VsbEVsKHRhYmxlUG9zLCBpIC0gMSwgaiwgcGx1Z2luKTtcblx0XHRcdFx0aWYgKG5ld0NlbGxFbCBpbnN0YW5jZW9mIEhUTUxUYWJsZUNlbGxFbGVtZW50KSB7XG5cdFx0XHRcdFx0cGx1Z2luLnNldENlbGxFZGl0aW5nKG5ld0NlbGxFbCwgdGFibGVMaW5lLCBpIC0gMSwgaik7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDUwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyA8ZG93bj4gXHU3OUZCXHU1MjMwXHU0RTBCXHU0RTAwXHU4ODRDXHVGRjBDXHU1OTgyXHU2NzlDXHU2NzA5XG5cdFx0aWYgKGUua2V5ID09ICdBcnJvd0Rvd24nKSB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0Y29uc3QgeyB0YWJsZUxpbmUsIGksIGogfSA9IGdldENlbGxJbmZvKGNlbGxFbCwgcGx1Z2luLCB0YWJsZUVsKSE7XG5cdFx0XHRjb25zdCB0YWJsZVBvcyA9IGVkaXRvclZpZXcucG9zQXRET00odGFibGVFbCk7XG5cdFx0XHRhd2FpdCBwbHVnaW4uZG9uZUVkaXQoY2VsbEVsKTtcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBuZXdDZWxsRWwgPSBnZXRDZWxsRWwodGFibGVQb3MsIGkgKyAxLCBqLCBwbHVnaW4pO1xuXHRcdFx0XHRpZiAobmV3Q2VsbEVsIGluc3RhbmNlb2YgSFRNTFRhYmxlQ2VsbEVsZW1lbnQpIHtcblx0XHRcdFx0XHRwbHVnaW4uc2V0Q2VsbEVkaXRpbmcobmV3Q2VsbEVsLCB0YWJsZUxpbmUsIGkgKyAxLCBqKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgNTApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIDxjLWE+IFx1NTE2OFx1OTAwOVxuXHRcdGlmICghZS5yZXBlYXQgJiYgZS5jdHJsS2V5ICYmIGUua2V5ID09ICdhJykge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGNvbnN0IHNlbGVjdGlvbiA9IGFjdGl2ZVdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdGNvbnN0IHJhbmdlID0gYWN0aXZlRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcblx0XHRcdHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhjZWxsRWwpO1xuXHRcdFx0c2VsZWN0aW9uPy5yZW1vdmVBbGxSYW5nZXMoKTtcblx0XHRcdHNlbGVjdGlvbj8uYWRkUmFuZ2UocmFuZ2UpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIHNoaWZ0LXRhYlxuXHRcdGlmIChlLnNoaWZ0S2V5ICYmIGUua2V5ID09ICdUYWInKSB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0Y29uc3QgeyB0YWJsZUxpbmUsIGksIGogfSA9IGdldENlbGxJbmZvKGNlbGxFbCwgcGx1Z2luLCB0YWJsZUVsKSE7XG5cdFx0XHRjb25zdCByb3dOdW0gPSB0YWJsZUVsLnJvd3MubGVuZ3RoO1xuXHRcdFx0Y29uc3QgY29sTnVtID0gdGFibGVFbC5yb3dzWzBdLmNlbGxzLmxlbmd0aDtcblx0XHRcdGNvbnN0IHRhYmxlUG9zID0gZWRpdG9yVmlldy5wb3NBdERPTSh0YWJsZUVsKTtcblx0XHRcdGxldCBuZXh0STogbnVtYmVyLCBuZXh0SjogbnVtYmVyO1xuXHRcdFx0aWYgKGkgPT0gMCAmJiBqID09IDApIHsgLy8gXHU2NzAwXHU1NDBFXHU0RTAwXHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXG5cdFx0XHRcdG5leHRJID0gcm93TnVtIC0gMTtcblx0XHRcdFx0bmV4dEogPSBjb2xOdW0gLSAxO1xuXHRcdFx0fSBlbHNlIGlmIChqID09IDApIHsgLy8gXHU1NkRFXHU1MjMwXHU0RTBBXHU0RTAwXHU4ODRDXHU2NzAwXHU1NDBFXHU0RTAwXHU0RTJBXHU1MTQzXHU3RDIwXG5cdFx0XHRcdG5leHRJID0gaSAtIDE7XG5cdFx0XHRcdG5leHRKID0gY29sTnVtIC0gMTtcblx0XHRcdH0gZWxzZSB7IC8vIFx1NTI0RFx1NEUwMFx1NTIxN1xuXHRcdFx0XHRuZXh0SSA9IGk7XG5cdFx0XHRcdG5leHRKID0gaiAtIDE7XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCBwbHVnaW4uZG9uZUVkaXQoY2VsbEVsKTtcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBuZXdDZWxsRWwgPSBnZXRDZWxsRWwodGFibGVQb3MsIG5leHRJLCBuZXh0SiwgcGx1Z2luKTtcblx0XHRcdFx0aWYgKG5ld0NlbGxFbCBpbnN0YW5jZW9mIEhUTUxUYWJsZUNlbGxFbGVtZW50KSB7XG5cdFx0XHRcdFx0cGx1Z2luLnNldENlbGxFZGl0aW5nKG5ld0NlbGxFbCwgdGFibGVMaW5lLCBuZXh0SSwgbmV4dEopO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCA1MCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gdGFiXG5cdFx0aWYgKGUua2V5ID09ICdUYWInKSB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0Y29uc3QgeyB0YWJsZUxpbmUsIGksIGogfSA9IGdldENlbGxJbmZvKGNlbGxFbCwgcGx1Z2luLCB0YWJsZUVsKSE7XG5cdFx0XHRjb25zdCByb3dOdW0gPSB0YWJsZUVsLnJvd3MubGVuZ3RoO1xuXHRcdFx0Y29uc3QgY29sTnVtID0gdGFibGVFbC5yb3dzWzBdLmNlbGxzLmxlbmd0aDtcblx0XHRcdGNvbnN0IHRhYmxlUG9zID0gZWRpdG9yVmlldy5wb3NBdERPTSh0YWJsZUVsKTtcblx0XHRcdGxldCBuZXh0STogbnVtYmVyLCBuZXh0SjogbnVtYmVyO1xuXHRcdFx0aWYgKGkgPT0gcm93TnVtIC0gMSAmJiBqID09IGNvbE51bSAtIDEpIHsgLy8gXHU1MjMwXHU3QjJDXHU0RTAwXHU0RTJBXHU1MzU1XHU1MTQzXHU2ODNDXG5cdFx0XHRcdG5leHRJID0gMDtcblx0XHRcdFx0bmV4dEogPSAwO1xuXHRcdFx0fSBlbHNlIGlmIChqID09IGNvbE51bSAtIDEpIHsgLy8gXHU0RTBCXHU0RTAwXHU4ODRDXHU3QjJDXHU0RTAwXHU0RTJBXHU1MTQzXHU3RDIwXG5cdFx0XHRcdG5leHRJID0gaSArIDE7XG5cdFx0XHRcdG5leHRKID0gMDtcblx0XHRcdH0gZWxzZSB7IC8vIFx1NEUwQlx1NEUwMFx1NTIxN1xuXHRcdFx0XHRuZXh0SSA9IGk7XG5cdFx0XHRcdG5leHRKID0gaiArIDE7XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCBwbHVnaW4uZG9uZUVkaXQoY2VsbEVsKTtcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBuZXdDZWxsRWwgPSBnZXRDZWxsRWwodGFibGVQb3MsIG5leHRJLCBuZXh0SiwgcGx1Z2luKTtcblx0XHRcdFx0aWYgKG5ld0NlbGxFbCBpbnN0YW5jZW9mIEhUTUxUYWJsZUNlbGxFbGVtZW50KSB7XG5cdFx0XHRcdFx0cGx1Z2luLnNldENlbGxFZGl0aW5nKG5ld0NlbGxFbCwgdGFibGVMaW5lLCBuZXh0SSwgbmV4dEopO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCA1MCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGFyb3VuZChvYmosIGZhY3Rvcmllcykge1xuICAgIGNvbnN0IHJlbW92ZXJzID0gT2JqZWN0LmtleXMoZmFjdG9yaWVzKS5tYXAoa2V5ID0+IGFyb3VuZDEob2JqLCBrZXksIGZhY3Rvcmllc1trZXldKSk7XG4gICAgcmV0dXJuIHJlbW92ZXJzLmxlbmd0aCA9PT0gMSA/IHJlbW92ZXJzWzBdIDogZnVuY3Rpb24gKCkgeyByZW1vdmVycy5mb3JFYWNoKHIgPT4gcigpKTsgfTtcbn1cbmZ1bmN0aW9uIGFyb3VuZDEob2JqLCBtZXRob2QsIGNyZWF0ZVdyYXBwZXIpIHtcbiAgICBjb25zdCBvcmlnaW5hbCA9IG9ialttZXRob2RdLCBoYWRPd24gPSBvYmouaGFzT3duUHJvcGVydHkobWV0aG9kKTtcbiAgICBsZXQgY3VycmVudCA9IGNyZWF0ZVdyYXBwZXIob3JpZ2luYWwpO1xuICAgIC8vIExldCBvdXIgd3JhcHBlciBpbmhlcml0IHN0YXRpYyBwcm9wcyBmcm9tIHRoZSB3cmFwcGluZyBtZXRob2QsXG4gICAgLy8gYW5kIHRoZSB3cmFwcGluZyBtZXRob2QsIHByb3BzIGZyb20gdGhlIG9yaWdpbmFsIG1ldGhvZFxuICAgIGlmIChvcmlnaW5hbClcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGN1cnJlbnQsIG9yaWdpbmFsKTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yod3JhcHBlciwgY3VycmVudCk7XG4gICAgb2JqW21ldGhvZF0gPSB3cmFwcGVyO1xuICAgIC8vIFJldHVybiBhIGNhbGxiYWNrIHRvIGFsbG93IHNhZmUgcmVtb3ZhbFxuICAgIHJldHVybiByZW1vdmU7XG4gICAgZnVuY3Rpb24gd3JhcHBlciguLi5hcmdzKSB7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYmVlbiBkZWFjdGl2YXRlZCBhbmQgYXJlIG5vIGxvbmdlciB3cmFwcGVkLCByZW1vdmUgb3Vyc2VsdmVzXG4gICAgICAgIGlmIChjdXJyZW50ID09PSBvcmlnaW5hbCAmJiBvYmpbbWV0aG9kXSA9PT0gd3JhcHBlcilcbiAgICAgICAgICAgIHJlbW92ZSgpO1xuICAgICAgICByZXR1cm4gY3VycmVudC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgICAvLyBJZiBubyBvdGhlciBwYXRjaGVzLCBqdXN0IGRvIGEgZGlyZWN0IHJlbW92YWxcbiAgICAgICAgaWYgKG9ialttZXRob2RdID09PSB3cmFwcGVyKSB7XG4gICAgICAgICAgICBpZiAoaGFkT3duKVxuICAgICAgICAgICAgICAgIG9ialttZXRob2RdID0gb3JpZ2luYWw7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZGVsZXRlIG9ialttZXRob2RdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50ID09PSBvcmlnaW5hbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gRWxzZSBwYXNzIGZ1dHVyZSBjYWxscyB0aHJvdWdoLCBhbmQgcmVtb3ZlIHdyYXBwZXIgZnJvbSB0aGUgcHJvdG90eXBlIGNoYWluXG4gICAgICAgIGN1cnJlbnQgPSBvcmlnaW5hbDtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHdyYXBwZXIsIG9yaWdpbmFsIHx8IEZ1bmN0aW9uKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZGVkdXBlKGtleSwgb2xkRm4sIG5ld0ZuKSB7XG4gICAgY2hlY2tba2V5XSA9IGtleTtcbiAgICByZXR1cm4gY2hlY2s7XG4gICAgZnVuY3Rpb24gY2hlY2soLi4uYXJncykge1xuICAgICAgICByZXR1cm4gKG9sZEZuW2tleV0gPT09IGtleSA/IG9sZEZuIDogbmV3Rm4pLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhZnRlcihwcm9taXNlLCBjYikge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW4oY2IsIGNiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemUoYXN5bmNGdW5jdGlvbikge1xuICAgIGxldCBsYXN0UnVuID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgZnVuY3Rpb24gd3JhcHBlciguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiBsYXN0UnVuID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICAgICAgICBhZnRlcihsYXN0UnVuLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXN5bmNGdW5jdGlvbi5hcHBseSh0aGlzLCBhcmdzKS50aGVuKHJlcywgcmVqKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgd3JhcHBlci5hZnRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGxhc3RSdW4gPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHsgYWZ0ZXIobGFzdFJ1biwgcmVzKTsgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gd3JhcHBlcjtcbn1cbiIsICJpbXBvcnQgVGFibGVFbmhhbmNlcjIgZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7XG5cdGVkaXRpbmdDZWxsQ2xhc3NOYW1lLFxuXHRnZXRDYXJldFBvc2l0aW9uLFxuXHRob3ZlcmVkQ2VsbENsYXNzTmFtZSxcblx0c2V0Q2FyZXRQb3NpdGlvbixcblx0d2l0aEVkaXRpbmdDZWxsXG59IGZyb20gXCIuL2dsb2JhbFwiO1xuXG5leHBvcnQgY29uc3QgZ2V0Q29tbWFuZHMgPSAocGx1Z2luOiBUYWJsZUVuaGFuY2VyMikgPT4geyByZXR1cm4ge1xuXHQnZWRpdG9yOnRvZ2dsZS1ib2xkJzogKCkgPT4gd2l0aEVkaXRpbmdDZWxsKGNlbGxFbCA9PiB7XG5cdFx0Y29uc3Qgc2VsZWN0aW9uID0gYWN0aXZlV2luZG93LmdldFNlbGVjdGlvbigpO1xuXHRcdGlmICghc2VsZWN0aW9uKSByZXR1cm47XG5cdFx0bGV0IHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQ7XG5cdFx0aWYgKHNlbGVjdGlvbi5hbmNob3JPZmZzZXQgPCBzZWxlY3Rpb24uZm9jdXNPZmZzZXQpIHtcblx0XHRcdHNlbGVjdGlvblN0YXJ0ID0gc2VsZWN0aW9uLmFuY2hvck9mZnNldDtcblx0XHRcdHNlbGVjdGlvbkVuZCA9IHNlbGVjdGlvbi5mb2N1c09mZnNldDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2VsZWN0aW9uU3RhcnQgPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQ7XG5cdFx0XHRzZWxlY3Rpb25FbmQgPSBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0O1xuXHRcdH1cblx0XHRjb25zdCBwcmV2VGV4dCA9IGNlbGxFbC5pbm5lclRleHQuc2xpY2UoMCwgc2VsZWN0aW9uU3RhcnQpO1xuXHRcdGNvbnN0IHNlbGVjdFRleHQgPSBjZWxsRWwuaW5uZXJUZXh0LnNsaWNlKHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpO1xuXHRcdGNvbnN0IHN1Y2NUZXh0ID0gY2VsbEVsLmlubmVyVGV4dC5zbGljZShzZWxlY3Rpb25FbmQpO1xuXHRcdGNlbGxFbC5pbm5lclRleHQgPSBbcHJldlRleHQsICcqKicsIHNlbGVjdFRleHQsICcqKicsIHN1Y2NUZXh0XS5qb2luKCcnKTtcblx0XHRzZXRDYXJldFBvc2l0aW9uKGNlbGxFbCwgc2VsZWN0aW9uRW5kICsgNCk7XG5cdFx0Ly8gVE9ETyBrZWVwIHNlbGVjdGlvblxuXHRcdC8vIGNvbnN0IHJhbmdlID0gYWN0aXZlRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcblx0XHQvLyByYW5nZS5zZXRTdGFydChjZWxsRWwsIDApO1xuXHRcdC8vIHJhbmdlLnNldEVuZChjZWxsRWwsIDEpO1xuXHRcdC8vIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcblx0XHQvLyBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9KSxcblx0J2VkaXRvcjp0b2dnbGUtaXRhbGljcyc6ICgpID0+IHdpdGhFZGl0aW5nQ2VsbChjZWxsRWwgPT4ge1xuXHRcdGNvbnN0IHNlbGVjdGlvbiA9IGFjdGl2ZVdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcblx0XHRpZiAoIXNlbGVjdGlvbikgcmV0dXJuO1xuXHRcdGxldCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kO1xuXHRcdGlmIChzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0IDwgc2VsZWN0aW9uLmZvY3VzT2Zmc2V0KSB7XG5cdFx0XHRzZWxlY3Rpb25TdGFydCA9IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQ7XG5cdFx0XHRzZWxlY3Rpb25FbmQgPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNlbGVjdGlvblN0YXJ0ID0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuXHRcdFx0c2VsZWN0aW9uRW5kID0gc2VsZWN0aW9uLmFuY2hvck9mZnNldDtcblx0XHR9XG5cdFx0Y29uc3QgcHJldlRleHQgPSBjZWxsRWwuaW5uZXJUZXh0LnNsaWNlKDAsIHNlbGVjdGlvblN0YXJ0KTtcblx0XHRjb25zdCBzZWxlY3RUZXh0ID0gY2VsbEVsLmlubmVyVGV4dC5zbGljZShzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKTtcblx0XHRjb25zdCBzdWNjVGV4dCA9IGNlbGxFbC5pbm5lclRleHQuc2xpY2Uoc2VsZWN0aW9uRW5kKTtcblx0XHRjZWxsRWwuaW5uZXJUZXh0ID0gW3ByZXZUZXh0LCAnKicsIHNlbGVjdFRleHQsICcqJywgc3VjY1RleHRdLmpvaW4oJycpO1xuXHRcdHNldENhcmV0UG9zaXRpb24oY2VsbEVsLCBzZWxlY3Rpb25FbmQgKyAyKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSksXG5cdCdlZGl0b3I6dG9nZ2xlLWJsb2NrcXVvdGUnOiAoKSA9PiB3aXRoRWRpdGluZ0NlbGwoY2VsbEVsID0+IHtcblx0XHRjb25zdCBzZWxlY3Rpb24gPSBhY3RpdmVXaW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0aWYgKCFzZWxlY3Rpb24pIHJldHVybjtcblx0XHRsZXQgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZDtcblx0XHRpZiAoc2VsZWN0aW9uLmFuY2hvck9mZnNldCA8IHNlbGVjdGlvbi5mb2N1c09mZnNldCkge1xuXHRcdFx0c2VsZWN0aW9uU3RhcnQgPSBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0O1xuXHRcdFx0c2VsZWN0aW9uRW5kID0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzZWxlY3Rpb25TdGFydCA9IHNlbGVjdGlvbi5mb2N1c09mZnNldDtcblx0XHRcdHNlbGVjdGlvbkVuZCA9IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQ7XG5cdFx0fVxuXHRcdGNvbnN0IHByZXZUZXh0ID0gY2VsbEVsLmlubmVyVGV4dC5zbGljZSgwLCBzZWxlY3Rpb25TdGFydCk7XG5cdFx0Y29uc3Qgc2VsZWN0VGV4dCA9IGNlbGxFbC5pbm5lclRleHQuc2xpY2Uoc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCk7XG5cdFx0Y29uc3Qgc3VjY1RleHQgPSBjZWxsRWwuaW5uZXJUZXh0LnNsaWNlKHNlbGVjdGlvbkVuZCk7XG5cdFx0Y2VsbEVsLmlubmVyVGV4dCA9IFsnPiAnLCBwcmV2VGV4dCwgc2VsZWN0VGV4dCwgc3VjY1RleHRdLmpvaW4oJycpO1xuXHRcdHNldENhcmV0UG9zaXRpb24oY2VsbEVsLCBzZWxlY3Rpb25FbmQgKyAyKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSksXG5cdCdlZGl0b3I6dG9nZ2xlLWJ1bGxldC1saXN0JzogKCkgPT4gd2l0aEVkaXRpbmdDZWxsKGNlbGxFbCA9PiB7XG5cdFx0cmV0dXJuIHRydWU7IC8vIGRvIG5vdGhpbmdcblx0fSksXG5cdCdlZGl0b3I6dG9nZ2xlLWNoZWNrbGlzdC1zdGF0dXMnOiAoKSA9PiB3aXRoRWRpdGluZ0NlbGwoY2VsbEVsID0+IHtcblx0XHRyZXR1cm4gdHJ1ZTsgLy8gZG8gbm90aGluZ1xuXHR9KSxcblx0J2VkaXRvcjp0b2dnbGUtY29kZSc6ICgpID0+IHdpdGhFZGl0aW5nQ2VsbChjZWxsRWwgPT4ge1xuXHRcdGNvbnN0IHNlbGVjdGlvbiA9IGFjdGl2ZVdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcblx0XHRpZiAoIXNlbGVjdGlvbikgcmV0dXJuO1xuXHRcdGxldCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kO1xuXHRcdGlmIChzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0IDwgc2VsZWN0aW9uLmZvY3VzT2Zmc2V0KSB7XG5cdFx0XHRzZWxlY3Rpb25TdGFydCA9IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQ7XG5cdFx0XHRzZWxlY3Rpb25FbmQgPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNlbGVjdGlvblN0YXJ0ID0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuXHRcdFx0c2VsZWN0aW9uRW5kID0gc2VsZWN0aW9uLmFuY2hvck9mZnNldDtcblx0XHR9XG5cdFx0Y29uc3QgcHJldlRleHQgPSBjZWxsRWwuaW5uZXJUZXh0LnNsaWNlKDAsIHNlbGVjdGlvblN0YXJ0KTtcblx0XHRjb25zdCBzZWxlY3RUZXh0ID0gY2VsbEVsLmlubmVyVGV4dC5zbGljZShzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKTtcblx0XHRjb25zdCBzdWNjVGV4dCA9IGNlbGxFbC5pbm5lclRleHQuc2xpY2Uoc2VsZWN0aW9uRW5kKTtcblx0XHRjZWxsRWwuaW5uZXJUZXh0ID0gW3ByZXZUZXh0LCAnYCcsIHNlbGVjdFRleHQsICdgJywgc3VjY1RleHRdLmpvaW4oJycpO1xuXHRcdHNldENhcmV0UG9zaXRpb24oY2VsbEVsLCBzZWxlY3Rpb25FbmQgKyAyKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSksXG5cdCdlZGl0b3I6dG9nZ2xlLWhpZ2hsaWdodCc6ICgpID0+IHdpdGhFZGl0aW5nQ2VsbChjZWxsRWwgPT4ge1xuXHRcdGNvbnN0IHNlbGVjdGlvbiA9IGFjdGl2ZVdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcblx0XHRpZiAoIXNlbGVjdGlvbikgcmV0dXJuO1xuXHRcdGxldCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kO1xuXHRcdGlmIChzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0IDwgc2VsZWN0aW9uLmZvY3VzT2Zmc2V0KSB7XG5cdFx0XHRzZWxlY3Rpb25TdGFydCA9IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQ7XG5cdFx0XHRzZWxlY3Rpb25FbmQgPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNlbGVjdGlvblN0YXJ0ID0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuXHRcdFx0c2VsZWN0aW9uRW5kID0gc2VsZWN0aW9uLmFuY2hvck9mZnNldDtcblx0XHR9XG5cdFx0Y29uc3QgcHJldlRleHQgPSBjZWxsRWwuaW5uZXJUZXh0LnNsaWNlKDAsIHNlbGVjdGlvblN0YXJ0KTtcblx0XHRjb25zdCBzZWxlY3RUZXh0ID0gY2VsbEVsLmlubmVyVGV4dC5zbGljZShzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKTtcblx0XHRjb25zdCBzdWNjVGV4dCA9IGNlbGxFbC5pbm5lclRleHQuc2xpY2Uoc2VsZWN0aW9uRW5kKTtcblx0XHRjZWxsRWwuaW5uZXJUZXh0ID0gW3ByZXZUZXh0LCAnPT0nLCBzZWxlY3RUZXh0LCAnPT0nLCBzdWNjVGV4dF0uam9pbignJyk7XG5cdFx0c2V0Q2FyZXRQb3NpdGlvbihjZWxsRWwsIHNlbGVjdGlvbkVuZCArIDQpO1xuXHR9KSxcblx0J2VkaXRvcjp0b2dnbGUtbnVtYmVyZWQtbGlzdCc6ICgpID0+IHdpdGhFZGl0aW5nQ2VsbChjZWxsRWwgPT4ge1xuXHRcdHJldHVybiBudWxsOyAvLyBkbyBub3RoaW5nXG5cdH0pLFxuXHQnZWRpdG9yOnRvZ2dsZS1zdHJpa2V0aHJvdWdoJzogKCkgPT4gd2l0aEVkaXRpbmdDZWxsKGNlbGxFbCA9PiB7XG5cdFx0Y29uc3Qgc2VsZWN0aW9uID0gYWN0aXZlV2luZG93LmdldFNlbGVjdGlvbigpO1xuXHRcdGlmICghc2VsZWN0aW9uKSByZXR1cm47XG5cdFx0bGV0IHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQ7XG5cdFx0aWYgKHNlbGVjdGlvbi5hbmNob3JPZmZzZXQgPCBzZWxlY3Rpb24uZm9jdXNPZmZzZXQpIHtcblx0XHRcdHNlbGVjdGlvblN0YXJ0ID0gc2VsZWN0aW9uLmFuY2hvck9mZnNldDtcblx0XHRcdHNlbGVjdGlvbkVuZCA9IHNlbGVjdGlvbi5mb2N1c09mZnNldDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2VsZWN0aW9uU3RhcnQgPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQ7XG5cdFx0XHRzZWxlY3Rpb25FbmQgPSBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0O1xuXHRcdH1cblx0XHRjb25zdCBwcmV2VGV4dCA9IGNlbGxFbC5pbm5lclRleHQuc2xpY2UoMCwgc2VsZWN0aW9uU3RhcnQpO1xuXHRcdGNvbnN0IHNlbGVjdFRleHQgPSBjZWxsRWwuaW5uZXJUZXh0LnNsaWNlKHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpO1xuXHRcdGNvbnN0IHN1Y2NUZXh0ID0gY2VsbEVsLmlubmVyVGV4dC5zbGljZShzZWxlY3Rpb25FbmQpO1xuXHRcdGNlbGxFbC5pbm5lclRleHQgPSBbcHJldlRleHQsICd+ficsIHNlbGVjdFRleHQsICd+ficsIHN1Y2NUZXh0XS5qb2luKCcnKTtcblx0XHRzZXRDYXJldFBvc2l0aW9uKGNlbGxFbCwgc2VsZWN0aW9uRW5kICsgNCk7XG5cdH0pLFxufX1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFBMkM7OztBQ0UzQyxzQkFBMkI7QUFJcEIsSUFBTSx1QkFBdUI7QUFDN0IsSUFBTSx1QkFBdUI7QUFFN0IsMEJBQTBCLGNBQTJCO0FBQzNELE1BQUksV0FBVyxHQUFHLEtBQUs7QUFDdkIsUUFBTSxhQUFhLGFBQWE7QUFDaEMsTUFBSSxPQUFPLElBQUksWUFBWTtBQUMxQixZQUFRLElBQUksV0FBVyxDQUFDO0FBQ3hCLFFBQUksTUFBTSx3QkFBd0IsY0FBYyxjQUFjO0FBQzdELGlCQUFXLE1BQU07QUFBQSxJQUNsQjtBQUFBLEVBQ0Q7QUFDQSxTQUFPO0FBQ1I7QUFFTywwQkFBMEIsY0FBMkIsUUFBZ0I7QUFDM0UsTUFBSSxXQUFXLEdBQUcsS0FBSyxRQUFRLGVBQWUsWUFBWTtBQUMxRCxRQUFNLGFBQWEsYUFBYTtBQUNoQyxNQUFJLE9BQU8sSUFBSSxZQUFZO0FBQzFCLFVBQU0sU0FBUyxhQUFhLFdBQVcsSUFBSSxNQUFNO0FBQ2pELFVBQU0sU0FBUyxJQUFJO0FBQ25CLFFBQUksZ0JBQWdCO0FBQ3BCLFFBQUksU0FB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
